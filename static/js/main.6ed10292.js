/*! For license information please see main.6ed10292.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(d,e)&&(h.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function j(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Te(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Ie(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var De=!1;function Ne(e,t,n){if(De)return e(t,n);De=!0;try{return Ce(e,t,n)}finally{De=!1,(null!==_e||null!==Se)&&(Ae(),Ie())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ve=!1,Ue=null,Be={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,St,Et,Tt=!1,It=[],Ct=null,At=null,Dt=null,Nt=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Vt(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==At&&Vt(At)&&(At=null),null!==Dt&&Vt(Dt)&&(Dt=null),Nt.forEach(Ut),Pt.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return jt(t,e)}if(0<It.length){jt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&jt(Ct,e),null!==At&&jt(At,e),null!==Dt&&jt(Dt,e),Nt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=Xt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Dt=Mt(Dt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Mt(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Xt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Xt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=an(dn),pn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return Sn}var Tn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Dn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Nn),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Vr(e,0)}function Xn(e){if(W(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Xn(Wn)){var t=[];Gn(t,Wn,e,we(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Wn)}function ar(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Sr={};function Er(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return _r[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Tr=Er("animationend"),Ir=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Dr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Dr.set(e,t),s(t,[e])}for(var Rr=0;Rr<Nr.length;Rr++){var Or=Nr[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(Ir,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ve||(Ve=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Ur(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ne((function(){var r=a,i=we(n),o=[];e:{var u=Dr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Tr:case Ir:case Cr:s=yn;break;case Ar:s=Dn;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Pe(v,h))&&l.push(Gr(v,p,d)))),f)break;v=v.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[vi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=vn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,gi(i)===r&&((l=new l(h,v+"enter",c,n,i)).target=d,l.relatedTarget=f,p=l),f=p,s&&c)e:{for(h=c,v=0,d=l=s;d;d=Wr(d))v++;for(d=0,p=h;p;p=Wr(p))d++;for(;0<v-d;)l=Wr(l),v--;for(;0<d-v;)h=Wr(h),d--;for(;v--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Kn(u))if($n)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),Zt=Jt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Vr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,vi="__reactContainer$"+fi,pi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Si(e){return{current:e}}function Ei(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ti(e,t){_i++,xi[_i]=e.current,e.current=t}var Ii={},Ci=Si(Ii),Ai=Si(!1),Di=Ii;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Ai),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ii)throw Error(a(168));Ti(Ci,t),Ti(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Di=Ci.current,Ti(Ci,e),Ti(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Ti(Ci,e)):Ei(Ai),Ti(Ai,n)}var Vi=null,Ui=!1,Bi=!1;function ji(e){null===Vi?Vi=[e]:Vi.push(e)}function zi(){if(!Bi&&null!==Vi){Bi=!0;var e=0,t=kt;try{var n=Vi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,Ui=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),We(Ze,zi),i}finally{kt=t,Bi=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Xi=null,Yi=1,$i="";function Ji(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Yi,Wi[Qi++]=$i,Wi[Qi++]=Xi,Xi=e;var r=Yi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Yi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Xi;)Xi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Yi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Si(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Ei(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Da=!1;function Na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&As)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Da=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(h=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=p.payload)?v.call(d,f,h):v)||void 0===h)break e;f=F({},f,h);break e;case 2:Da=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Pi(t)?Di:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Pi(t)?Di:Ci.current,i.context=Ni(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function p(i,a,u,s){for(var c=null,l=null,f=a,p=a=0,m=null;null!==f&&p<u.length;p++){f.index>p?(m=f,f=null):m=f.sibling;var y=d(i,f,u[p],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,p),null===l?c=y:l.sibling=y,l=y,f=m}if(p===u.length)return n(i,f),ia&&Ji(i,p),c;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(a=o(f,a,p),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,p),c}for(f=r(i,f);p<u.length;p++)null!==(m=v(f,i,p,u[p],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?p:m.key),a=o(m,a,p),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,p),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,p=u,m=u=0,y=null,g=s.next();null!==p&&!g.done;m++,g=s.next()){p.index>m?(y=p,p=null):y=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=y);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,p=y}if(g.done)return n(i,p),ia&&Ji(i,m),l;if(null===p){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(p=r(i,p);!g.done;m++,g=s.next())null!==(g=v(p,i,m,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Vc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=Xa(!0),$a=Xa(!1),Ja={},Za=Si(Ja),eo=Si(Ja),to=Si(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Ti(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Si(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,vo=0,po=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,vo=0,yo=mo=po=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?po.memoizedState=yo=e:yo=yo.next=e,yo}function Io(){if(null===mo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?po.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?po.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((vo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,po.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Do(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Po(e,t){var n=po,r=Io(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ds)throw Error(a(349));0!==(30&vo)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&rc(t,e,1,-1)}function Vo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,po,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Io().memoizedState}function jo(e,t,n,r){var i=To();po.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}po.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return jo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function Xo(){}function Yo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=pt(),po.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Io().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ia(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===po||null!==t&&t===po}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Vo,useDebugValue:Xo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ds)throw Error(a(349));0!==(30&vo)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ds.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:$o,useReducer:Ao,useRef:Bo,useState:function(){return Ao(Co)},useDebugValue:Xo,useDeferredValue:function(e){return Jo(Io(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],Io().memoizedState]},useMutableSource:No,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:$o,useReducer:Do,useRef:Bo,useState:function(){return Do(Co)},useDebugValue:Xo,useDeferredValue:function(e){var t=Io();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Do(Co)[0],Io().memoizedState]},useMutableSource:No,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function vu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Hs=r),hu(0,t)},n}function pu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ya(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Iu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Os,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Os,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Os,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Os,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Pi(n)?Di:Ci.current;return a=Ni(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Ni(t,c=Pi(n)?Di:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Da=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ai.current||Da?("function"===typeof l&&(Ba(t,n,l,r),s=t.memoizedState),(u=Da||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Ni(t,s=Pi(n)?Di:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Da=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||Ai.current||Da?("function"===typeof d&&(Ba(t,n,d,r),v=t.memoizedState),(c=Da||za(t,n,c,r,h,v,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Du(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Nu(e,t,n,r,i){return da(),va(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ru,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Bu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Bu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Bu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ds)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),rc(r,e,i,-1))}return mc(),Bu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Yi,Wi[Qi++]=$i,Wi[Qi++]=Xi,Yi=e.id,$i=e.overflow,Xi=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bu(e,t,n,r){return null!==r&&va(r),Ya(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Wu(t),null;case 3:return r=t.stateNode,io(),Ei(Ai),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ru(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=X(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Ru(e,t),null===e&&zr(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*$e()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ai),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=X(e,i),r=X(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,$u=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[pi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)vs(e,t,n),n=n.sibling}function vs(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!$u&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,ds(e,t,n),$u=r):ds(e,t,n);break;default:ds(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));vs(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Ec(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=$e())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,ms(t,e),$u=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(v=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==v?(v.return=d,Zu=v):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&ps(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Yu;var c=$u;if(Yu=o,($u=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Yu=u,$u=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Ss,Es=Math.ceil,Ts=b.ReactCurrentDispatcher,Is=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,As=0,Ds=null,Ns=null,Ps=0,Rs=0,Os=Si(0),Ls=0,Ms=null,Fs=0,Vs=0,Us=0,Bs=null,js=null,zs=0,qs=1/0,Ks=null,Gs=!1,Hs=null,Ws=null,Qs=!1,Xs=null,Ys=0,$s=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&As)?$e():-1!==Zs?Zs:Zs=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&As)&&0!==Ps?Ps&-Ps:null!==pa.transition?(0===ec&&(ec=pt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<$s)throw $s=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&As)&&e===Ds||(e===Ds&&(0===(2&As)&&(Vs|=n),4===Ls&&sc(e,Ps)),ic(e,r),1===n&&0===As&&0===(1&t.mode)&&(qs=$e()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ds?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,ji(e)}(cc.bind(null,e)):ji(cc.bind(null,e)),oi((function(){0===(6&As)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Dc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&As))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ds?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=As;As|=2;var o=pc();for(Ds===e&&Ps===t||(Ks=null,qs=$e()+500,dc(e,t));;)try{kc();break}catch(s){vc(e,s)}wa(),Ts.current=o,As=i,null!==Ns?t=0:(Ds=null,Ps=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=vt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,js,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,js,Ks),t);break}xc(e,js,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,js,Ks),r);break}xc(e,js,Ks);break;default:throw Error(a(329))}}}return ic(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&uc(t)),e}function uc(e){null===js?js=e:js.push.apply(js,e)}function sc(e,t){for(t&=~Us,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&As))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,js,Ks),ic(e,$e()),null}function lc(e,t){var n=As;As|=1;try{return e(t)}finally{0===(As=n)&&(qs=$e()+500,Ui&&zi())}}function fc(e){null!==Xs&&0===Xs.tag&&0===(6&As)&&_c();var t=As;As|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(As=t))&&zi()}}function hc(){Rs=Os.current,Ei(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ei(Ai),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ds=e,Ns=e=Oc(e.current,null),Ps=Rs=t,Ls=0,Ms=null,Us=Vs=Fs=0,js=Bs=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function vc(e,t){for(;;){var n=Ns;try{if(wa(),fo.current=ou,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,yo=mo=po=null,ko=!1,bo=0,Is.current=null,null===n||null===n.return){Ls=1,Ms=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=yu(u);if(null!==v){v.flags&=-257,gu(v,u,s,0,t),1&v.mode&&mu(o,l,t),c=l;var p=(t=v).updateQueue;if(null===p){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),va(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Bs?Bs=[o]:Bs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function pc(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ds||0===(268435455&Fs)&&0===(268435455&Vs)||sc(Ds,Ps)}function yc(e,t){var n=As;As|=2;var r=pc();for(Ds===e&&Ps===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){vc(e,i)}if(wa(),As=n,Ts.current=r,null!==Ns)throw Error(a(261));return Ds=null,Ps=0,Ls}function gc(){for(;null!==Ns;)bc(Ns)}function kc(){for(;null!==Ns&&!Xe();)bc(Ns)}function bc(e){var t=Ss(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wc(e):Ns=t,Is.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Rs)))return void(Ns=n)}else{if(null!==(n=Xu(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Ls=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Ls&&(Ls=5)}function xc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Xs);if(0!==(6&As))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ds&&(Ns=Ds=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Dc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=As;As|=4,Is.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(v=h.firstChild);)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(v=h.nextSibling))break;d=(h=d).parentNode}h=v}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,y=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}p=ns,ns=!1}(e,n),ys(n,e),vr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Ye(),As=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Xs=e,Ys=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Hs,Hs=null,e;0!==(1&Ys)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Js?$s++:($s=0,Js=e):$s=0,zi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function _c(){if(null!==Xs){var e=bt(Ys),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Xs)var r=!1;else{if(e=Xs,Xs=null,Ys=0,0!==(6&As))throw Error(a(331));var i=As;for(As|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,v=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=v,Zu=d;break}Zu=v}}}var p=o.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Ec(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(As=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Sc(e,t,n){e=Oa(e,t=vu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Oa(t,e=pu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(130023424&Ps)===Ps&&500>$e()-zs?dc(e,0):Us|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Aa(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Dc(e,t){return We(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case S:u=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=o,e;case D:return(e=Pc(19,n,t,i)).elementType=D,e.lanes=o,e;case R:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case I:u=9;break e;case C:u=11;break e;case N:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Vc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Bc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Na(a),e}function zc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Ss=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Du(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Vu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Ni(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Na(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===N)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Du(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Nu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Nu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Vu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ku(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),qa(t,r,i),Ga(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[vi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[vi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[vi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,$e()),0===(6&As)&&(qs=$e()+500,zi()))}break;case 13:fc((function(){var t=Aa(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Aa(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,Ae=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ie,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[vi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,p(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,v=!1,p=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!p)if(null!==r(c))p=!0,R(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){p=!1,m&&(m=!1,g(T),T=-1),v=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,E=null,T=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function D(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(S=!1,E=null)}}else S=!1}if("function"===typeof k)_=function(){k(D)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,P=N.port2;N.port1.onmessage=D,_=function(){P.postMessage(null)}}else _=function(){y(D,0)};function R(e){E=e,S||(S=!0,_())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(T),T=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),p||v||(p=!0,R(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/ImageManager/",function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return z},SDK_VERSION:function(){return Ye},_DEFAULT_ENTRY_NAME:function(){return Fe},_addComponent:function(){return je},_addOrOverwriteComponent:function(){return ze},_apps:function(){return Ue},_clearComponents:function(){return He},_components:function(){return Be},_getProvider:function(){return Ke},_registerComponent:function(){return qe},_removeServiceInstance:function(){return Ge},deleteApp:function(){return et},getApp:function(){return Je},getApps:function(){return Ze},initializeApp:function(){return $e},onLog:function(){return rt},registerVersion:function(){return nt},setLogLevel:function(){return it}});var t=n(791),r=n(164);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=n.p+"static/media/github.6fa18895f6e6c7772cab7049f7e05f59.svg",s=n(184),c=function(){return(0,s.jsxs)("div",{children:[(0,s.jsxs)("header",{className:"header",children:[(0,s.jsx)("h1",{children:"Mahdi Vafaii"}),(0,s.jsx)("a",{className:"github-link",href:"https://github.com/flamma19/ImageManager",children:(0,s.jsx)("img",{src:u,alt:"github-mark",className:"github-logo"})})]}),(0,s.jsx)("div",{className:"title",children:(0,s.jsx)("h2",{children:"A simple Image Gallery!"})})]})};function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}function h(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function S(e){var t=_();return function(){var n,r=x(e);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}(this,n)}}function E(e,t,n){return E=_()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&b(i,n.prototype),i},E.apply(null,arguments)}function T(e){var t="function"===typeof Map?new Map:void 0;return T=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return E(e,arguments,x(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),b(n,e)},T(e)}var I=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(I(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new A;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},A=function(e){w(n,e);var t=S(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return y(n)}(T(Error)),D=function(e){return function(e){var t=I(e);return C.encodeByteArray(t,!0)}(e).replace(/\./g,"")},N=function(e){try{return C.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function P(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&R(n)&&(e[n]=P(e[n],t[n]));return e}function R(e){return"__proto__"!==e}var O=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},L=function(){try{return O()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/ImageManager",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&N(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},M=function(){var e;return null===(e=L())||void 0===e?void 0:e.config},F=function(){function e(){var t=this;p(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function V(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[D(JSON.stringify({alg:"none",type:"JWT"})),D(JSON.stringify(a)),""].join(".")}function U(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function B(){var e,t=null===(e=L())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function j(){try{return"object"===typeof indexedDB}catch(e){return!1}}var z=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(k(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(k(a),q.prototype.create),a}return y(n)}(T(Error)),q=function(){function e(t,n,r){p(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(K,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new z(n,a,t)}}]),e}();var K=/\{\$([^}]+)}/g;function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function H(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(W(u)&&W(s)){if(!H(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function W(e){return null!==e&&"object"===typeof e}function Q(e,t){var n=new X(e,t);return n.subscribe.bind(n)}var X=function(){function e(t,n){var r=this;p(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=g(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Y),void 0===r.error&&(r.error=Y),void 0===r.complete&&(r.complete=Y);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Y(){}function $(e){return e&&e._delegate?e._delegate:e}function J(){J=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var h={};function d(){}function v(){}function p(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(I([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=p.prototype=d.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=f(e[r],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==l(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=p,r(k,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:v,configurable:!0}),v.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function Z(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function te(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ee(a,r,i,o,u,"next",e)}function u(e){ee(a,r,i,o,u,"throw",e)}o(void 0)}))}}var ne=function(){function e(t,n,r){p(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),re="[DEFAULT]",ie=function(){function e(t,n){p(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new F;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:re})}catch(c){}var t,n=g(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=o(t.value,2),i=r[0],a=r[1],u=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:u});a.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Z(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Z(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),u=g(this.instancesDeferred.entries());try{for(u.s();!(i=u.n()).done;){var s=o(i.value,2),c=s[0],l=s[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(f){u.e(f)}finally{u.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(cm){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===re?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(cm){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return this.component?this.component.multipleInstances?e:re:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ae,oe,ue=function(){function e(t){p(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ie(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),se=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(oe||(oe={}));var ce={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},le=oe.INFO,fe=(h(ae={},oe.DEBUG,"log"),h(ae,oe.VERBOSE,"log"),h(ae,oe.INFO,"info"),h(ae,oe.WARN,"warn"),h(ae,oe.ERROR,"error"),ae),he=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=fe[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},de=function(){function e(t){p(this,e),this.name=t,this._logLevel=le,this._logHandler=he,this._userLogHandler=null,se.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in oe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ce[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.DEBUG].concat(t)),this._logHandler.apply(this,[this,oe.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.VERBOSE].concat(t)),this._logHandler.apply(this,[this,oe.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.INFO].concat(t)),this._logHandler.apply(this,[this,oe.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.WARN].concat(t)),this._logHandler.apply(this,[this,oe.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.ERROR].concat(t)),this._logHandler.apply(this,[this,oe.ERROR].concat(t))}}]),e}();var ve,pe,me=function(e,t){return t.some((function(t){return e instanceof t}))};var ye=new WeakMap,ge=new WeakMap,ke=new WeakMap,be=new WeakMap,we=new WeakMap;var xe={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ge.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ke.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ee(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function _e(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Te(this),n),Ee(ye.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(e.apply(Te(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Te(this),t].concat(r));return ke.set(a,t.sort?t.sort():[t]),Ee(a)}}function Se(e){return"function"===typeof e?_e(e):(e instanceof IDBTransaction&&function(e){if(!ge.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ge.set(e,t)}}(e),me(e,ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,xe):e)}function Ee(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ee(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&ye.set(t,e)})).catch((function(){})),we.set(t,e),t}(e);if(be.has(e))return be.get(e);var t=Se(e);return t!==e&&(be.set(e,t),we.set(t,e)),t}var Te=function(e){return we.get(e)};var Ie,Ce,Ae=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Ne=new Map;function Pe(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ne.get(t))return Ne.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=De.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ae.includes(n))){var a=function(){var e=te(J().mark((function e(t){var a,o,u,s,c,l,f=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ne.set(t,a),a}}}xe=function(e){return v(v({},e),{},{get:function(t,n,r){return Pe(t,n)||e.get(t,n,r)},has:function(t,n){return!!Pe(t,n)||e.has(t,n)}})}(xe);var Re=function(){function e(t){p(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Oe="@firebase/app",Le="0.9.9",Me=new de("@firebase/app"),Fe="[DEFAULT]",Ve=(h(Ie={},Oe,"fire-core"),h(Ie,"@firebase/app-compat","fire-core-compat"),h(Ie,"@firebase/analytics","fire-analytics"),h(Ie,"@firebase/analytics-compat","fire-analytics-compat"),h(Ie,"@firebase/app-check","fire-app-check"),h(Ie,"@firebase/app-check-compat","fire-app-check-compat"),h(Ie,"@firebase/auth","fire-auth"),h(Ie,"@firebase/auth-compat","fire-auth-compat"),h(Ie,"@firebase/database","fire-rtdb"),h(Ie,"@firebase/database-compat","fire-rtdb-compat"),h(Ie,"@firebase/functions","fire-fn"),h(Ie,"@firebase/functions-compat","fire-fn-compat"),h(Ie,"@firebase/installations","fire-iid"),h(Ie,"@firebase/installations-compat","fire-iid-compat"),h(Ie,"@firebase/messaging","fire-fcm"),h(Ie,"@firebase/messaging-compat","fire-fcm-compat"),h(Ie,"@firebase/performance","fire-perf"),h(Ie,"@firebase/performance-compat","fire-perf-compat"),h(Ie,"@firebase/remote-config","fire-rc"),h(Ie,"@firebase/remote-config-compat","fire-rc-compat"),h(Ie,"@firebase/storage","fire-gcs"),h(Ie,"@firebase/storage-compat","fire-gcs-compat"),h(Ie,"@firebase/firestore","fire-fst"),h(Ie,"@firebase/firestore-compat","fire-fst-compat"),h(Ie,"fire-js","fire-js"),h(Ie,"firebase","fire-js-all"),Ie),Ue=new Map,Be=new Map;function je(e,t){try{e.container.addComponent(t)}catch(n){Me.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ze(e,t){e.container.addOrOverwriteComponent(t)}function qe(e){var t=e.name;if(Be.has(t))return Me.debug("There were multiple attempts to register component ".concat(t,".")),!1;Be.set(t,e);var n,r=g(Ue.values());try{for(r.s();!(n=r.n()).done;){je(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ke(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fe;Ke(e,t).clearInstance(n)}function He(){Be.clear()}var We=(h(Ce={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(Ce,"bad-app-name","Illegal App name: '{$appName}"),h(Ce,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),h(Ce,"app-deleted","Firebase App named '{$appName}' already deleted"),h(Ce,"no-options","Need to provide options, when not being deployed to hosting via source."),h(Ce,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),h(Ce,"invalid-log-argument","First argument to `onLog` must be null or a function."),h(Ce,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),h(Ce,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),h(Ce,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),h(Ce,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ce),Qe=new q("app","Firebase",We),Xe=function(){function e(t,n,r){var i=this;p(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ne("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Qe.create("app-deleted",{appName:this._name})}}]),e}(),Ye="9.21.0";function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Fe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Qe.create("bad-app-name",{appName:String(i)});if(n||(n=M()),!n)throw Qe.create("no-options");var a=Ue.get(i);if(a){if(H(n,a.options)&&H(r,a.config))return a;throw Qe.create("duplicate-app",{appName:i})}var o,u=new ue(i),s=g(Be.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Xe(n,r,u);return Ue.set(i,l),l}function Je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=Ue.get(e);if(!t&&e===Fe)return $e();if(!t)throw Qe.create("no-app",{appName:e});return t}function Ze(){return Array.from(Ue.values())}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Ue.has(n)){e.next=6;break}return Ue.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e,t,n){var r,i=null!==(r=Ve[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Me.warn(u.join(" "))}qe(new ne("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function rt(e,t){if(null!==e&&"function"!==typeof e)throw Qe.create("invalid-log-argument");!function(e,t){var n,r=g(se);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ce[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:oe[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function it(e){var t;t=e,se.forEach((function(e){e.setLogLevel(t)}))}var at="firebase-heartbeat-database",ot=1,ut="firebase-heartbeat-store",st=null;function ct(){return st||(st=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Ee(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Ee(u.result),e.oldVersion,e.newVersion,Ee(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(at,ot,{upgrade:function(e,t){if(0===t)e.createObjectStore(ut)}}).catch((function(e){throw Qe.create("idb-open",{originalErrorMessage:e.message})}))),st}function lt(e){return ft.apply(this,arguments)}function ft(){return ft=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct();case 3:return n=e.sent,e.abrupt("return",n.transaction(ut).objectStore(ut).get(vt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof z?Me.warn(e.t0.message):(r=Qe.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Me.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ft.apply(this,arguments)}function ht(e,t){return dt.apply(this,arguments)}function dt(){return dt=te(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct();case 3:return r=e.sent,i=r.transaction(ut,"readwrite"),a=i.objectStore(ut),e.next=8,a.put(n,vt(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof z?Me.warn(e.t0.message):(o=Qe.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Me.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),dt.apply(this,arguments)}function vt(e){return"".concat(e.name,"!").concat(e.options.appId)}var pt=function(){function e(t){var n=this;p(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new bt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=te(J().mark((function e(){var t,n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=mt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=te(J().mark((function e(){var t,n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=mt(),n=yt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=D(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function mt(){return(new Date).toISOString().substring(0,10)}function yt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=g(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),wt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),wt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var gt,kt,bt=function(){function e(t){p(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,lt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ht(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",ht(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Z(r.heartbeats),Z(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function wt(e){return D(JSON.stringify({version:2,heartbeats:e})).length}gt="",qe(new ne("platform-logger",(function(e){return new Re(e)}),"PRIVATE")),qe(new ne("heartbeat",(function(e){return new pt(e)}),"PRIVATE")),nt(Oe,Le,gt),nt(Oe,Le,"esm2017"),nt("fire-js","");var xt=function(){function e(t,n){var r=this;p(this,e),this._delegate=t,this.firebase=n,je(t,new ne("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),et(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fe;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fe;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){je(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){ze(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),_t=(h(kt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),h(kt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),kt),St=new q("app-compat","Firebase",_t);var Et=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=$e(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(G(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:nt,setLogLevel:it,onLog:rt,apps:null,SDK_VERSION:Ye,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(qe(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw St.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&P(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!G(n,e=e||Fe))throw St.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(xt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){P(n,e)},createSubscribe:Q,ErrorFactory:q,deepExtend:P}),n}(),Tt=new de("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Tt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var It=self.firebase.SDK_VERSION;It&&It.indexOf("LITE")>=0&&Tt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ct=Et;!function(e){nt("@firebase/app-compat","0.2.9",e)}();function At(){return At="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},At.apply(this,arguments)}Ct.registerVersion("firebase","9.21.0","app-compat");var Dt,Nt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Pt={},Rt=Rt||{},Ot=Nt||self;function Lt(){}function Mt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ft(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Vt="closure_uid_"+(1e9*Math.random()>>>0),Ut=0;function Bt(e,t,n){return e.call.apply(e.bind,arguments)}function jt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function zt(e,t,n){return(zt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bt:jt).apply(null,arguments)}function qt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Kt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Gt(){this.s=this.s,this.o=this.o}Gt.prototype.s=!1,Gt.prototype.ra=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Vt)&&e[Vt]||(e[Vt]=++Ut))},Gt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ht=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Wt(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Qt(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Mt(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Xt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Xt.prototype.h=function(){this.defaultPrevented=!0};var Yt=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ot.addEventListener("test",Lt,t),Ot.removeEventListener("test",Lt,t)}catch(n){}return e}();function $t(e){return/^[\s\xa0]*$/.test(e)}var Jt=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Zt(e,t){return e<t?-1:e>t?1:0}function en(){var e=Ot.navigator;return e&&(e=e.userAgent)?e:""}function tn(e){return-1!=en().indexOf(e)}function nn(e){return nn[" "](e),e}function rn(e,t,n){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}nn[" "]=Lt;var an,on=tn("Opera"),un=tn("Trident")||tn("MSIE"),sn=tn("Edge"),cn=sn||un,ln=tn("Gecko")&&!(-1!=en().toLowerCase().indexOf("webkit")&&!tn("Edge"))&&!(tn("Trident")||tn("MSIE"))&&!tn("Edge"),fn=-1!=en().toLowerCase().indexOf("webkit")&&!tn("Edge");function hn(){var e=Ot.document;return e?e.documentMode:void 0}e:{var dn="",vn=function(){var e=en();return ln?/rv:([^\);]+)(\)|;)/.exec(e):sn?/Edge\/([\d\.]+)/.exec(e):un?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):fn?/WebKit\/(\S+)/.exec(e):on?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(vn&&(dn=vn?vn[1]:""),un){var pn=hn();if(null!=pn&&pn>parseFloat(dn)){an=String(pn);break e}}an=dn}var mn,yn={};if(Ot.document&&un){var gn=hn();mn=gn||(parseInt(an,10)||void 0)}else mn=void 0;var kn=mn;function bn(e,t){if(Xt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ln){e:{try{nn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:wn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&bn.$.h.call(this)}}Kt(bn,Xt);var wn={2:"touch",3:"pen",4:"mouse"};bn.prototype.h=function(){bn.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var xn="closure_listenable_"+(1e6*Math.random()|0),_n=0;function Sn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++_n,this.fa=this.ia=!1}function En(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Tn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function In(e){var t={};for(var n in e)t[n]=e[n];return t}var Cn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function An(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Cn.length;a++)n=Cn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Dn(e){this.src=e,this.g={},this.h=0}function Nn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Ht(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(En(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Pn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Dn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Pn(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Sn(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Rn="closure_lm_"+(1e6*Math.random()|0),On={};function Ln(e,t,n,r,i){if(r&&r.once)return Fn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ln(e,t[a],n,r,i);return null}return n=Kn(n),e&&e[xn]?e.O(t,n,Ft(r)?!!r.capture:!!r,i):Mn(e,t,n,!1,r,i)}function Mn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Ft(i)?!!i.capture:!!i,u=zn(e);if(u||(e[Rn]=u=new Dn(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=jn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Yt||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Bn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Fn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Fn(e,t[a],n,r,i);return null}return n=Kn(n),e&&e[xn]?e.P(t,n,Ft(r)?!!r.capture:!!r,i):Mn(e,t,n,!0,r,i)}function Vn(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Vn(e,t[a],n,r,i);else r=Ft(r)?!!r.capture:!!r,n=Kn(n),e&&e[xn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Pn(a=e.g[t],n,r,i))&&(En(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=zn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Pn(t,n,r,i)),(n=-1<e?t[e]:null)&&Un(n))}function Un(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[xn])Nn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Bn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=zn(t))?(Nn(n,e),0==n.h&&(n.src=null,t[Rn]=null)):En(e)}}}function Bn(e){return e in On?On[e]:On[e]="on"+e}function jn(e,t){if(e.fa)e=!0;else{t=new bn(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Un(e),e=n.call(r,t)}return e}function zn(e){return(e=e[Rn])instanceof Dn?e:null}var qn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kn(e){return"function"===typeof e?e:(e[qn]||(e[qn]=function(t){return e.handleEvent(t)}),e[qn])}function Gn(){Gt.call(this),this.i=new Dn(this),this.S=this,this.J=null}function Hn(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Xt(t,e);else if(t instanceof Xt)t.target=t.target||e;else{var i=t;An(t=new Xt(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Wn(o,r,!0,t)&&i}if(i=Wn(o=t.g=e,r,!0,t)&&i,i=Wn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Wn(o=t.g=n[a],r,!1,t)&&i}function Wn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Nn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Kt(Gn,Gt),Gn.prototype[xn]=!0,Gn.prototype.removeEventListener=function(e,t,n,r){Vn(this,e,t,n,r)},Gn.prototype.N=function(){if(Gn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)En(n[r]);delete t.g[e],t.h--}}this.J=null},Gn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Gn.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Qn=Ot.JSON.stringify;function Xn(){var e=rr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Yn,$n=function(){function e(){p(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=Jn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Jn=new(function(){function e(t,n){p(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Zn}),(function(e){return e.reset()})),Zn=function(){function e(){p(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function er(e){Ot.setTimeout((function(){throw e}),0)}function tr(e,t){Yn||function(){var e=Ot.Promise.resolve(void 0);Yn=function(){e.then(ir)}}(),nr||(Yn(),nr=!0),rr.add(e,t)}var nr=!1,rr=new $n;function ir(){for(var e;e=Xn();){try{e.h.call(e.g)}catch(n){er(n)}var t=Jn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}nr=!1}function ar(e,t){Gn.call(this),this.h=e||1,this.g=t||Ot,this.j=zt(this.qb,this),this.l=Date.now()}function or(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ur(e,t,n){if("function"===typeof e)n&&(e=zt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=zt(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ot.setTimeout(e,t||0)}function sr(e){e.g=ur((function(){e.g=null,e.i&&(e.i=!1,sr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Kt(ar,Gn),(Dt=ar.prototype).ga=!1,Dt.T=null,Dt.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Hn(this,"tick"),this.ga&&(or(this),this.start()))}},Dt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dt.N=function(){ar.$.N.call(this),or(this),delete this.g};var cr=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:sr(this)}},{key:"N",value:function(){At(x(n.prototype),"N",this).call(this),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Gt);function lr(e){Gt.call(this),this.h=e,this.g={}}Kt(lr,Gt);var fr=[];function hr(e,t,n,r){Array.isArray(n)||(n&&(fr[0]=n.toString()),n=fr);for(var i=0;i<n.length;i++){var a=Ln(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function dr(e){Tn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Un(e)}),e),e.g={}}function vr(){this.g=!0}function pr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Qn(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}lr.prototype.N=function(){lr.$.N.call(this),dr(this)},lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vr.prototype.Ea=function(){this.g=!1},vr.prototype.info=function(){};var mr={},yr=null;function gr(){return yr=yr||new Gn}function kr(e){Xt.call(this,mr.Ta,e)}function br(e){var t=gr();Hn(t,new kr(t))}function wr(e,t){Xt.call(this,mr.STAT_EVENT,e),this.stat=t}function xr(e){var t=gr();Hn(t,new wr(t,e))}function _r(e,t){Xt.call(this,mr.Ua,e),this.size=t}function Sr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ot.setTimeout((function(){e()}),t)}mr.Ta="serverreachability",Kt(kr,Xt),mr.STAT_EVENT="statevent",Kt(wr,Xt),mr.Ua="timingevent",Kt(_r,Xt);var Er={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Tr={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ir(){}function Cr(e){return e.h||(e.h=e.i())}function Ar(){}Ir.prototype.h=null;var Dr,Nr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Pr(){Xt.call(this,"d")}function Rr(){Xt.call(this,"c")}function Or(){}function Lr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new lr(this),this.P=Fr,e=cn?125:void 0,this.V=new ar(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Mr}function Mr(){this.i=null,this.g="",this.h=!1}Kt(Pr,Xt),Kt(Rr,Xt),Kt(Or,Ir),Or.prototype.g=function(){return new XMLHttpRequest},Or.prototype.i=function(){return{}},Dr=new Or;var Fr=45e3,Vr={},Ur={};function Br(e,t,n){e.L=1,e.v=ai(ei(t)),e.s=n,e.S=!0,jr(e,null)}function jr(e,t){e.G=Date.now(),Gr(e),e.A=ei(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),gi(n.i,"t",r),e.C=0,n=e.l.I,e.h=new Mr,e.g=ka(e.l,n?t:null,!e.s),0<e.O&&(e.M=new cr(zt(e.Pa,e,e.g),e.O)),hr(e.U,e.g,"readystatechange",e.nb),t=e.I?In(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),br(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function zr(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function qr(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Kr(e,n))==Ur){4==t&&(e.o=4,xr(14),i=!1),pr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Vr){e.o=4,xr(15),pr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}pr(e.j,e.m,r,null),Yr(e,r)}zr(e)&&r!=Ur&&r!=Vr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,xr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ca&&(e.ca=!0,(t=e.l).g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),fa(t),t.L=!0,xr(11))):(pr(e.j,e.m,n,"[Invalid Chunked Response]"),Xr(e),Qr(e))}function Kr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ur:(n=Number(t.substring(n,r)),isNaN(n)?Vr:(r+=1)+n>t.length?Ur:(t=t.substr(r,n),e.C=r+n,t))}function Gr(e){e.Y=Date.now()+e.P,Hr(e,e.P)}function Hr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Sr(zt(e.lb,e),t)}function Wr(e){e.B&&(Ot.clearTimeout(e.B),e.B=null)}function Qr(e){0==e.l.H||e.J||va(e.l,e)}function Xr(e){Wr(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,or(e.V),dr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function Yr(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Ti(n.h,e)))if(!e.K&&Ti(n.h,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;da(n),ra(n)}la(n),xr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.M&&0==n.A&&!n.v&&(n.v=Sr(zt(n.ib,n),6e3));if(1>=Ei(n.h)&&n.na){try{n.na()}catch(a){}n.na=void 0}}else ma(n,11)}else if((e.K||n.g==e)&&da(n),!$t(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.J=a[1],n.oa=a[2];var o=a[3];null!=o&&(n.qa=o,n.j.info("VER="+n.qa));var u=a[4];null!=u&&(n.Ga=u,n.j.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Ii(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,ii(r.G,r.F,h))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-e.G,n.j.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=ga(r,r.I?r.oa:null,r.Y),d.K){Ci(r.h,d);var v=d,p=r.K;p&&v.setTimeout(p),v.B&&(Wr(v),Gr(v)),r.g=d}else ca(r);0<n.i.length&&aa(n)}else"stop"!=a[0]&&"close"!=a[0]||ma(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ma(n,7):na(n):"noop"!=a[0]&&n.l&&n.l.Aa(a),n.A=0)}br()}catch(a){}}function $r(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Mt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Mt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Mt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Dt=Lr.prototype).setTimeout=function(e){this.P=e},Dt.nb=function(e){e=e.target;var t=this.M;t&&3==Yi(e)?t.l():this.Pa(e)},Dt.Pa=function(e){try{if(e==this.g)e:{var t=Yi(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||cn||this.g&&(this.h.h||this.g.ja()||$i(this.g)))){this.J||4!=t||7==n||br(),Wr(this);var r=this.g.da();this.aa=r;t:if(zr(this)){var i=$i(this.g);e="";var a=i.length,o=4==Yi(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Xr(this),Qr(this);var u="";break t}this.h.i=new Ot.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.ba&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$t(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,xr(12),Xr(this),Qr(this);break e}pr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yr(this,r)}this.S?(qr(this,t,u),cn&&this.i&&3==t&&(hr(this.U,this.V,"tick",this.mb),this.V.start())):(pr(this.j,this.m,u,null),Yr(this,u)),4==t&&Xr(this),this.i&&!this.J&&(4==t?va(this.l,this):(this.i=!1,Gr(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,xr(12)):(this.o=0,xr(13)),Xr(this),Qr(this)}}}catch(t){}},Dt.mb=function(){if(this.g){var e=Yi(this.g),t=this.g.ja();this.C<t.length&&(Wr(this),qr(this,e,t),this.i&&4!=e&&Gr(this))}},Dt.cancel=function(){this.J=!0,Xr(this)},Dt.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(br(),xr(17)),Xr(this),this.o=2,Qr(this)):Hr(this,this.Y-e)};var Jr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zr(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Zr){this.h=void 0!==t?t:e.h,ti(this,e.j),this.s=e.s,this.g=e.g,ni(this,e.m),this.l=e.l,t=e.i;var n=new vi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ri(this,n),this.o=e.o}else e&&(n=String(e).match(Jr))?(this.h=!!t,ti(this,n[1]||"",!0),this.s=oi(n[2]||""),this.g=oi(n[3]||"",!0),ni(this,n[4]),this.l=oi(n[5]||"",!0),ri(this,n[6]||"",!0),this.o=oi(n[7]||"")):(this.h=!!t,this.i=new vi(null,this.h))}function ei(e){return new Zr(e)}function ti(e,t,n){e.j=n?oi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ni(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ri(e,t,n){t instanceof vi?(e.i=t,function(e,t){t&&!e.j&&(pi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(mi(this,t),gi(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ui(t,hi)),e.i=new vi(t,e.h))}function ii(e,t,n){e.i.set(t,n)}function ai(e){return ii(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function oi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ui(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,si),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function si(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Zr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ui(t,ci,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ui(t,ci,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ui(n,"/"==n.charAt(0)?fi:li,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ui(n,di)),e.join("")};var ci=/[#\/\?@]/g,li=/[#\?:]/g,fi=/[#\?]/g,hi=/[#\?@]/g,di=/#/g;function vi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function pi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function mi(e,t){pi(e),t=ki(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yi(e,t){return pi(e),t=ki(e,t),e.g.has(t)}function gi(e,t,n){mi(e,t),0<n.length&&(e.i=null,e.g.set(ki(e,t),Wt(n)),e.h+=n.length)}function ki(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Dt=vi.prototype).add=function(e,t){pi(this),this.i=null,e=ki(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Dt.forEach=function(e,t){pi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Dt.sa=function(){pi(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Dt.Z=function(e){pi(this);var t=[];if("string"===typeof e)yi(this,e)&&(t=t.concat(this.g.get(ki(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Dt.set=function(e,t){return pi(this),this.i=null,yi(this,e=ki(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Dt.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var bi=y((function e(t,n){p(this,e),this.h=t,this.g=n}));function wi(e){this.l=e||_i,Ot.PerformanceNavigationTiming?e=0<(e=Ot.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ot.g&&Ot.g.Ka&&Ot.g.Ka()&&Ot.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var xi,_i=10;function Si(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ei(e){return e.h?1:e.g?e.g.size:0}function Ti(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ii(e,t){e.g?e.g.add(t):e.h=t}function Ci(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ai(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=g(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Wt(e.i)}function Di(){}function Ni(){this.g=new Di}function Pi(e,t,n){var r=n||"";try{$r(e,(function(e,n){var i=e;Ft(e)&&(i=Qn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ri(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Oi(e){this.l=e.fc||null,this.j=e.ob||!1}function Li(e,t){Gn.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Mi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wi.prototype.cancel=function(){if(this.i=Ai(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=g(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Di.prototype.stringify=function(e){return Ot.JSON.stringify(e,void 0)},Di.prototype.parse=function(e){return Ot.JSON.parse(e,void 0)},Kt(Oi,Ir),Oi.prototype.g=function(){return new Li(this.l,this.j)},Oi.prototype.i=(xi={},function(){return xi}),Kt(Li,Gn);var Mi=0;function Fi(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Vi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ui(e)}function Ui(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Dt=Li.prototype).open=function(e,t){if(this.readyState!=Mi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ui(this)},Dt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Ot).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vi(this)),this.readyState=Mi},Dt.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ui(this)),this.g&&(this.readyState=3,Ui(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Ot.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fi(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Dt.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Vi(this):Ui(this),3==this.readyState&&Fi(this)}},Dt.Za=function(e){this.g&&(this.response=this.responseText=e,Vi(this))},Dt.Ya=function(e){this.g&&(this.response=e,Vi(this))},Dt.ka=function(){this.g&&Vi(this)},Dt.setRequestHeader=function(e,t){this.v.append(e,t)},Dt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Dt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Li.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Bi=Ot.JSON.parse;function ji(e){Gn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=zi,this.L=this.M=!1}Kt(ji,Gn);var zi="",qi=/^https?$/i,Ki=["POST","PUT"];function Gi(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Hi(e),Qi(e)}function Hi(e){e.F||(e.F=!0,Hn(e,"complete"),Hn(e,"error"))}function Wi(e){if(e.h&&"undefined"!=typeof Rt&&(!e.C[1]||4!=Yi(e)||2!=e.da()))if(e.v&&4==Yi(e))ur(e.La,0,e);else if(Hn(e,"readystatechange"),4==Yi(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Jr)[1]||null;if(!a&&Ot.self&&Ot.self.location){var o=Ot.self.location.protocol;a=o.substr(0,o.length-1)}i=!qi.test(a?a.toLowerCase():"")}t=i}if(t)Hn(e,"complete"),Hn(e,"success");else{e.m=6;try{var u=2<Yi(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.da()+"]",Hi(e)}}finally{Qi(e)}}}function Qi(e,t){if(e.g){Xi(e);var n=e.g,r=e.C[0]?Lt:null;e.g=null,e.C=null,t||Hn(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Xi(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Ot.clearTimeout(e.A),e.A=null)}function Yi(e){return e.g?e.g.readyState:0}function $i(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case zi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(no){return null}}function Ji(e){var t="";return Tn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Zi(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ji(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ii(e,t,n))}function ea(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ta(e){this.Ga=0,this.i=[],this.j=new vr,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ea("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ea("baseRetryDelayMs",5e3,e),this.hb=ea("retryDelaySeedMs",1e4,e),this.eb=ea("forwardChannelMaxRetries",2,e),this.xa=ea("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new wi(e&&e.concurrentRequestLimit),this.Ja=new Ni,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function na(e){if(ia(e),3==e.H){var t=e.W++,n=ei(e.G);ii(n,"SID",e.J),ii(n,"RID",t),ii(n,"TYPE","terminate"),ua(e,n),(t=new Lr(e,e.j,t,void 0)).L=2,t.v=ai(ei(n)),n=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(n=Ot.navigator.sendBeacon(t.v.toString(),"")),!n&&Ot.Image&&((new Image).src=t.v,n=!0),n||(t.g=ka(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Gr(t)}ya(e)}function ra(e){e.g&&(fa(e),e.g.cancel(),e.g=null)}function ia(e){ra(e),e.u&&(Ot.clearTimeout(e.u),e.u=null),da(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Ot.clearTimeout(e.m),e.m=null)}function aa(e){Si(e.h)||e.m||(e.m=!0,tr(e.Na,e),e.C=0)}function oa(e,t){var n;n=t?t.m:e.W++;var r=ei(e.G);ii(r,"SID",e.J),ii(r,"RID",n),ii(r,"AID",e.V),ua(e,r),e.o&&e.s&&Zi(r,e.o,e.s),n=new Lr(e,e.j,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.i=t.F.concat(e.i)),t=sa(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ii(e.h,n),Br(n,r,t)}function ua(e,t){e.ma&&Tn(e.ma,(function(e,n){ii(t,n,e)})),e.l&&$r({},(function(e,n){ii(t,n,e)}))}function sa(e,t,n){n=Math.min(e.i.length,n);var r=e.l?zt(e.l.Va,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Pi(l,o,"req"+c+"_")}catch(vo){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.F=e,r}function ca(e){e.g||e.u||(e.ba=1,tr(e.Ma,e),e.A=0)}function la(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Sr(zt(e.Ma,e),pa(e,e.A)),e.A++,!0)}function fa(e){null!=e.B&&(Ot.clearTimeout(e.B),e.B=null)}function ha(e){e.g=new Lr(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ei(e.wa);ii(t,"RID","rpc"),ii(t,"SID",e.J),ii(t,"CI",e.M?"0":"1"),ii(t,"AID",e.V),ii(t,"TYPE","xmlhttp"),ua(e,t),e.o&&e.s&&Zi(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.oa,n.L=1,n.v=ai(ei(t)),n.s=null,n.S=!0,jr(n,e)}function da(e){null!=e.v&&(Ot.clearTimeout(e.v),e.v=null)}function va(e,t){var n=null;if(e.g==t){da(e),fa(e),e.g=null;var r=2}else{if(!Ti(e.h,t))return;n=t.F,Ci(e.h,t),r=1}if(0!=e.H)if(e.ta=t.aa,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Hn(r=gr(),new _r(r,n)),aa(e)}else ca(e);else if(3==(i=t.o)||0==i&&0<e.ta||!(1==r&&function(e,t){return!(Ei(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.F.concat(e.i),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Sr(zt(e.Na,e,t),pa(e,e.C)),e.C++,!0))}(e,t)||2==r&&la(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:ma(e,5);break;case 4:ma(e,10);break;case 3:ma(e,6);break;default:ma(e,2)}}function pa(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.l||(n*=2),n*t}function ma(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=zt(e.pb,e);n||(n=new Zr("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||ti(n,"https"),ai(n)),function(e,t){var n=new vr;if(Ot.Image){var r=new Image;r.onload=qt(Ri,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qt(Ri,n,r,"TestLoadImage: error",!1,t),r.onabort=qt(Ri,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qt(Ri,n,r,"TestLoadImage: timeout",!1,t),Ot.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else xr(2);e.H=0,e.l&&e.l.za(t),ya(e),ia(e)}function ya(e){if(e.H=0,e.pa=[],e.l){var t=Ai(e.h);0==t.length&&0==e.i.length||(Qt(e.pa,t),Qt(e.pa,e.i),e.h.i.length=0,Wt(e.i),e.i.length=0),e.l.ya()}}function ga(e,t,n){var r=n instanceof Zr?ei(n):new Zr(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),ni(r,r.m);else{var i=Ot.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Zr(null,void 0);r&&ti(a,r),t&&(a.g=t),i&&ni(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&ii(r,n,t),ii(r,"VER",e.qa),ua(e,r),r}function ka(e,t,n){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new ji(new Oi({ob:!0})):new ji(e.va)).Oa(e.I),t}function ba(){}function wa(){if(un&&!(10<=Number(kn)))throw Error("Environmental error: no available transport.")}function xa(e,t){Gn.call(this),this.g=new ta(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!$t(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!$t(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ea(this)}function _a(e){Pr.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Sa(){Rr.call(this),this.status=1}function Ea(e){this.g=e}function Ta(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ia(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Ca(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Dt=ji.prototype).Oa=function(e){this.M=e},Dt.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Dr.g(),this.C=this.u?Cr(this.u):Cr(Dr),this.g.onreadystatechange=zt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Gi(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,u=g(r.keys());try{for(u.s();!(a=u.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(v){u.e(v)}finally{u.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Ot.FormData&&e instanceof Ot.FormData,!(0<=Ht(Ki,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=g(n);try{for(l.s();!(c=l.n()).done;){var f=o(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(v){l.e(v)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Xi(this),0<this.B&&((this.L=function(e){return un&&rn(yn,9,(function(){for(var e=0,t=Jt(String(an)).split("."),n=Jt("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Zt(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Zt(0==a[2].length,0==o[2].length)||Zt(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zt(this.ua,this)):this.A=ur(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Gi(this,s)}},Dt.ua=function(){"undefined"!=typeof Rt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hn(this,"timeout"),this.abort(8))},Dt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Hn(this,"complete"),Hn(this,"abort"),Qi(this))},Dt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Qi(this,!0)),ji.$.N.call(this)},Dt.La=function(){this.s||(this.G||this.v||this.l?Wi(this):this.kb())},Dt.kb=function(){Wi(this)},Dt.da=function(){try{return 2<Yi(this)?this.g.status:-1}catch(xi){return-1}},Dt.ja=function(){try{return this.g?this.g.responseText:""}catch(xi){return""}},Dt.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Bi(t)}},Dt.Ia=function(){return this.m},Dt.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Dt=ta.prototype).qa=8,Dt.H=1,Dt.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Lr(this,this.j,e,void 0),n=this.s;if(this.U&&(n?An(n=In(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=sa(this,t,r),ii(i=ei(this.G),"RID",e),ii(i,"CVER",22),this.F&&ii(i,"X-HTTP-Session-Id",this.F),ua(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Ji(n)))+"&"+r:this.o&&Zi(i,this.o,n)),Ii(this.h,t),this.bb&&ii(i,"TYPE","init"),this.P?(ii(i,"$req",r),ii(i,"SID","null"),t.ba=!0,Br(t,i,null)):Br(t,i,r),this.H=2}}else 3==this.H&&(e?oa(this,e):0==this.i.length||Si(this.h)||oa(this))},Dt.Ma=function(){if(this.u=null,ha(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=Sr(zt(this.jb,this),e)}},Dt.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,xr(10),ra(this),ha(this))},Dt.ib=function(){null!=this.v&&(this.v=null,ra(this),la(this),xr(19))},Dt.pb=function(e){e?(this.j.info("Successfully pinged google.com"),xr(2)):(this.j.info("Failed to ping google.com"),xr(1))},(Dt=ba.prototype).Ba=function(){},Dt.Aa=function(){},Dt.za=function(){},Dt.ya=function(){},Dt.Va=function(){},wa.prototype.g=function(e,t){return new xa(e,t)},Kt(xa,Gn),xa.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,n=this.h||void 0;xr(0),e.Y=t,e.ma=n||{},e.M=e.aa,e.G=ga(e,null,e.Y),aa(e)},xa.prototype.close=function(){na(this.g)},xa.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Qn(e),e=n);t.i.push(new bi(t.fb++,e)),3==t.H&&aa(t)},xa.prototype.N=function(){this.g.l=null,delete this.j,na(this.g),delete this.g,xa.$.N.call(this)},Kt(_a,Pr),Kt(Sa,Rr),Kt(Ea,ba),Ea.prototype.Ba=function(){Hn(this.g,"a")},Ea.prototype.Aa=function(e){Hn(this.g,new _a(e))},Ea.prototype.za=function(e){Hn(this.g,new Sa)},Ea.prototype.ya=function(){Hn(this.g,"b")},Kt(Ta,(function(){this.blockSize=-1})),Ta.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ta.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Ia(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Ia(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Ia(this,r),i=0;break}}this.h=i,this.i+=t},Ta.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Aa={};function Da(e){return-128<=e&&128>e?rn(Aa,e,(function(e){return new Ca([0|e],0>e?-1:0)})):new Ca([0|e],0>e?-1:0)}function Na(e){if(isNaN(e)||!isFinite(e))return Ra;if(0>e)return Va(Na(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Pa;return new Ca(t,0)}var Pa=4294967296,Ra=Da(0),Oa=Da(1),La=Da(16777216);function Ma(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Fa(e){return-1==e.h}function Va(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ca(n,~e.h).add(Oa)}function Ua(e,t){return e.add(Va(t))}function Ba(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ja(e,t){this.g=e,this.h=t}function za(e,t){if(Ma(t))throw Error("division by zero");if(Ma(e))return new ja(Ra,Ra);if(Fa(e))return t=za(Va(e),t),new ja(Va(t.g),Va(t.h));if(Fa(t))return t=za(e,Va(t)),new ja(Va(t.g),t.h);if(30<e.g.length){if(Fa(e)||Fa(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Oa,r=t;0>=r.X(e);)n=qa(n),r=qa(r);var i=Ka(n,1),a=Ka(r,1);for(r=Ka(r,2),n=Ka(n,2);!Ma(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Ka(r,1),n=Ka(n,1)}return t=Ua(e,i.R(t)),new ja(i,t)}for(i=Ra;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Na(n)).R(t);Fa(o)||0<o.X(e);)o=(a=Na(n-=r)).R(t);Ma(a)&&(a=Oa),i=i.add(a),e=Ua(e,o)}return new ja(i,e)}function qa(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ca(n,e.h)}function Ka(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Ca(i,e.h)}(Dt=Ca.prototype).ea=function(){if(Fa(this))return-Va(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Pa+r)*t,t*=Pa}return e},Dt.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Ma(this))return"0";if(Fa(this))return"-"+Va(this).toString(e);for(var t=Na(Math.pow(e,6)),n=this,r="";;){var i=za(n,t).g,a=((0<(n=Ua(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Ma(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Dt.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Dt.X=function(e){return Fa(e=Ua(this,e))?-1:Ma(e)?0:1},Dt.abs=function(){return Fa(this)?Va(this):this},Dt.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Ca(n,-2147483648&n[n.length-1]?-1:0)},Dt.R=function(e){if(Ma(this)||Ma(e))return Ra;if(Fa(this))return Fa(e)?Va(this).R(Va(e)):Va(Va(this).R(e));if(Fa(e))return Va(this.R(Va(e)));if(0>this.X(La)&&0>e.X(La))return Na(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Ba(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Ba(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Ba(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Ba(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ca(n,0)},Dt.gb=function(e){return za(this,e).h},Dt.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ca(n,this.h&e.h)},Dt.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ca(n,this.h|e.h)},Dt.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ca(n,this.h^e.h)},wa.prototype.createWebChannel=wa.prototype.g,xa.prototype.send=xa.prototype.u,xa.prototype.open=xa.prototype.m,xa.prototype.close=xa.prototype.close,Er.NO_ERROR=0,Er.TIMEOUT=8,Er.HTTP_ERROR=6,Tr.COMPLETE="complete",Ar.EventType=Nr,Nr.OPEN="a",Nr.CLOSE="b",Nr.ERROR="c",Nr.MESSAGE="d",Gn.prototype.listen=Gn.prototype.O,ji.prototype.listenOnce=ji.prototype.P,ji.prototype.getLastError=ji.prototype.Sa,ji.prototype.getLastErrorCode=ji.prototype.Ia,ji.prototype.getStatus=ji.prototype.da,ji.prototype.getResponseJson=ji.prototype.Wa,ji.prototype.getResponseText=ji.prototype.ja,ji.prototype.send=ji.prototype.ha,ji.prototype.setWithCredentials=ji.prototype.Oa,Ta.prototype.digest=Ta.prototype.l,Ta.prototype.reset=Ta.prototype.reset,Ta.prototype.update=Ta.prototype.j,Ca.prototype.add=Ca.prototype.add,Ca.prototype.multiply=Ca.prototype.R,Ca.prototype.modulo=Ca.prototype.gb,Ca.prototype.compare=Ca.prototype.X,Ca.prototype.toNumber=Ca.prototype.ea,Ca.prototype.toString=Ca.prototype.toString,Ca.prototype.getBits=Ca.prototype.D,Ca.fromNumber=Na,Ca.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Va(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Na(Math.pow(n,8)),i=Ra,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Na(Math.pow(n,o)),i=i.R(o).add(Na(u))):i=(i=i.R(r)).add(Na(u))}return i};var Ga=Pt.createWebChannelTransport=function(){return new wa},Ha=Pt.getStatEventTarget=function(){return gr()},Wa=Pt.ErrorCode=Er,Qa=Pt.EventType=Tr,Xa=Pt.Event=mr,Ya=Pt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},$a=Pt.FetchXmlHttpFactory=Oi,Ja=Pt.WebChannel=Ar,Za=Pt.XhrIo=ji,eo=Pt.Md5=Ta,to=Pt.Integer=Ca,no="@firebase/firestore",ro=function(){function e(t){p(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ro.UNAUTHENTICATED=new ro(null),ro.GOOGLE_CREDENTIALS=new ro("google-credentials-uid"),ro.FIRST_PARTY=new ro("first-party-uid"),ro.MOCK_USER=new ro("mock-user");var io="9.21.0",ao=new de("@firebase/firestore");function oo(){return ao.logLevel}function uo(e){if(ao.logLevel<=oe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(lo);ao.debug.apply(ao,["Firestore (".concat(io,"): ").concat(e)].concat(Z(i)))}}function so(e){if(ao.logLevel<=oe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(lo);ao.error.apply(ao,["Firestore (".concat(io,"): ").concat(e)].concat(Z(i)))}}function co(e){if(ao.logLevel<=oe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(lo);ao.warn.apply(ao,["Firestore (".concat(io,"): ").concat(e)].concat(Z(i)))}}function lo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(io,") INTERNAL ASSERTION FAILED: ")+e;throw so(t),new Error(t)}function ho(e,t){e||fo()}function vo(e,t){return e}var po={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},mo=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(z),yo=y((function e(){var t=this;p(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),go=y((function e(t,n){p(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ko=function(){function e(){p(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ro.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),bo=function(){function e(t){p(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),wo=function(){function e(t){p(this,e),this.t=t,this.currentUser=ro.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new yo;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new yo,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){uo("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(uo("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new yo)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(uo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(ho("string"==typeof n.accessToken),new go(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return ho(null===e||"string"==typeof e),new ro(e)}}]),e}(),xo=function(){function e(t,n,r){p(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=ro.FIRST_PARTY,this.g=new Map}return y(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),_o=function(){function e(t,n,r){p(this,e),this.h=t,this.l=n,this.m=r}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new xo(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ro.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),So=y((function e(t){p(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Eo=function(){function e(t){p(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&uo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,uo("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){uo("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):uo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(ho("string"==typeof t.token),e.T=t.token,new So(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function To(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Io=function(){function e(){p(this,e)}return y(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=To(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Co(e,t){return e<t?-1:e>t?1:0}function Ao(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Do(e){return e+"\0"}var No=function(){function e(t,n){if(p(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new mo(po.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new mo(po.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new mo(po.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mo(po.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Co(this.nanoseconds,e.nanoseconds):Co(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Po=function(){function e(t){p(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new No(0,0))}},{key:"max",value:function(){return new e(new No(253402300799,999999999))}}]),e}(),Ro=function(){function e(t,n,r){p(this,e),void 0===n?n=0:n>t.length&&fo(),void 0===r?r=t.length-n:r>t.length-n&&fo(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Oo=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new mo(po.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Z(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ro),Lo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mo=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Lo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new mo(po.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new mo(po.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new mo(po.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new mo(po.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ro),Fo=function(){function e(t){p(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Oo.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Oo.fromString(t))}},{key:"fromName",value:function(t){return new e(Oo.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Oo.emptyPath())}},{key:"comparator",value:function(e,t){return Oo.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Oo(t.slice()))}}]),e}(),Vo=y((function e(t,n,r,i){p(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Uo(e){return e.fields.find((function(e){return 2===e.kind}))}function Bo(e){return e.fields.filter((function(e){return 2!==e.kind}))}Vo.UNKNOWN_ID=-1;var jo=y((function e(t,n){p(this,e),this.fieldPath=t,this.kind=n}));var zo=function(){function e(t,n){p(this,e),this.sequenceNumber=t,this.offset=n}return y(e,null,[{key:"empty",value:function(){return new e(0,Go.min())}}]),e}();function qo(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Po.fromTimestamp(1e9===r?new No(n+1,0):new No(n,r));return new Go(i,Fo.empty(),t)}function Ko(e){return new Go(e.readTime,e.key,-1)}var Go=function(){function e(t,n,r){p(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(Po.min(),Fo.empty(),-1)}},{key:"max",value:function(){return new e(Po.max(),Fo.empty(),-1)}}]),e}();function Ho(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Fo.comparator(e.documentKey,t.documentKey))?n:Co(e.largestBatchId,t.largestBatchId)}var Wo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qo=function(){function e(){p(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Xo(e){return Yo.apply(this,arguments)}function Yo(){return(Yo=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===po.FAILED_PRECONDITION&&t.message===Wo){e.next=2;break}throw t;case 2:uo("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $o=function(){function e(t){var n=this;p(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&fo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=g(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Jo=function(){function e(t,n){var r=this;p(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new yo,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new tu(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=ou(e.target.error);r.R.reject(new tu(t,n))}}return y(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(uo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new ru(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new tu(n,t)}}}]),e}(),Zo=function(){function e(t,n,r){p(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(U())&&so("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"O",value:function(){var e=te(J().mark((function e(t){var n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return uo("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new tu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new mo(po.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new mo(po.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new tu(t,n))},i.onupgradeneeded=function(e){uo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.$(t,i.transaction,e.oldVersion,n.version).next((function(){uo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=te(J().mark((function e(t,n,r,i){var a,o,u,s,c=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=J().mark((function e(){var n,u,s,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.O(t);case 4:return c.db=e.sent,n=Jo.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),$o.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,uo("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return uo("SimpleDb","Removing database:",e),iu(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!j())return!1;if(e.C())return!0;var t=U(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/ImageManager",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),eu=function(){function e(t){p(this,e),this.L=t,this.q=!1,this.U=null}return y(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return iu(this.L.delete())}}]),e}(),tu=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this,po.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(mo);function nu(e){return"IndexedDbTransactionError"===e.name}var ru=function(){function e(t){p(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(uo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(uo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),iu(n)}},{key:"add",value:function(e){return uo("SimpleDb","ADD",this.store.name,e,e),iu(this.store.add(e))}},{key:"get",value:function(e){var t=this;return iu(this.store.get(e)).next((function(n){return void 0===n&&(n=null),uo("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return uo("SimpleDb","DELETE",this.store.name,e),iu(this.store.delete(e))}},{key:"count",value:function(){return uo("SimpleDb","COUNT",this.store.name),iu(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new $o((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new $o((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){uo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new $o((function(n,r){t.onerror=function(e){var t=ou(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new $o((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new eu(i),o=t(i.primaryKey,i.value,a);if(o instanceof $o){var u=o.catch((function(e){return a.done(),$o.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return $o.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function iu(e){return new $o((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ou(e.target.error);n(t)}}))}var au=!1;function ou(e){var t=Zo.S(U());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new mo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return au||(au=!0,setTimeout((function(){throw r}),0)),r}}return e}var uu=function(){function e(t,n){p(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return y(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;uo("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=uo,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!nu(e.t4)){e.next=17;break}uo("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Xo(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),su=function(){function e(t,n){p(this,e),this.localStore=t,this.persistence=n}return y(e,[{key:"nt",value:function(){var e=te(J().mark((function e(){var t,n=this,r=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return $o.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return uo("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return uo("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Ko(t);Ho(r,n)>0&&(n=r)})),new Go(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),cu=function(){function e(t,n){var r=this;p(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function lu(e){return null==e}function fu(e){return 0===e&&1/e==-1/0}function hu(e){return"number"==typeof e&&Number.isInteger(e)&&!fu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function du(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=pu(t)),t=vu(e.get(n),t);return pu(t)}function vu(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function pu(e){return e+"\x01\x01"}function mu(e){var t=e.length;if(ho(t>=2),2===t)return ho("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Oo.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&fo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:fo()}a=o+2}return new Oo(r)}cu.ct=-1;var yu=["userId","batchId"];function gu(e,t){return[e,du(t)]}function ku(e,t,n){return[e,du(t),n]}var bu={},wu=["prefixPath","collectionGroup","readTime","documentId"],xu=["prefixPath","collectionGroup","documentId"],_u=["collectionGroup","readTime","prefixPath","documentId"],Su=["canonicalId","targetId"],Eu=["targetId","path"],Tu=["path","targetId"],Iu=["collectionId","parent"],Cu=["indexId","uid"],Au=["uid","sequenceNumber"],Du=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Nu=["indexId","uid","orderedDocumentKey"],Pu=["userId","collectionPath","documentId"],Ru=["userId","collectionPath","largestBatchId"],Ou=["userId","collectionGroup","largestBatchId"],Lu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Mu=[].concat(Z(Lu),["documentOverlays"]),Fu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vu=Fu,Uu=[].concat(Vu,["indexConfiguration","indexState","indexEntries"]),Bu=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).at=e,i.currentSequenceNumber=r,i}return y(n)}(Qo);function ju(e,t){var n=vo(e);return Zo.M(n.at,t)}function zu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function qu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ku(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Gu=function(){function e(t,n){p(this,e),this.comparator=t,this.root=n||Wu.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Wu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Wu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Hu(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Hu(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Hu(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Hu(this.root,e,this.comparator,!0)}}]),e}(),Hu=function(){function e(t,n,r,i){p(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Wu=function(){function e(t,n,r,i,a){p(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw fo();if(this.right.isRed())throw fo();var e=this.left.check();if(e!==this.right.check())throw fo();return e+(this.isRed()?0:1)}}]),e}();Wu.EMPTY=null,Wu.RED=!0,Wu.BLACK=!1,Wu.EMPTY=new(function(){function e(){p(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw fo()}},{key:"value",get:function(){throw fo()}},{key:"color",get:function(){throw fo()}},{key:"left",get:function(){throw fo()}},{key:"right",get:function(){throw fo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Wu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Qu=function(){function e(t){p(this,e),this.comparator=t,this.data=new Gu(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Xu(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Xu(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Xu=function(){function e(t){p(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Yu(e){return e.hasNext()?e.getNext():void 0}var $u=function(){function e(t){p(this,e),this.fields=t,t.sort(Mo.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new Qu(Mo.comparator),i=g(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=g(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=g(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ao(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Ju=function(e){w(n,e);var t=S(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return y(n)}(T(Error));var Zu=function(e){function t(e){p(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Co(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ju("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Zu.EMPTY_BYTE_STRING=new Zu("");var es=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ts(e){if(ho(!!e),"string"==typeof e){var t=0,n=es.exec(e);if(ho(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ns(e.seconds),nanos:ns(e.nanos)}}function ns(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function rs(e){return"string"==typeof e?Zu.fromBase64String(e):Zu.fromUint8Array(e)}function is(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function as(e){var t=e.mapValue.fields.__previous_value__;return is(t)?as(t):t}function os(e){var t=ts(e.mapValue.fields.__local_write_time__.timestampValue);return new No(t.seconds,t.nanos)}var us=y((function e(t,n,r,i,a,o,u,s){p(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),ss=function(){function e(t,n){p(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),cs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ls={nullValue:"NULL_VALUE"};function fs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?is(e)?4:Es(e)?9007199254740991:10:fo()}function hs(e,t){if(e===t)return!0;var n=fs(e);if(n!==fs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return os(e).isEqual(os(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=ts(e.timestampValue),r=ts(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return rs(e.bytesValue).isEqual(rs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ns(e.geoPointValue.latitude)===ns(t.geoPointValue.latitude)&&ns(e.geoPointValue.longitude)===ns(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ns(e.integerValue)===ns(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ns(e.doubleValue),r=ns(t.doubleValue);return n===r?fu(n)===fu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ao(e.arrayValue.values||[],t.arrayValue.values||[],hs);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(zu(n)!==zu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hs(n[i],r[i])))return!1;return!0}(e,t);default:return fo()}}function ds(e,t){return void 0!==(e.values||[]).find((function(e){return hs(e,t)}))}function vs(e,t){if(e===t)return 0;var n=fs(e),r=fs(t);if(n!==r)return Co(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Co(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=ns(e.integerValue||e.doubleValue),r=ns(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ps(e.timestampValue,t.timestampValue);case 4:return ps(os(e),os(t));case 5:return Co(e.stringValue,t.stringValue);case 6:return function(e,t){var n=rs(e),r=rs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Co(n[i],r[i]);if(0!==a)return a}return Co(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Co(ns(e.latitude),ns(t.latitude));return 0!==n?n:Co(ns(e.longitude),ns(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=vs(n[i],r[i]);if(a)return a}return Co(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===cs.mapValue&&t===cs.mapValue)return 0;if(e===cs.mapValue)return 1;if(t===cs.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Co(r[o],a[o]);if(0!==u)return u;var s=vs(n[r[o]],i[a[o]]);if(0!==s)return s}return Co(r.length,a.length)}(e.mapValue,t.mapValue);default:throw fo()}}function ps(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Co(e,t);var n=ts(e),r=ts(t),i=Co(n.seconds,r.seconds);return 0!==i?i:Co(n.nanos,r.nanos)}function ms(e){return ys(e)}function ys(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=ts(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?rs(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Fo.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=g(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ys(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=g(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ys(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):fo();var t,n}function gs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ks(e){return!!e&&"integerValue"in e}function bs(e){return!!e&&"arrayValue"in e}function ws(e){return!!e&&"nullValue"in e}function xs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _s(e){return!!e&&"mapValue"in e}function Ss(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return qu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Ss(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ss(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Es(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ts(e){return"nullValue"in e?ls:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?gs(ss.empty(),Fo.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:fo()}function Is(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?gs(ss.empty(),Fo.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?cs:fo()}function Cs(e,t){var n=vs(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function As(e,t){var n=vs(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ds=function(){function e(t){p(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!_s(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ss(t)}},{key:"setAll",value:function(e){var t=this,n=Mo.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Ss(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());_s(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return hs(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];_s(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){qu(t,(function(t,n){return e[t]=n}));var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Ss(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Ns(e){var t=[];return qu(e.fields,(function(e,n){var r=new Mo([e]);if(_s(n)){var i=Ns(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=g(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new $u(t)}var Ps=function(){function e(t,n,r,i,a,o,u){p(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Po.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ds.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ds.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Po.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Po.min(),Po.min(),Po.min(),Ds.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Po.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Po.min(),Po.min(),Ds.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Po.min(),Po.min(),Ds.empty(),2)}}]),e}(),Rs=y((function e(t,n){p(this,e),this.position=t,this.inclusive=n}));function Os(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Fo.comparator(Fo.fromName(o.referenceValue),n.key):vs(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ls(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!hs(e.position[n],t.position[n]))return!1;return!0}var Ms=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";p(this,e),this.field=t,this.dir=n}));function Fs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Vs=y((function e(){p(this,e)})),Us=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(vs(t,this.value)):null!==t&&fs(this.value)===fs(t)&&this.matchesComparison(vs(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fo()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Xs(e,t,r):"array-contains"===t?new Zs(e,r):"in"===t?new ec(e,r):"not-in"===t?new tc(e,r):"array-contains-any"===t?new nc(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Ys(e,n):new $s(e,n)}}]),n}(Vs),Bs=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return y(n,[{key:"matches",value:function(e){return js(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=g(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Vs);function js(e){return"and"===e.op}function zs(e){return"or"===e.op}function qs(e){return Ks(e)&&js(e)}function Ks(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Bs)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Gs(e){if(e instanceof Us)return e.field.canonicalString()+e.op.toString()+ms(e.value);if(qs(e))return e.filters.map((function(e){return Gs(e)})).join(",");var t=e.filters.map((function(e){return Gs(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Hs(e,t){return e instanceof Us?function(e,t){return t instanceof Us&&e.op===t.op&&e.field.isEqual(t.field)&&hs(e.value,t.value)}(e,t):e instanceof Bs?function(e,t){return t instanceof Bs&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Hs(n,t.filters[r])}),!0)}(e,t):void fo()}function Ws(e,t){var n=e.filters.concat(t);return Bs.create(n,e.op)}function Qs(e){return e instanceof Us?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ms(e.value))}(e):e instanceof Bs?function(e){return e.op.toString()+" {"+e.getFilters().map(Qs).join(" ,")+"}"}(e):"Filter"}var Xs=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,i)).key=Fo.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=Fo.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Us),Ys=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"in",r)).keys=Js("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Us),$s=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"not-in",r)).keys=Js("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Us);function Js(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Fo.fromName(e.referenceValue)}))}var Zs=function(e){w(n,e);var t=S(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return bs(t)&&ds(t.arrayValue,this.value)}}]),n}(Us),ec=function(e){w(n,e);var t=S(n);function n(e,r){return p(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ds(this.value.arrayValue,t)}}]),n}(Us),tc=function(e){w(n,e);var t=S(n);function n(e,r){return p(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(ds(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ds(this.value.arrayValue,t)}}]),n}(Us),nc=function(e){w(n,e);var t=S(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!bs(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ds(t.value.arrayValue,e)}))}}]),n}(Us),rc=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;p(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function ic(e){return new rc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ac(e){var t=vo(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Gs(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),lu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ms(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ms(e)})).join(",")),t.ft=n}return t.ft}function oc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Fs(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Hs(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ls(e.startAt,t.startAt)&&Ls(e.endAt,t.endAt)}function uc(e){return Fo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function sc(e,t){return e.filters.filter((function(e){return e instanceof Us&&e.field.isEqual(t)}))}function cc(e,t,n){var r,i=ls,a=!0,o=g(sc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=ls,c=!0;switch(u.op){case"<":case"<=":s=Ts(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=ls}Cs({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Cs({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function lc(e,t,n){var r,i=cs,a=!0,o=g(sc(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=cs,c=!0;switch(u.op){case">=":case">":s=Is(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=cs}As({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];As({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var fc=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;p(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function hc(e,t,n,r,i,a,o,u){return new fc(e,t,n,r,i,a,o,u)}function dc(e){return new fc(e)}function vc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function pc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function mc(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function yc(e){return null!==e.collectionGroup}function gc(e){var t=vo(e);if(null===t.dt){t.dt=[];var n=mc(t),r=pc(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new Ms(n)),t.dt.push(new Ms(Mo.keyField(),"asc"));else{var i,a=!1,o=g(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new Ms(Mo.keyField(),s))}}}return t.dt}function kc(e){var t=vo(e);if(!t._t)if("F"===t.limitType)t._t=ic(t.path,t.collectionGroup,gc(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=g(gc(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Ms(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Rs(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Rs(t.startAt.position,t.startAt.inclusive):null;t._t=ic(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function bc(e,t){t.getFirstInequalityField(),mc(e);var n=e.filters.concat([t]);return new fc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function wc(e,t,n){return new fc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function xc(e,t){return oc(kc(e),kc(t))&&e.limitType===t.limitType}function _c(e){return"".concat(ac(kc(e)),"|lt:").concat(e.limitType)}function Sc(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Qs(e)})).join(", "),"]")),lu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ms(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ms(e)})).join(",")),"Target(".concat(t,")")}(kc(e)),"; limitType=").concat(e.limitType,")")}function Ec(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Fo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=g(gc(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=g(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Os(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,gc(e),t))&&!(e.endAt&&!function(e,t,n){var r=Os(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,gc(e),t))}(e,t)}function Tc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ic(e){return function(t,n){var r,i=!1,a=g(gc(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Cc(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Cc(e,t,n){var r=e.field.isKeyField()?Fo.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?vs(r,i):fo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fo()}}var Ac=function(){function e(t,n){p(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=o(r.value,2),u=a[0],s=a[1];if(this.equalsFn(u,e))return s}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){qu(this.inner,(function(t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=o(r.value,2),u=a[0],s=a[1];e(u,s)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Ku(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Dc=new Gu(Fo.comparator);function Nc(){return Dc}var Pc=new Gu(Fo.comparator);function Rc(){for(var e=Pc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Oc(e){var t=Pc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Lc(){return Fc()}function Mc(){return Fc()}function Fc(){return new Ac((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Vc=new Gu(Fo.comparator),Uc=new Qu(Fo.comparator);function Bc(){for(var e=Uc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var jc=new Qu(Co);function zc(){return jc}function qc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fu(t)?"-0":t}}function Kc(e){return{integerValue:""+e}}function Gc(e,t){return hu(t)?Kc(t):qc(e,t)}var Hc=y((function e(){p(this,e),this._=void 0}));function Wc(e,t,n){return e instanceof Yc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&is(t)&&(t=as(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof $c?Jc(e,t):e instanceof Zc?el(e,t):function(e,t){var n=Xc(e,t),r=nl(n)+nl(e.wt);return ks(n)&&ks(e.wt)?Kc(r):qc(e.serializer,r)}(e,t)}function Qc(e,t,n){return e instanceof $c?Jc(e,t):e instanceof Zc?el(e,t):n}function Xc(e,t){return e instanceof tl?ks(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Yc=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n)}(Hc),$c=function(e){w(n,e);var t=S(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Hc);function Jc(e,t){var n,r=rl(t),i=g(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return hs(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Zc=function(e){w(n,e);var t=S(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Hc);function el(e,t){var n,r=rl(t),i=g(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!hs(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var tl=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).serializer=e,i.wt=r,i}return y(n)}(Hc);function nl(e){return ns(e.integerValue||e.doubleValue)}function rl(e){return bs(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var il=y((function e(t,n){p(this,e),this.field=t,this.transform=n}));var al=y((function e(t,n){p(this,e),this.version=t,this.transformResults=n})),ol=function(){function e(t,n){p(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ul(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var sl=y((function e(){p(this,e)}));function cl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new wl(e.key,ol.none()):new vl(e.key,e.data,ol.none());var n,r=e.data,i=Ds.empty(),a=new Qu(Mo.comparator),o=g(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new pl(e.key,i,new $u(a.toArray()),ol.none())}function ll(e,t,n){e instanceof vl?function(e,t,n){var r=e.value.clone(),i=yl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof pl?function(e,t,n){if(ul(e.precondition,t)){var r=yl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ml(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function fl(e,t,n,r){return e instanceof vl?function(e,t,n,r){if(!ul(e.precondition,t))return n;var i=e.value.clone(),a=gl(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof pl?function(e,t,n,r){if(!ul(e.precondition,t))return n;var i=gl(e.fieldTransforms,r,t),a=t.data;return a.setAll(ml(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return ul(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function hl(e,t){var n,r=null,i=g(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Xc(a.transform,o||null);null!=u&&(null===r&&(r=Ds.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function dl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ao(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof $c&&t instanceof $c||e instanceof Zc&&t instanceof Zc?Ao(e.elements,t.elements,hs):e instanceof tl&&t instanceof tl?hs(e.wt,t.wt):e instanceof Yc&&t instanceof Yc}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var vl=function(e){w(n,e);var t=S(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return p(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(sl),pl=function(e){w(n,e);var t=S(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return p(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return y(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(sl);function ml(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function yl(e,t,n){var r=new Map;ho(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Qc(o,u,n[i]))}return r}function gl(e,t,n){var r,i=new Map,a=g(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Wc(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var kl,bl,wl=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(sl),xl=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(sl),_l=function(){function e(t,n,r,i){p(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ll(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=g(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=fl(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=g(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=fl(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Mc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=cl(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Po.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Bc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,(function(e,t){return dl(e,t)}))&&Ao(this.baseMutations,e.baseMutations,(function(e,t){return dl(e,t)}))}}]),e}(),Sl=function(){function e(t,n,r,i){p(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){ho(t.mutations.length===r.length);for(var i=Vc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),El=function(){function e(t,n){p(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Tl=y((function e(t,n){p(this,e),this.count=t,this.unchangedNames=n}));function Il(e){switch(e){default:return fo();case po.CANCELLED:case po.UNKNOWN:case po.DEADLINE_EXCEEDED:case po.RESOURCE_EXHAUSTED:case po.INTERNAL:case po.UNAVAILABLE:case po.UNAUTHENTICATED:return!1;case po.INVALID_ARGUMENT:case po.NOT_FOUND:case po.ALREADY_EXISTS:case po.PERMISSION_DENIED:case po.FAILED_PRECONDITION:case po.ABORTED:case po.OUT_OF_RANGE:case po.UNIMPLEMENTED:case po.DATA_LOSS:return!0}}function Cl(e){if(void 0===e)return so("GRPC error has no .code"),po.UNKNOWN;switch(e){case kl.OK:return po.OK;case kl.CANCELLED:return po.CANCELLED;case kl.UNKNOWN:return po.UNKNOWN;case kl.DEADLINE_EXCEEDED:return po.DEADLINE_EXCEEDED;case kl.RESOURCE_EXHAUSTED:return po.RESOURCE_EXHAUSTED;case kl.INTERNAL:return po.INTERNAL;case kl.UNAVAILABLE:return po.UNAVAILABLE;case kl.UNAUTHENTICATED:return po.UNAUTHENTICATED;case kl.INVALID_ARGUMENT:return po.INVALID_ARGUMENT;case kl.NOT_FOUND:return po.NOT_FOUND;case kl.ALREADY_EXISTS:return po.ALREADY_EXISTS;case kl.PERMISSION_DENIED:return po.PERMISSION_DENIED;case kl.FAILED_PRECONDITION:return po.FAILED_PRECONDITION;case kl.ABORTED:return po.ABORTED;case kl.OUT_OF_RANGE:return po.OUT_OF_RANGE;case kl.UNIMPLEMENTED:return po.UNIMPLEMENTED;case kl.DATA_LOSS:return po.DATA_LOSS;default:return fo()}}(bl=kl||(kl={}))[bl.OK=0]="OK",bl[bl.CANCELLED=1]="CANCELLED",bl[bl.UNKNOWN=2]="UNKNOWN",bl[bl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bl[bl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bl[bl.NOT_FOUND=5]="NOT_FOUND",bl[bl.ALREADY_EXISTS=6]="ALREADY_EXISTS",bl[bl.PERMISSION_DENIED=7]="PERMISSION_DENIED",bl[bl.UNAUTHENTICATED=16]="UNAUTHENTICATED",bl[bl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bl[bl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bl[bl.ABORTED=10]="ABORTED",bl[bl.OUT_OF_RANGE=11]="OUT_OF_RANGE",bl[bl.UNIMPLEMENTED=12]="UNIMPLEMENTED",bl[bl.INTERNAL=13]="INTERNAL",bl[bl.UNAVAILABLE=14]="UNAVAILABLE",bl[bl.DATA_LOSS=15]="DATA_LOSS";var Al=function(){function e(){p(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return y(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Dl}},{key:"getOrCreateInstance",value:function(){return null===Dl&&(Dl=new e),Dl}}]),e}(),Dl=null;function Nl(){return new TextEncoder}var Pl=new to([4294967295,4294967295],0);function Rl(e){var t=Nl().encode(e),n=new eo;return n.update(t),new Uint8Array(n.digest())}function Ol(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new to([n,r],0),new to([i,a],0)]}var Ll=function(){function e(t,n,r){if(p(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ml("Invalid padding: ".concat(n));if(r<0)throw new Ml("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Ml("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Ml("Invalid padding when bitmap length is 0: ".concat(n));this.yt=8*t.length-n,this.It=to.fromNumber(this.yt)}return y(e,[{key:"Tt",value:function(e,t,n){var r=e.add(t.multiply(to.fromNumber(n)));return 1===r.compare(Pl)&&(r=new to([r.getBits(0),r.getBits(1)],0)),r.modulo(this.It).toNumber()}},{key:"Et",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"At",value:function(e){if(0===this.yt)return!1;for(var t=o(Ol(Rl(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Tt(n,r,i);if(!this.Et(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.yt)for(var t=o(Ol(Rl(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Tt(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Ml=function(e){w(n,e);var t=S(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return y(n)}(T(Error)),Fl=function(){function e(t,n,r,i,a){p(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Vl.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Po.min(),i,new Gu(Co),Nc(),Bc())}}]),e}(),Vl=function(){function e(t,n,r,i,a){p(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Bc(),Bc(),Bc())}}]),e}(),Ul=y((function e(t,n,r,i){p(this,e),this.vt=t,this.removedTargetIds=n,this.key=r,this.Pt=i})),Bl=y((function e(t,n){p(this,e),this.targetId=t,this.bt=n})),jl=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),zl=function(){function e(){p(this,e),this.Vt=0,this.St=Gl(),this.Dt=Zu.EMPTY_BYTE_STRING,this.Ct=!1,this.xt=!0}return y(e,[{key:"current",get:function(){return this.Ct}},{key:"resumeToken",get:function(){return this.Dt}},{key:"Nt",get:function(){return 0!==this.Vt}},{key:"kt",get:function(){return this.xt}},{key:"Mt",value:function(e){e.approximateByteSize()>0&&(this.xt=!0,this.Dt=e)}},{key:"Ot",value:function(){var e=Bc(),t=Bc(),n=Bc();return this.St.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:fo()}})),new Vl(this.Dt,this.Ct,e,t,n)}},{key:"$t",value:function(){this.xt=!1,this.St=Gl()}},{key:"Ft",value:function(e,t){this.xt=!0,this.St=this.St.insert(e,t)}},{key:"Bt",value:function(e){this.xt=!0,this.St=this.St.remove(e)}},{key:"Lt",value:function(){this.Vt+=1}},{key:"qt",value:function(){this.Vt-=1}},{key:"Ut",value:function(){this.xt=!0,this.Ct=!0}}]),e}(),ql=function(){function e(t){p(this,e),this.Kt=t,this.Gt=new Map,this.Qt=Nc(),this.jt=Kl(),this.zt=new Gu(Co)}return y(e,[{key:"Wt",value:function(e){var t,n=g(e.vt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Pt&&e.Pt.isFoundDocument()?this.Ht(r,e.Pt):this.Jt(r,e.key,e.Pt)}}catch(u){n.e(u)}finally{n.f()}var i,a=g(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Jt(o,e.key,e.Pt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Yt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Xt(n);switch(e.state){case 0:t.Zt(n)&&r.Mt(e.resumeToken);break;case 1:r.qt(),r.Nt||r.$t(),r.Mt(e.resumeToken);break;case 2:r.qt(),r.Nt||t.removeTarget(n);break;case 3:t.Zt(n)&&(r.Ut(),r.Mt(e.resumeToken));break;case 4:t.Zt(n)&&(t.te(n),r.Mt(e.resumeToken));break;default:fo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Gt.forEach((function(e,r){n.Zt(r)&&t(r)}))}},{key:"ee",value:function(e){var t,n=e.targetId,r=e.bt.count,i=this.ne(n);if(i){var a=i.target;if(uc(a))if(0===r){var o=new Fo(a.path);this.Jt(n,o,Ps.newNoDocument(o,Po.min()))}else ho(1===r);else{var u=this.se(n);if(u!==r){var s=this.ie(e,u);if(0!==s){this.te(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.zt=this.zt.insert(n,c)}null===(t=Al.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.bt))}}}}},{key:"ie",value:function(e,t){var n=e.bt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=rs(c).toUint8Array()}catch(e){if(e instanceof Ju)return co("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new Ll(a,f,d)}catch(e){return co(e instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.yt?1:i!==t-this.re(e.targetId,o)?2:0}},{key:"re",value:function(e,t){var n=this,r=this.Kt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Kt.oe(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.At(o)||(n.Jt(e,r,null),i++)})),i}},{key:"ue",value:function(e){var t=this,n=new Map;this.Gt.forEach((function(r,i){var a=t.ne(i);if(a){if(r.current&&uc(a.target)){var o=new Fo(a.target.path);null!==t.Qt.get(o)||t.ce(i,o)||t.Jt(i,o,Ps.newNoDocument(o,e))}r.kt&&(n.set(i,r.Ot()),r.$t())}}));var r=Bc();this.jt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ne(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Qt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Fl(e,n,this.zt,this.Qt,r);return this.Qt=Nc(),this.jt=Kl(),this.zt=new Gu(Co),i}},{key:"Ht",value:function(e,t){if(this.Zt(e)){var n=this.ce(e,t.key)?2:0;this.Xt(e).Ft(t.key,n),this.Qt=this.Qt.insert(t.key,t),this.jt=this.jt.insert(t.key,this.ae(t.key).add(e))}}},{key:"Jt",value:function(e,t,n){if(this.Zt(e)){var r=this.Xt(e);this.ce(e,t)?r.Ft(t,1):r.Bt(t),this.jt=this.jt.insert(t,this.ae(t).delete(e)),n&&(this.Qt=this.Qt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Gt.delete(e)}},{key:"se",value:function(e){var t=this.Xt(e).Ot();return this.Kt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Lt",value:function(e){this.Xt(e).Lt()}},{key:"Xt",value:function(e){var t=this.Gt.get(e);return t||(t=new zl,this.Gt.set(e,t)),t}},{key:"ae",value:function(e){var t=this.jt.get(e);return t||(t=new Qu(Co),this.jt=this.jt.insert(e,t)),t}},{key:"Zt",value:function(e){var t=null!==this.ne(e);return t||uo("WatchChangeAggregator","Detected inactive target",e),t}},{key:"ne",value:function(e){var t=this.Gt.get(e);return t&&t.Nt?null:this.Kt.he(e)}},{key:"te",value:function(e){var t=this;this.Gt.set(e,new zl),this.Kt.getRemoteKeysForTarget(e).forEach((function(n){t.Jt(e,n,null)}))}},{key:"ce",value:function(e,t){return this.Kt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Kl(){return new Gu(Fo.comparator)}function Gl(){return new Gu(Fo.comparator)}var Hl={asc:"ASCENDING",desc:"DESCENDING"},Wl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ql={and:"AND",or:"OR"},Xl=y((function e(t,n){p(this,e),this.databaseId=t,this.useProto3Json=n}));function Yl(e,t){return e.useProto3Json||lu(t)?t:{value:t}}function $l(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Zl(e,t){return $l(e,t.toTimestamp())}function ef(e){return ho(!!e),Po.fromTimestamp(function(e){var t=ts(e);return new No(t.seconds,t.nanos)}(e))}function tf(e,t){return function(e){return new Oo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function nf(e){var t=Oo.fromString(e);return ho(Tf(t)),t}function rf(e,t){return tf(e.databaseId,t.path)}function af(e,t){var n=nf(t);if(n.get(1)!==e.databaseId.projectId)throw new mo(po.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new mo(po.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Fo(cf(n))}function of(e,t){return tf(e.databaseId,t)}function uf(e){var t=nf(e);return 4===t.length?Oo.emptyPath():cf(t)}function sf(e){return new Oo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function cf(e){return ho(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function lf(e,t,n){return{name:rf(e,t),fields:n.value.mapValue.fields}}function ff(e,t,n){var r=af(e,t.name),i=ef(t.updateTime),a=t.createTime?ef(t.createTime):Po.min(),o=new Ds({mapValue:{fields:t.fields}}),u=Ps.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function hf(e,t){return"found"in t?function(e,t){ho(!!t.found),t.found.name,t.found.updateTime;var n=af(e,t.found.name),r=ef(t.found.updateTime),i=t.found.createTime?ef(t.found.createTime):Po.min(),a=new Ds({mapValue:{fields:t.found.fields}});return Ps.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){ho(!!t.missing),ho(!!t.readTime);var n=af(e,t.missing),r=ef(t.readTime);return Ps.newNoDocument(n,r)}(e,t):fo()}function df(e,t){var n;if(t instanceof vl)n={update:lf(e,t.key,t.value)};else if(t instanceof wl)n={delete:rf(e,t.key)};else if(t instanceof pl)n={update:lf(e,t.key,t.data),updateMask:Ef(t.fieldMask)};else{if(!(t instanceof xl))return fo();n={verify:rf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Yc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $c)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof tl)return{fieldPath:t.field.canonicalString(),increment:n.wt};throw fo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Zl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:fo()}(e,t.precondition)),n}function vf(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ol.updateTime(ef(e.updateTime)):void 0!==e.exists?ol.exists(e.exists):ol.none()}(t.currentDocument):ol.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)ho("REQUEST_TIME"===t.setToServerValue),n=new Yc;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new $c(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Zc(i)}else"increment"in t?n=new tl(e,t.increment):fo();var a=Mo.fromServerFormat(t.fieldPath);return new il(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=af(e,t.update.name),a=new Ds({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new $u(t.map((function(e){return Mo.fromServerFormat(e)})))}(t.updateMask);return new pl(i,a,o,n,r)}return new vl(i,a,n,r)}if(t.delete){var u=af(e,t.delete);return new wl(u,n)}if(t.verify){var s=af(e,t.verify);return new xl(s,n)}return fo()}function pf(e,t){return{documents:[of(e,t.path)]}}function mf(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=of(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=of(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Sf(Bs.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:xf(e.field),direction:kf(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=Yl(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function yf(e){var t=uf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ho(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=gf(e);return t instanceof Bs&&qs(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Ms(_f(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return lu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Rs(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Rs(n,t)}(n.endAt)),hc(t,i,u,o,s,"F",c,l)}function gf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=_f(e.unaryFilter.field);return Us.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=_f(e.unaryFilter.field);return Us.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=_f(e.unaryFilter.field);return Us.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=_f(e.unaryFilter.field);return Us.create(i,"!=",{nullValue:"NULL_VALUE"});default:return fo()}}(e):void 0!==e.fieldFilter?function(e){return Us.create(_f(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fo()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Bs.create(e.compositeFilter.filters.map((function(e){return gf(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return fo()}}(e.compositeFilter.op))}(e):fo()}function kf(e){return Hl[e]}function bf(e){return Wl[e]}function wf(e){return Ql[e]}function xf(e){return{fieldPath:e.canonicalString()}}function _f(e){return Mo.fromServerFormat(e.fieldPath)}function Sf(e){return e instanceof Us?function(e){if("=="===e.op){if(xs(e.value))return{unaryFilter:{field:xf(e.field),op:"IS_NAN"}};if(ws(e.value))return{unaryFilter:{field:xf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(xs(e.value))return{unaryFilter:{field:xf(e.field),op:"IS_NOT_NAN"}};if(ws(e.value))return{unaryFilter:{field:xf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xf(e.field),op:bf(e.op),value:e.value}}}(e):e instanceof Bs?function(e){var t=e.getFilters().map((function(e){return Sf(e)}));return 1===t.length?t[0]:{compositeFilter:{op:wf(e.op),filters:t}}}(e):fo()}function Ef(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Tf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var If=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Po.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Po.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Zu.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;p(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Cf=y((function e(t){p(this,e),this.le=t}));function Af(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Df(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:rf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:$l(e,t.version.toTimestamp()),createTime:$l(e,t.createTime.toTimestamp())}}(e.le,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Nf(t.version)};else{if(!t.isUnknownDocument())return fo();r.unknownDocument={path:n.path.toArray(),version:Nf(t.version)}}return r}function Df(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Nf(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Pf(e){var t=new No(e.seconds,e.nanoseconds);return Po.fromTimestamp(t)}function Rf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return vf(e.le,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return vf(e.le,t)})),u=No.fromMillis(t.localWriteTimeMs);return new _l(t.batchId,u,n,o)}function Of(e){var t,n,r=Pf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Pf(e.lastLimboFreeSnapshotVersion):Po.min();return void 0!==e.query.documents?(ho(1===(n=e.query).documents.length),t=kc(dc(uf(n.documents[0])))):t=function(e){return kc(yf(e))}(e.query),new If(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Zu.fromBase64String(e.resumeToken))}function Lf(e,t){var n,r=Nf(t.snapshotVersion),i=Nf(t.lastLimboFreeSnapshotVersion);n=uc(t.target)?pf(e.le,t.target):mf(e.le,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ac(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Mf(e){var t=yf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?wc(t,t.limit,"L"):t}function Ff(e,t){return new El(t.largestBatchId,vf(e.le,t.overlayMutation))}function Vf(e,t){var n=t.path.lastSegment();return[e,du(t.path.popLast()),n]}function Uf(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Nf(r.readTime),documentKey:du(r.documentKey.path),largestBatchId:r.largestBatchId}}var Bf=function(){function e(){p(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return jf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Pf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return jf(e).put({bundleId:(n=t).id,createTime:Nf(ef(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return zf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Mf(t.bundledQuery),readTime:Pf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return zf(e).put(function(e){return{name:e.name,readTime:Nf(ef(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function jf(e){return ju(e,"bundles")}function zf(e){return ju(e,"namedQueries")}var qf=function(){function e(t,n){p(this,e),this.serializer=t,this.userId=n}return y(e,[{key:"getOverlay",value:function(e,t){var n=this;return Kf(e).get(Vf(this.userId,t)).next((function(e){return e?Ff(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Lc();return $o.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new El(t,a);i.push(r.de(e,o))})),$o.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(du(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Kf(e).J("collectionPathOverlayIndex",i))})),$o.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Lc(),a=du(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Kf(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Ff(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Lc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kf(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Ff(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"de",value:function(e,t){return Kf(e).put(function(e,t,n){var r=o(Vf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:df(e.le,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"fe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Kf(e){return ju(e,"documentOverlays")}var Gf=function(){function e(){p(this,e)}return y(e,[{key:"_e",value:function(e,t){this.we(e,t),t.me()}},{key:"we",value:function(e,t){if("nullValue"in e)this.ge(t,5);else if("booleanValue"in e)this.ge(t,10),t.ye(e.booleanValue?1:0);else if("integerValue"in e)this.ge(t,15),t.ye(ns(e.integerValue));else if("doubleValue"in e){var n=ns(e.doubleValue);isNaN(n)?this.ge(t,13):(this.ge(t,15),fu(n)?t.ye(0):t.ye(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ge(t,20),"string"==typeof r?t.pe(r):(t.pe("".concat(r.seconds||"")),t.ye(r.nanos||0))}else if("stringValue"in e)this.Ie(e.stringValue,t),this.Te(t);else if("bytesValue"in e)this.ge(t,30),t.Ee(rs(e.bytesValue)),this.Te(t);else if("referenceValue"in e)this.Ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ge(t,45),t.ye(i.latitude||0),t.ye(i.longitude||0)}else"mapValue"in e?Es(e)?this.ge(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Te(t)):"arrayValue"in e?(this.ve(e.arrayValue,t),this.Te(t)):fo()}},{key:"Ie",value:function(e,t){this.ge(t,25),this.Pe(e,t)}},{key:"Pe",value:function(e,t){t.pe(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ge(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Ie(a,t),this.we(n[a],t)}}},{key:"ve",value:function(e,t){var n=e.values||[];this.ge(t,50);var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.we(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"Ae",value:function(e,t){var n=this;this.ge(t,37),Fo.fromName(e).path.forEach((function(e){n.ge(t,60),n.Pe(e,t)}))}},{key:"ge",value:function(e,t){e.ye(t)}},{key:"Te",value:function(e){e.ye(2)}}]),e}();function Hf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Wf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Hf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Gf.be=new Gf;var Qf=function(){function e(){p(this,e),this.buffer=new Uint8Array(1024),this.position=0}return y(e,[{key:"Ve",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Se(n.value),n=t.next();this.De()}},{key:"Ce",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.xe(n.value),n=t.next();this.Ne()}},{key:"ke",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Se(i);else if(i<2048)this.Se(960|i>>>6),this.Se(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Se(480|i>>>12),this.Se(128|63&i>>>6),this.Se(128|63&i);else{var a=r.codePointAt(0);this.Se(240|a>>>18),this.Se(128|63&a>>>12),this.Se(128|63&a>>>6),this.Se(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.De()}},{key:"Me",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.xe(i);else if(i<2048)this.xe(960|i>>>6),this.xe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.xe(480|i>>>12),this.xe(128|63&i>>>6),this.xe(128|63&i);else{var a=r.codePointAt(0);this.xe(240|a>>>18),this.xe(128|63&a>>>12),this.xe(128|63&a>>>6),this.xe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ne()}},{key:"Oe",value:function(e){var t=this.$e(e),n=Wf(t);this.Fe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Be",value:function(e){var t=this.$e(e),n=Wf(t);this.Fe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Le",value:function(){this.qe(255),this.qe(255)}},{key:"Ue",value:function(){this.Ke(255),this.Ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Fe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Ge",value:function(){return this.buffer.slice(0,this.position)}},{key:"$e",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Se",value:function(e){var t=255&e;0===t?(this.qe(0),this.qe(255)):255===t?(this.qe(255),this.qe(0)):this.qe(t)}},{key:"xe",value:function(e){var t=255&e;0===t?(this.Ke(0),this.Ke(255)):255===t?(this.Ke(255),this.Ke(0)):this.Ke(e)}},{key:"De",value:function(){this.qe(0),this.qe(1)}},{key:"Ne",value:function(){this.Ke(0),this.Ke(1)}},{key:"qe",value:function(e){this.Fe(1),this.buffer[this.position++]=e}},{key:"Ke",value:function(e){this.Fe(1),this.buffer[this.position++]=~e}},{key:"Fe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Xf=function(){function e(t){p(this,e),this.Qe=t}return y(e,[{key:"Ee",value:function(e){this.Qe.Ve(e)}},{key:"pe",value:function(e){this.Qe.ke(e)}},{key:"ye",value:function(e){this.Qe.Oe(e)}},{key:"me",value:function(){this.Qe.Le()}}]),e}(),Yf=function(){function e(t){p(this,e),this.Qe=t}return y(e,[{key:"Ee",value:function(e){this.Qe.Ce(e)}},{key:"pe",value:function(e){this.Qe.Me(e)}},{key:"ye",value:function(e){this.Qe.Be(e)}},{key:"me",value:function(){this.Qe.Ue()}}]),e}(),$f=function(){function e(){p(this,e),this.Qe=new Qf,this.je=new Xf(this.Qe),this.ze=new Yf(this.Qe)}return y(e,[{key:"seed",value:function(e){this.Qe.seed(e)}},{key:"We",value:function(e){return 0===e?this.je:this.ze}},{key:"Ge",value:function(){return this.Qe.Ge()}},{key:"reset",value:function(){this.Qe.reset()}}]),e}(),Jf=function(){function e(t,n,r,i){p(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return y(e,[{key:"He",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Zf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=eh(e.arrayValue,t.arrayValue))?n:0!==(n=eh(e.directionalValue,t.directionalValue))?n:Fo.comparator(e.documentKey,t.documentKey)}function eh(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var th=function(){function e(t){p(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Je=t.orderBy,this.Ye=[];var n,r=g(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Xe=i:this.Ye.push(i)}}catch(a){r.e(a)}finally{r.f()}}return y(e,[{key:"Ze",value:function(e){ho(e.collectionGroup===this.collectionId);var t=Uo(e);if(void 0!==t&&!this.tn(t))return!1;for(var n=Bo(e),r=0,i=0;r<n.length&&this.tn(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Xe){var a=n[r];if(!this.en(this.Xe,a)||!this.nn(this.Je[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Je.length||!this.nn(this.Je[i++],o))return!1}return!0}},{key:"tn",value:function(e){var t,n=g(this.Ye);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.en(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"en",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"nn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function nh(e){var t,n;if(ho(e instanceof Us||e instanceof Bs),e instanceof Us){if(e instanceof ec){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Us.create(e.field,"==",t)})))||[];return Bs.create(r,"or")}return e}var i=e.filters.map((function(e){return nh(e)}));return Bs.create(i,e.op)}function rh(e){if(0===e.getFilters().length)return[];var t=uh(nh(e));return ho(oh(t)),ih(t)||ah(t)?[t]:t.getFilters()}function ih(e){return e instanceof Us}function ah(e){return e instanceof Bs&&qs(e)}function oh(e){return ih(e)||ah(e)||function(e){if(e instanceof Bs&&zs(e)){var t,n=g(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!ih(r)&&!ah(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function uh(e){if(ho(e instanceof Us||e instanceof Bs),e instanceof Us)return e;if(1===e.filters.length)return uh(e.filters[0]);var t=e.filters.map((function(e){return uh(e)})),n=Bs.create(t,e.op);return oh(n=lh(n))?n:(ho(n instanceof Bs),ho(js(n)),ho(n.filters.length>1),n.filters.reduce((function(e,t){return sh(e,t)})))}function sh(e,t){var n;return ho(e instanceof Us||e instanceof Bs),ho(t instanceof Us||t instanceof Bs),n=e instanceof Us?t instanceof Us?function(e,t){return Bs.create([e,t],"and")}(e,t):ch(e,t):t instanceof Us?ch(t,e):function(e,t){if(ho(e.filters.length>0&&t.filters.length>0),js(e)&&js(t))return Ws(e,t.getFilters());var n=zs(e)?e:t,r=zs(e)?t:e,i=n.filters.map((function(e){return sh(e,r)}));return Bs.create(i,"or")}(e,t),lh(n)}function ch(e,t){if(js(t))return Ws(t,e.getFilters());var n=t.filters.map((function(t){return sh(e,t)}));return Bs.create(n,"or")}function lh(e){if(ho(e instanceof Us||e instanceof Bs),e instanceof Us)return e;var t=e.getFilters();if(1===t.length)return lh(t[0]);if(Ks(e))return e;var n=t.map((function(e){return lh(e)})),r=[];return n.forEach((function(t){t instanceof Us?r.push(t):t instanceof Bs&&(t.op===e.op?r.push.apply(r,Z(t.filters)):r.push(t))})),1===r.length?r[0]:Bs.create(r,e.op)}var fh=function(){function e(){p(this,e),this.sn=new hh}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.sn.add(t),$o.resolve()}},{key:"getCollectionParents",value:function(e,t){return $o.resolve(this.sn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return $o.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return $o.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return $o.resolve(null)}},{key:"getIndexType",value:function(e,t){return $o.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return $o.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return $o.resolve(null)}},{key:"getMinOffset",value:function(e,t){return $o.resolve(Go.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return $o.resolve(Go.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return $o.resolve()}},{key:"updateIndexEntries",value:function(e,t){return $o.resolve()}}]),e}(),hh=function(){function e(){p(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Qu(Oo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Qu(Oo.comparator)).toArray()}}]),e}(),dh=new Uint8Array(0),vh=function(){function e(t,n){p(this,e),this.user=t,this.databaseId=n,this.rn=new hh,this.on=new Ac((function(e){return ac(e)}),(function(e,t){return oc(e,t)})),this.uid=t.uid||""}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.rn.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.rn.add(t)}));var a={collectionId:r,parent:du(i)};return ph(e).put(a)}return $o.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Do(t),""],!1,!0);return ph(e).j(r).next((function(e){var r,i=g(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(mu(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=yh(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=gh(e);return a.next((function(e){o.put(Uf(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=yh(e),r=gh(e),i=mh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=mh(e),i=!0,a=new Map;return $o.forEach(this.un(t),(function(t){return n.cn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Bc(),o=[];return $o.forEach(a,(function(i,a){var u;uo("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(ac(t)));var s=function(e,t){var n=Uo(t);if(void 0===n)return null;var r,i=g(sc(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=g(Bo(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=g(sc(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=g(Bo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?cc(e,o.fieldPath,e.startAt):lc(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Rs(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=g(Bo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?lc(e,o.fieldPath,e.endAt):cc(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Rs(r,i)}(a,i),h=n.an(i,a,l),d=n.an(i,a,f),v=n.hn(i,a,c),p=n.ln(i.indexId,s,h,l.inclusive,d,f.inclusive,v);return $o.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Fo.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return $o.resolve(null)}))}},{key:"un",value:function(e){var t=this.on.get(e);return t||(t=0===e.filters.length?[e]:rh(Bs.create(e.filters,"and")).map((function(t){return ic(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.on.set(e,t),t)}},{key:"ln",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.fn(t[h/c]):dh,f=u.dn(e,s,n[h%c],r),d=u._n(e,s,i[h%c],a),v=o.map((function(t){return u.dn(e,s,t,!0)}));l.push.apply(l,Z(u.createRange(f,d,v)))},h=0;h<s;++h)f();return l}},{key:"dn",value:function(e,t,n,r){var i=new Jf(e,Fo.empty(),t,n);return r?i:i.He()}},{key:"_n",value:function(e,t,n,r){var i=new Jf(e,Fo.empty(),t,n);return r?i.He():i}},{key:"cn",value:function(e,t){var n=new th(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ze(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.un(t);return $o.forEach(i,(function(t){return n.cn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Qu(Mo.comparator),r=!1,i=g(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=g(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=g(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"wn",value:function(e,t){var n,r=new $f,i=g(Bo(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.We(a.kind);Gf.be._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Ge()}},{key:"fn",value:function(e){var t=new $f;return Gf.be._e(e,t.We(0)),t.Ge()}},{key:"mn",value:function(e,t){var n=new $f;return Gf.be._e(gs(this.databaseId,t),n.We(function(e){var t=Bo(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ge()}},{key:"hn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new $f);var i,a=0,o=g(Bo(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=g(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.gn(t,s.fieldPath)&&bs(c))r=this.yn(r,s,c);else{var h=f.We(s.kind);Gf.be._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.pn(r)}},{key:"an",value:function(e,t,n){return this.hn(e,t,n.position)}},{key:"pn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Ge();return t}},{key:"yn",value:function(e,t,n){var r,i=Z(e),a=[],o=g(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=g(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new $f;f.seed(l.Ge()),Gf.be._e(s,f.We(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"gn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Us&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=yh(e),i=gh(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return $o.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new zo(t.sequenceNumber,new Go(Pf(t.readTime),new Fo(mu(t.documentKey)),t.largestBatchId)):zo.empty(),r=e.fields.map((function(e){var t=o(e,2),n=t[0],r=t[1];return new jo(Mo.fromServerFormat(n),r)}));return new Vo(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Co(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=yh(e),a=gh(e);return this.In(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return $o.forEach(t,(function(t){return a.put(Uf(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return $o.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?$o.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),$o.forEach(a,(function(r){return n.Tn(e,t,r).next((function(t){var a=n.En(i,r);return t.isEqual(a)?$o.resolve():n.An(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return mh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"vn",value:function(e,t,n,r){return mh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}},{key:"Tn",value:function(e,t,n){var r=mh(e),i=new Qu(Zf);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},(function(e,r){i=i.add(new Jf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"En",value:function(e,t){var n=new Qu(Zf),r=this.wn(t,e);if(null==r)return n;var i=Uo(t);if(null!=i){var a=e.data.field(i.fieldPath);if(bs(a)){var o,u=g(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Jf(t.indexId,e.key,this.fn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Jf(t.indexId,e.key,dh,r));return n}},{key:"An",value:function(e,t,n,r,i){var a=this;uo("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Yu(a),s=Yu(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Yu(o)):l?(i(u),u=Yu(a)):(u=Yu(a),s=Yu(o))}}(r,i,Zf,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.vn(e,t,n,r))})),$o.waitFor(o)}},{key:"In",value:function(e){var t=1;return gh(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Zf(e,t)})).filter((function(e,t,n){return!t||0!==Zf(e,n[t-1])}));var r=[];r.push(e);var i,a=g(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Zf(o,e),s=Zf(o,t);if(0===u)r[0]=e.He();else if(u>0&&s<0)r.push(o),r.push(o.He());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Pn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,dh,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,dh,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Pn",value:function(e,t){return Zf(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(kh)}},{key:"getMinOffset",value:function(e,t){var n=this;return $o.mapArray(this.un(t),(function(t){return n.cn(e,t).next((function(e){return e||fo()}))})).next(kh)}}]),e}();function ph(e){return ju(e,"collectionParents")}function mh(e){return ju(e,"indexEntries")}function yh(e){return ju(e,"indexConfiguration")}function gh(e){return ju(e,"indexState")}function kh(e){ho(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Ho(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Go(t.readTime,t.documentKey,n)}var bh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wh=function(){function e(t,n,r){p(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function xh(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){ho(1===u)})));var c,l=[],f=g(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=ku(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return $o.waitFor(a).next((function(){return l}))}function _h(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw fo();t=e.noDocument}return JSON.stringify(t).length}wh.DEFAULT_COLLECTION_PERCENTILE=10,wh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wh.DEFAULT=new wh(41943040,wh.DEFAULT_COLLECTION_PERCENTILE,wh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wh.DISABLED=new wh(-1,0,0);var Sh=function(){function e(t,n,r,i){p(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.bn={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Th(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Ih(e),o=Th(e);return o.add({}).next((function(u){ho("number"==typeof u);var s,c=new _l(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return df(e.le,t)})),i=n.mutations.map((function(t){return df(e.le,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Qu((function(e,t){return Co(e.canonicalString(),t.canonicalString())})),d=g(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=ku(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(p,bu))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.bn[u]=c.keys()})),$o.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Th(e).get(t).next((function(e){return e?(ho(e.userId===n.userId),Rf(n.serializer,e)):null}))}},{key:"Vn",value:function(e,t){var n=this;return this.bn[t]?$o.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.bn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Th(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(ho(t.batchId>=r),a=Rf(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Th(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Th(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return Rf(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=gu(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Ih(e).X({range:i},(function(r,i,u){var s=o(r,3),c=s[0],l=s[1],f=s[2],h=mu(l);if(c===n.userId&&t.path.isEqual(h))return Th(e).get(f).next((function(e){if(!e)throw fo();ho(e.userId===n.userId),a.push(Rf(n.serializer,e))}));u.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Qu(Co),i=[];return t.forEach((function(t){var a=gu(n.userId,t.path),u=IDBKeyRange.lowerBound(a),s=Ih(e).X({range:u},(function(e,i,a){var u=o(e,3),s=u[0],c=u[1],l=u[2],f=mu(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),$o.waitFor(i).next((function(){return n.Sn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=gu(this.userId,r),u=IDBKeyRange.lowerBound(a),s=new Qu(Co);return Ih(e).X({range:u},(function(e,t,a){var u=o(e,3),c=u[0],l=u[1],f=u[2],h=mu(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.Sn(e,s)}))}},{key:"Sn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Th(e).get(t).next((function(e){if(null===e)throw fo();ho(e.userId===n.userId),r.push(Rf(n.serializer,e))})))})),$o.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return xh(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Dn(t.batchId)})),$o.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Dn",value:function(e){delete this.bn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return $o.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Ih(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=mu(e[1]);i.push(a)}else r.done()})).next((function(){ho(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Eh(e,this.userId,t)}},{key:"Cn",value:function(e){var t=this;return Ch(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"fe",value:function(t,n,r,i){return ho(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Eh(e,t,n){var r=gu(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),u=!1;return Ih(e).X({range:a,Y:!0},(function(e,n,r){var a=o(e,3),s=a[0],c=a[1];a[2];s===t&&c===i&&(u=!0),r.done()})).next((function(){return u}))}function Th(e){return ju(e,"mutations")}function Ih(e){return ju(e,"documentMutations")}function Ch(e){return ju(e,"mutationQueues")}var Ah=function(){function e(t){p(this,e),this.xn=t}return y(e,[{key:"next",value:function(){return this.xn+=2,this.xn}}],[{key:"Nn",value:function(){return new e(0)}},{key:"kn",value:function(){return new e(-1)}}]),e}(),Dh=function(){function e(t,n){p(this,e),this.referenceDelegate=t,this.serializer=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Mn(e).next((function(n){var r=new Ah(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Mn(e).next((function(e){return Po.fromTimestamp(new No(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Mn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Mn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.$n(e,t).next((function(){return n.Mn(e).next((function(r){return r.targetCount+=1,n.Fn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.$n(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Nh(e).delete(t.targetId)})).next((function(){return n.Mn(e)})).next((function(t){return ho(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Nh(e).X((function(o,u){var s=Of(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return $o.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Nh(e).X((function(e,n){var r=Of(n);t(r)}))}},{key:"Mn",value:function(e){return Ph(e).get("targetGlobalKey").next((function(e){return ho(null!==e),e}))}},{key:"On",value:function(e,t){return Ph(e).put("targetGlobalKey",t)}},{key:"$n",value:function(e,t){return Nh(e).put(Lf(this.serializer,t))}},{key:"Fn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Mn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ac(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Nh(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Of(n);oc(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Rh(e);return t.forEach((function(t){var o=du(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),$o.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Rh(e);return $o.forEach(t,(function(t){var a=du(t.path);return $o.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Rh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Rh(e),i=Bc();return r.X({range:n,Y:!0},(function(e,t,n){var r=mu(e[1]),a=new Fo(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=du(t.path),r=IDBKeyRange.bound([n],[Do(n)],!1,!0),i=0;return Rh(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=o(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"he",value:function(e,t){return Nh(e).get(t).next((function(e){return e?Of(e):null}))}}]),e}();function Nh(e){return ju(e,"targets")}function Ph(e){return ju(e,"targetGlobal")}function Rh(e){return ju(e,"targetDocuments")}function Oh(e,t){var n=o(e,2),r=n[0],i=n[1],a=o(t,2),u=a[0],s=a[1],c=Co(r,u);return 0===c?Co(i,s):c}var Lh=function(){function e(t){p(this,e),this.Bn=t,this.buffer=new Qu(Oh),this.Ln=0}return y(e,[{key:"qn",value:function(){return++this.Ln}},{key:"Un",value:function(e){var t=[e,this.qn()];if(this.buffer.size<this.Bn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Oh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Mh=function(){function e(t,n,r){p(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Kn=null}return y(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}},{key:"stop",value:function(){this.Kn&&(this.Kn.cancel(),this.Kn=null)}},{key:"started",get:function(){return null!==this.Kn}},{key:"Gn",value:function(e){var t=this;uo("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Kn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Kn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!nu(e.t0)){e.next=12;break}uo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Xo(e.t0);case 14:return e.next=16,t.Gn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Fh=function(){function e(t,n){p(this,e),this.Qn=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.Qn.jn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return $o.resolve(cu.ct);var r=new Lh(t);return this.Qn.forEachTarget(e,(function(e){return r.Un(e.sequenceNumber)})).next((function(){return n.Qn.zn(e,(function(e){return r.Un(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Qn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Qn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(uo("LruGarbageCollector","Garbage collection skipped; disabled"),$o.resolve(bh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(uo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),bh):n.Wn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Qn.getCacheSize(e)}},{key:"Wn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(uo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),oo()<=oe.DEBUG&&uo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),$o.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Vh(e,t){return new Fh(e,t)}var Uh=function(){function e(t,n){p(this,e),this.db=t,this.garbageCollector=Vh(this,n)}return y(e,[{key:"jn",value:function(e){var t=this.Hn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Hn",value:function(e){var t=0;return this.zn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"zn",value:function(e,t){return this.Jn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Bh(e,n)}},{key:"removeReference",value:function(e,t,n){return Bh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Bh(e,t)}},{key:"Yn",value:function(e,t){return function(e,t){var n=!1;return Ch(e).Z((function(r){return Eh(e,r,t).next((function(e){return e&&(n=!0),$o.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Jn(e,(function(o,u){if(u<=t){var s=n.Yn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Po.min()),Rh(e).delete([0,du(o.path)])}))}));i.push(s)}})).next((function(){return $o.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Bh(e,t)}},{key:"Jn",value:function(e,t){var n,r=Rh(e),i=cu.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=o(e,2),u=a[0],s=(a[1],r.path),c=r.sequenceNumber;0===u?(i!==cu.ct&&t(new Fo(mu(n)),i),i=c,n=s):i=cu.ct})).next((function(){i!==cu.ct&&t(new Fo(mu(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Bh(e,t){return Rh(e).put(function(e,t){return{targetId:0,path:du(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var jh=function(){function e(){p(this,e),this.changes=new Ac((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ps.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?$o.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),zh=function(){function e(t){p(this,e),this.serializer=t}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Hh(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Hh(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Df(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Xn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Ps.newInvalidDocument(t);return Hh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Wh(t))},(function(e,i){r=n.Zn(t,i)})).next((function(){return r}))}},{key:"ts",value:function(e,t){var n=this,r={size:0,document:Ps.newInvalidDocument(t)};return Hh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Wh(t))},(function(e,i){r={document:n.Zn(t,i),size:_h(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Nc();return this.es(e,t,(function(e,t){var i=n.Zn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ns",value:function(e,t){var n=this,r=Nc(),i=new Gu(Fo.comparator);return this.es(e,t,(function(e,t){var a=n.Zn(e,t);r=r.insert(e,a),i=i.insert(e,_h(t))})).next((function(){return{documents:r,ss:i}}))}},{key:"es",value:function(e,t,n){if(t.isEmpty())return $o.resolve();var r=new Qu(Xh);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Wh(r.first()),Wh(r.last())),a=r.getIterator(),o=a.getNext();return Hh(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Fo.fromSegments([].concat(Z(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Xh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(Wh(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Df(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hh(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=Nc(),o=g(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Zn(Fo.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Ec(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Nc(),o=Qh(t,n),u=Qh(t,Go.max());return Hh(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Zn(Fo.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Kh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Gh(e).get("remoteDocumentGlobalKey").next((function(e){return ho(!!e),e}))}},{key:"Xn",value:function(e,t){return Gh(e).put("remoteDocumentGlobalKey",t)}},{key:"Zn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=ff(e.le,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Fo.fromSegments(t.noDocument.path),i=Pf(t.noDocument.readTime);n=Ps.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return fo();var a=Fo.fromSegments(t.unknownDocument.path),o=Pf(t.unknownDocument.version);n=Ps.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new No(e[0],e[1]);return Po.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Po.min()))return n}return Ps.newInvalidDocument(e)}}]),e}();function qh(e){return new zh(e)}var Kh=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).rs=e,i.trackRemovals=r,i.os=new Ac((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Qu((function(e,t){return Co(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.os.get(a);if(n.push(t.rs.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Af(t.rs.serializer,o);i=i.add(a.path.popLast());var c=_h(s);r+=c-u.size,n.push(t.rs.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Af(t.rs.serializer,o.convertToNoDocument(Po.min()));n.push(t.rs.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.rs.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.rs.updateMetadata(e,r)),$o.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.rs.ts(e,t).next((function(e){return n.os.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.rs.ns(e,t).next((function(e){var t=e.documents;return e.ss.forEach((function(e,r){n.os.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(jh);function Gh(e){return ju(e,"remoteDocumentGlobal")}function Hh(e){return ju(e,"remoteDocumentsV14")}function Wh(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Qh(e,t){var n=t.documentKey.path.toArray();return[e,Df(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Xh(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Co(n[a],r[a]))return i;return(i=Co(n.length,r.length))||((i=Co(n[n.length-2],r[r.length-2]))||Co(n[n.length-1],r[r.length-1]))}var Yh=y((function e(t,n){p(this,e),this.overlayedDocument=t,this.mutatedFields=n})),$h=function(){function e(t,n,r,i){p(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return y(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&fl(r.mutation,e,$u.empty(),No.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Bc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bc(),i=Lc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Rc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Lc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Bc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Nc(),a=Fc(),o=Fc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof pl)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),fl(o.mutation,t,o.mutation.getFieldMask(),No.now())):a.set(t.key,$u.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Yh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Fc(),i=new Gu((function(e,t){return e-t})),a=Bc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=g(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||$u.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Bc()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Mc();c.forEach((function(e){if(!a.has(e)){var n=cl(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return $o.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Fo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):yc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):$o.resolve(Lc()),u=-1,s=a;return o.next((function(t){return $o.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?$o.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Bc())})).next((function(e){return{batchId:u,changes:Oc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Fo(t)).next((function(e){var t=Rc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Rc();return this.indexManager.getCollectionParents(e,i).next((function(o){return $o.forEach(o,(function(o){var u=function(e,t){return new fc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ps.newInvalidDocument(r)))}));var n=Rc();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&fl(a.mutation,i,$u.empty(),No.now()),Ec(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),Jh=function(){function e(t){p(this,e),this.serializer=t,this.us=new Map,this.cs=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return $o.resolve(this.us.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.us.set(t.id,{id:(n=t).id,version:n.version,createTime:ef(n.createTime)}),$o.resolve()}},{key:"getNamedQuery",value:function(e,t){return $o.resolve(this.cs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.cs.set(t.name,function(e){return{name:e.name,query:Mf(e.bundledQuery),readTime:ef(e.readTime)}}(t)),$o.resolve()}}]),e}(),Zh=function(){function e(){p(this,e),this.overlays=new Gu(Fo.comparator),this.hs=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return $o.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Lc();return $o.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.de(e,t,i)})),$o.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.hs.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.hs.delete(n)),$o.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Lc(),i=t.length+1,a=new Fo(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return $o.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Gu((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Lc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Lc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return $o.resolve(s)}},{key:"de",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.hs.get(r.largestBatchId).delete(n.key);this.hs.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new El(t,n));var a=this.hs.get(t);void 0===a&&(a=Bc(),this.hs.set(t,a)),this.hs.set(t,a.add(n.key))}}]),e}(),ed=function(){function e(){p(this,e),this.ls=new Qu(td.fs),this.ds=new Qu(td._s)}return y(e,[{key:"isEmpty",value:function(){return this.ls.isEmpty()}},{key:"addReference",value:function(e,t){var n=new td(e,t);this.ls=this.ls.add(n),this.ds=this.ds.add(n)}},{key:"ws",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.gs(new td(e,t))}},{key:"ys",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ps",value:function(e){var t=this,n=new Fo(new Oo([])),r=new td(n,e),i=new td(n,e+1),a=[];return this.ds.forEachInRange([r,i],(function(e){t.gs(e),a.push(e.key)})),a}},{key:"Is",value:function(){var e=this;this.ls.forEach((function(t){return e.gs(t)}))}},{key:"gs",value:function(e){this.ls=this.ls.delete(e),this.ds=this.ds.delete(e)}},{key:"Ts",value:function(e){var t=new Fo(new Oo([])),n=new td(t,e),r=new td(t,e+1),i=Bc();return this.ds.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new td(e,0),n=this.ls.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),td=function(){function e(t,n){p(this,e),this.key=t,this.Es=n}return y(e,null,[{key:"fs",value:function(e,t){return Fo.comparator(e.key,t.key)||Co(e.Es,t.Es)}},{key:"_s",value:function(e,t){return Co(e.Es,t.Es)||Fo.comparator(e.key,t.key)}}]),e}(),nd=function(){function e(t,n){p(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.As=1,this.Rs=new Qu(td.fs)}return y(e,[{key:"checkEmpty",value:function(e){return $o.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.As;this.As++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new _l(i,t,n,r);this.mutationQueue.push(a);var o,u=g(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new td(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return $o.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return $o.resolve(this.vs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ps(n),i=r<0?0:r;return $o.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return $o.resolve(0===this.mutationQueue.length?-1:this.As-1)}},{key:"getAllMutationBatches",value:function(e){return $o.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new td(t,0),i=new td(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.vs(e.Es);a.push(t)})),$o.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Qu(Co);return t.forEach((function(e){var t=new td(e,0),i=new td(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.Es)}))})),$o.resolve(this.bs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Fo.isDocumentKey(i)||(i=i.child(""));var a=new td(new Fo(i),0),o=new Qu(Co);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Es)),!0)}),a),$o.resolve(this.bs(o))}},{key:"bs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.vs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;ho(0===this.Vs(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return $o.forEach(t.mutations,(function(i){var a=new td(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new td(t,0),r=this.Rs.firstAfterOrEqual(n);return $o.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,$o.resolve()}},{key:"Vs",value:function(e,t){return this.Ps(e)}},{key:"Ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"vs",value:function(e){var t=this.Ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),rd=function(){function e(t){p(this,e),this.Ss=t,this.docs=new Gu(Fo.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ss(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return $o.resolve(n?n.document.mutableCopy():Ps.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Nc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ps.newInvalidDocument(e))})),$o.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Nc(),a=t.path,o=new Fo(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Ho(Ko(l),n)<=0||(r.has(l.key)||Ec(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return $o.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){fo()}},{key:"Ds",value:function(e,t){return $o.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new id(this)}},{key:"getSize",value:function(e){return $o.resolve(this.size)}}]),e}(),id=function(e){w(n,e);var t=S(n);function n(e){var r;return p(this,n),(r=t.call(this)).rs=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.rs.addEntry(e,i)):t.rs.removeEntry(r)})),$o.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.rs.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.rs.getEntries(e,t)}}]),n}(jh),ad=function(){function e(t){p(this,e),this.persistence=t,this.Cs=new Ac((function(e){return ac(e)}),oc),this.lastRemoteSnapshotVersion=Po.min(),this.highestTargetId=0,this.xs=0,this.Ns=new ed,this.targetCount=0,this.ks=Ah.Nn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.Cs.forEach((function(e,n){return t(n)})),$o.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return $o.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return $o.resolve(this.xs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.ks.next(),$o.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.xs&&(this.xs=t),$o.resolve()}},{key:"$n",value:function(e){this.Cs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ks=new Ah(t),this.highestTargetId=t),e.sequenceNumber>this.xs&&(this.xs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.$n(t),this.targetCount+=1,$o.resolve()}},{key:"updateTargetData",value:function(e,t){return this.$n(t),$o.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Cs.delete(t.target),this.Ns.ps(t.targetId),this.targetCount-=1,$o.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Cs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Cs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),$o.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return $o.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Cs.get(t)||null;return $o.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ns.ws(t,n),$o.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ns.ys(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),$o.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ns.ps(t),$o.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ns.Ts(t);return $o.resolve(n)}},{key:"containsKey",value:function(e,t){return $o.resolve(this.Ns.containsKey(t))}}]),e}(),od=function(){function e(t,n){var r=this;p(this,e),this.Ms={},this.overlays={},this.Os=new cu(0),this.$s=!1,this.$s=!0,this.referenceDelegate=t(this),this.Fs=new ad(this),this.indexManager=new fh,this.remoteDocumentCache=new rd((function(e){return r.referenceDelegate.Bs(e)})),this.serializer=new Cf(n),this.Ls=new Jh(this.serializer)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.$s=!1,Promise.resolve()}},{key:"started",get:function(){return this.$s}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Zh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ms[e.toKey()];return n||(n=new nd(t,this.referenceDelegate),this.Ms[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Fs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ls}},{key:"runTransaction",value:function(e,t,n){var r=this;uo("MemoryPersistence","Starting transaction:",e);var i=new ud(this.Os.next());return this.referenceDelegate.qs(),n(i).next((function(e){return r.referenceDelegate.Us(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ks",value:function(e,t){return $o.or(Object.values(this.Ms).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),ud=function(e){w(n,e);var t=S(n);function n(e){var r;return p(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(Qo),sd=function(){function e(t){p(this,e),this.persistence=t,this.Gs=new ed,this.Qs=null}return y(e,[{key:"zs",get:function(){if(this.Qs)return this.Qs;throw fo()}},{key:"addReference",value:function(e,t,n){return this.Gs.addReference(n,t),this.zs.delete(n.toString()),$o.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Gs.removeReference(n,t),this.zs.add(n.toString()),$o.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zs.add(t.toString()),$o.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Gs.ps(t.targetId).forEach((function(e){return n.zs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"qs",value:function(){this.Qs=new Set}},{key:"Us",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $o.forEach(this.zs,(function(r){var i=Fo.fromPath(r);return t.Ws(e,i).next((function(e){e||n.removeEntry(i,Po.min())}))})).next((function(){return t.Qs=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ws(e,t).next((function(e){e?n.zs.delete(t.toString()):n.zs.add(t.toString())}))}},{key:"Bs",value:function(e){return 0}},{key:"Ws",value:function(e,t){var n=this;return $o.or([function(){return $o.resolve(n.Gs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ks(e,t)}])}}],[{key:"js",value:function(t){return new e(t)}}]),e}(),cd=function(){function e(t){p(this,e),this.serializer=t}return y(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Jo("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yu,{unique:!0}),e.createObjectStore("documentMutations")}(e),ld(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=$o.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ld(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Po.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yu,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return $o.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Js(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ys(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Xs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Zs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ti(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Pu});t.createIndex("collectionPathOverlayIndex",Ru,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ou,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:wu});t.createIndex("documentKeyIndex",xu),t.createIndex("collectionGroupIndex",_u)}(e)})).next((function(){return i.ei(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.ni(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Cu}).createIndex("sequenceNumberIndex",Au,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Du}).createIndex("documentKeyIndex",Nu,{unique:!1})}(e)}))),o}},{key:"Ys",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=_h(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Js",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return $o.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return $o.forEach(r,(function(r){ho(r.userId===n.userId);var i=Rf(t.serializer,r);return xh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Xs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new Oo(n),o=function(e){return[0,du(e)]}(a);r.push(t.get(o).next((function(n){return n?$o.resolve():function(n){return t.put({targetId:0,path:du(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return $o.waitFor(r)}))}))}},{key:"Zs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Iu});var n=t.store("collectionParents"),r=new hh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:du(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new Oo(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=o(e,3),r=(n[0],n[1]),a=(n[2],mu(r));return i(a.popLast())}))}))}},{key:"ti",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=Of(r),a=Lf(t.serializer,i);return n.put(a)}))}},{key:"ei",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Fo(Oo.fromString(i.document.name).popFirst(5)):i.noDocument?Fo.fromSegments(i.noDocument.path):i.unknownDocument?Fo.fromSegments(i.unknownDocument.path):fo()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return $o.waitFor(r)}))}},{key:"ni",value:function(e,t){var n=this,r=t.store("mutations"),i=qh(this.serializer),a=new od(sd.js,this.serializer.le);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Bc();Rf(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),$o.forEach(r,(function(e,r){var o=new ro(r),u=qf.fe(n.serializer,o),s=a.getIndexManager(o),c=Sh.fe(o,n.serializer,s,a.referenceDelegate);return new $h(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Bu(t,cu.ct),e).next()}))}))}}]),e}();function ld(e){e.createObjectStore("targetDocuments",{keyPath:Eu}).createIndex("documentTargetsIndex",Tu,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Su,{unique:!0}),e.createObjectStore("targetGlobal")}var fd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",hd=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(p(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.si=a,this.window=o,this.document=u,this.ii=c,this.ri=l,this.oi=f,this.Os=null,this.$s=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.ai=null,this.hi=Number.NEGATIVE_INFINITY,this.li=function(e){return Promise.resolve()},!e.D())throw new mo(po.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Uh(this,i),this.fi=n+"main",this.serializer=new Cf(s),this.di=new Zo(this.fi,this.oi,new cd(this.serializer)),this.Fs=new Dh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qh(this.serializer),this.Ls=new Bf,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&so("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.wi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new mo(po.FAILED_PRECONDITION,fd);return e.mi(),e.gi(),e.yi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Fs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new cu(t,e.ii)})).then((function(){e.$s=!0})).catch((function(t){return e.di&&e.di.close(),Promise.reject(t)}))}},{key:"pi",value:function(e){var t=this;return this.li=function(){var n=te(J().mark((function n(r){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.di.B(function(){var t=te(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.wi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"wi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return vd(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ii(t).next((function(t){t||(e.isPrimary=!1,e.si.enqueueRetryable((function(){return e.li(!1)})))}))})).next((function(){return e.Ti(t)})).next((function(n){return e.isPrimary&&!n?e.Ei(t).next((function(){return!1})):!!n&&e.Ai(t).next((function(){return!0}))}))})).catch((function(t){if(nu(t))return uo("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return uo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.si.enqueueRetryable((function(){return e.li(t)})),e.isPrimary=t}))}},{key:"Ii",value:function(e){var t=this;return dd(e).get("owner").next((function(e){return $o.resolve(t.Ri(e))}))}},{key:"vi",value:function(e){return vd(e).delete(this.clientId)}},{key:"Pi",value:function(){var e=te(J().mark((function e(){var t,n,r,i,a=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.bi(this.hi,18e5)){e.next=6;break}return this.hi=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ju(e,"clientMetadata");return t.j().next((function(e){var n=a.Vi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return $o.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=g(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Si(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"yi",value:function(){var e=this;this.ai=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.wi().then((function(){return e.Pi()})).then((function(){return e.yi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ti",value:function(e){var t=this;return this.ri?$o.resolve(!0):dd(e).get("owner").next((function(n){if(null!==n&&t.bi(n.leaseTimestampMs,5e3)&&!t.Di(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new mo(po.FAILED_PRECONDITION,fd);return!1}}return!(!t.networkEnabled||!t.inForeground)||vd(e).j().next((function(e){return void 0===t.Vi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&uo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=te(J().mark((function e(){var t=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$s=!1,this.Ci(),this.ai&&(this.ai.cancel(),this.ai=null),this.xi(),this.Ni(),e.next=7,this.di.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Bu(e,cu.ct);return t.Ei(n).next((function(){return t.vi(n)}))}));case 7:this.di.close(),this.ki();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vi",value:function(e,t){var n=this;return e.filter((function(e){return n.bi(e.updateTimeMs,t)&&!n.Di(e.clientId)}))}},{key:"Mi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return vd(t).j().next((function(t){return e.Vi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.$s}},{key:"getMutationQueue",value:function(e,t){return Sh.fe(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Fs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new vh(e,this.serializer.le.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return qf.fe(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Ls}},{key:"runTransaction",value:function(e,t,n){var r=this;uo("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.oi)?Uu:14===i?Vu:13===i?Fu:12===i?Mu:11===i?Lu:void fo();return this.di.runTransaction(e,o,u,(function(i){return a=new Bu(i,r.Os?r.Os.next():cu.ct),"readwrite-primary"===t?r.Ii(a).next((function(e){return!!e||r.Ti(a)})).next((function(t){if(!t)throw so("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.si.enqueueRetryable((function(){return r.li(!1)})),new mo(po.FAILED_PRECONDITION,Wo);return n(a)})).next((function(e){return r.Ai(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return dd(e).get("owner").next((function(e){if(null!==e&&t.bi(e.leaseTimestampMs,5e3)&&!t.Di(e.ownerId)&&!t.Ri(e)&&!(t.ri||t.allowTabSynchronization&&e.allowTabSynchronization))throw new mo(po.FAILED_PRECONDITION,fd)}))}},{key:"Ai",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dd(e).put("owner",t)}},{key:"Ei",value:function(e){var t=this,n=dd(e);return n.get("owner").next((function(e){return t.Ri(e)?(uo("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):$o.resolve()}))}},{key:"bi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(so("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"mi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=function(){e.si.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.wi()}))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}},{key:"xi",value:function(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}},{key:"gi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=function(){t.Ci();var e=/(?:Version|Mobile)\/1[456]/;!B()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.si.enterRestrictedMode(!0),t.si.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ui))}},{key:"Ni",value:function(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}},{key:"Di",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Si(e)));return uo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return so("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ci",value:function(){if(this._i)try{this._i.setItem(this.Si(this.clientId),String(Date.now()))}catch(e){so("Failed to set zombie client id.",e)}}},{key:"ki",value:function(){if(this._i)try{this._i.removeItem(this.Si(this.clientId))}catch(e){}}},{key:"Si",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Zo.D()}}]),e}();function dd(e){return ju(e,"owner")}function vd(e){return ju(e,"clientMetadata")}function pd(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var md=function(){function e(t,n,r,i){p(this,e),this.targetId=t,this.fromCache=n,this.$i=r,this.Fi=i}return y(e,null,[{key:"Bi",value:function(t,n){var r,i=Bc(),a=Bc(),o=g(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),yd=function(){function e(){p(this,e),this.Li=!1}return y(e,[{key:"initialize",value:function(e,t){this.qi=e,this.indexManager=t,this.Li=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ui(e,t).next((function(a){return a||i.Ki(e,t,r,n)})).next((function(n){return n||i.Gi(e,t)}))}},{key:"Ui",value:function(e,t){var n=this;if(vc(t))return $o.resolve(null);var r=kc(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=wc(t,null,"F"),r=kc(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Bc.apply(void 0,Z(i));return n.qi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Qi(t,i);return n.ji(t,o,a,r.readTime)?n.Ui(e,wc(t,null,"F")):n.zi(e,o,t,r)}))}))})))}))}},{key:"Ki",value:function(e,t,n,r){var i=this;return vc(t)||r.isEqual(Po.min())?this.Gi(e,t):this.qi.getDocuments(e,n).next((function(a){var o=i.Qi(t,a);return i.ji(t,o,n,r)?i.Gi(e,t):(oo()<=oe.DEBUG&&uo("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Sc(t)),i.zi(e,o,t,qo(r,-1)))}))}},{key:"Qi",value:function(e,t){var n=new Qu(Ic(e));return t.forEach((function(t,r){Ec(e,r)&&(n=n.add(r))})),n}},{key:"ji",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Gi",value:function(e,t){return oo()<=oe.DEBUG&&uo("QueryEngine","Using full collection scan to execute query:",Sc(t)),this.qi.getDocumentsMatchingQuery(e,t,Go.min())}},{key:"zi",value:function(e,t,n,r){return this.qi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),gd=function(){function e(t,n,r,i){p(this,e),this.persistence=t,this.Wi=n,this.serializer=i,this.Hi=new Gu(Co),this.Ji=new Ac((function(e){return ac(e)}),oc),this.Yi=new Map,this.Xi=t.getRemoteDocumentCache(),this.Fs=t.getTargetCache(),this.Ls=t.getBundleCache(),this.Zi(r)}return y(e,[{key:"Zi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $h(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Wi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Hi)}))}}]),e}();function kd(e,t,n,r){return new gd(e,t,n,r)}function bd(e,t){return wd.apply(this,arguments)}function wd(){return wd=te(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Zi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Bc(),s=g(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=g(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,v=g(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var m,y=g(p.mutations);try{for(y.s();!(m=y.n()).done;){var k=m.value;u=u.add(k.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){v.e(b)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{tr:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),wd.apply(this,arguments)}function xd(e,t){var n=vo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=$o.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);ho(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Bc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function _d(e){var t=vo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Fs.getLastRemoteSnapshotVersion(e)}))}function Sd(e,t){var n=vo(e),r=t.snapshotVersion,i=n.Hi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Xi.newChangeBuffer({trackRemovals:!0});i=n.Hi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Zu.EMPTY_BYTE_STRING,Po.min()).withLastLimboFreeSnapshotVersion(Po.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Fs.updateTargetData(e,c))}}));var u=Nc(),s=Bc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ed(e,a,t.documentUpdates).next((function(e){u=e.er,s=e.nr}))),!r.isEqual(Po.min())){var c=n.Fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return $o.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Hi=i,e}))}function Ed(e,t,n){var r=Bc(),i=Bc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Nc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Po.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):uo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{er:r,nr:i}}))}function Td(e,t){var n=vo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Id(e,t){var n=vo(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Fs.getTargetData(e,t).next((function(i){return i?(r=i,$o.resolve(r)):n.Fs.allocateTargetId(e).next((function(i){return r=new If(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Hi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Hi=n.Hi.insert(e.targetId,e),n.Ji.set(t,e.targetId)),e}))}function Cd(e,t,n){return Ad.apply(this,arguments)}function Ad(){return Ad=te(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=vo(t),a=i.Hi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),nu(e.t1)){e.next=12;break}throw e.t1;case 12:uo("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Hi=i.Hi.remove(n),i.Ji.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Ad.apply(this,arguments)}function Dd(e,t,n){var r=vo(e),i=Po.min(),a=Bc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=vo(e),i=r.Ji.get(n);return void 0!==i?$o.resolve(r.Hi.get(i)):r.Fs.getTargetData(t,n)}(r,e,kc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Wi.getDocumentsMatchingQuery(e,t,n?i:Po.min(),n?a:Bc())})).next((function(e){return Rd(r,Tc(t),e),{documents:e,sr:a}}))}))}function Nd(e,t){var n=vo(e),r=vo(n.Fs),i=n.Hi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.he(e,t).next((function(e){return e?e.target:null}))}))}function Pd(e,t){var n=vo(e),r=n.Yi.get(t)||Po.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Xi.getAllFromCollectionGroup(e,t,qo(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Rd(n,t,e),e}))}function Rd(e,t,n){var r=e.Yi.get(t)||Po.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Yi.set(t,r)}function Od(e,t,n,r){return Ld.apply(this,arguments)}function Ld(){return Ld=te(J().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,v;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=vo(t),o=Bc(),u=Nc(),s=g(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.ir(l.metadata.name),l.document&&(o=o.add(f)),(h=n.rr(l)).setReadTime(n.ur(l.metadata.readTime)),u=u.insert(f,h)}catch(p){s.e(p)}finally{s.f()}return d=a.Xi.newChangeBuffer({trackRemovals:!0}),e.next=7,Id(a,function(e){return kc(dc(Oo.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Ed(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Fs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Fs.addMatchingKeys(e,o,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.er,t.nr)})).next((function(){return t.er}))}))})));case 9:case"end":return e.stop()}}),e)}))),Ld.apply(this,arguments)}function Md(e,t){return Fd.apply(this,arguments)}function Fd(){return Fd=te(J().mark((function e(t,n){var r,i,a,o=arguments;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Bc(),e.next=3,Id(t,kc(Mf(n.bundledQuery)));case 3:return i=e.sent,a=vo(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ef(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ls.saveNamedQuery(e,n);var o=i.withResumeToken(Zu.EMPTY_BYTE_STRING,t);return a.Hi=a.Hi.insert(o.targetId,o),a.Fs.updateTargetData(e,o).next((function(){return a.Fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ls.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Fd.apply(this,arguments)}function Vd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Ud(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Bd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var jd=function(){function e(t,n,r,i){p(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"ar",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new mo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(so("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),zd=function(){function e(t,n,r){p(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"ar",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"cr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new mo(i.error.code,i.error.message))),a?new e(t,i.state,r):(so("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),qd=function(){function e(t,n){p(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"cr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=zc(),o=0;i&&o<r.activeTargetIds.length;++o)i=hu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(so("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Kd=function(){function e(t,n){p(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"cr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(so("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Gd=function(){function e(){p(this,e),this.activeTargetIds=zc()}return y(e,[{key:"hr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"ar",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Hd=function(){function e(t,n,r,i,a){p(this,e),this.window=t,this.si=n,this.persistenceKey=r,this.dr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.wr.bind(this),this.mr=new Gu(Co),this.started=!1,this.gr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.yr=Vd(this.persistenceKey,this.dr),this.pr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.mr=this.mr.insert(this.dr,new Gd),this.Ir=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Tr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Er=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Ar=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return y(e,[{key:"start",value:function(){var e=te(J().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Mi();case 2:t=e.sent,n=g(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.dr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Vd(this.persistenceKey,i)))&&(o=qd.cr(i,a))&&(this.mr=this.mr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.vr(),(u=this.storage.getItem(this.Ar))&&(s=this.Pr(u))&&this.br(s),c=g(this.gr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.wr(f)}catch(d){c.e(d)}finally{c.f()}this.gr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.pr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Vr(this.mr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.mr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Sr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Sr(e,t,n),this.Dr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Bd(this.persistenceKey,e));if(n){var r=zd.cr(e,n);r&&(t=r.state)}}return this.Cr.hr(e),this.vr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Cr.lr(e),this.vr()}},{key:"isLocalQueryTarget",value:function(e){return this.Cr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Bd(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Nr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Dr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.kr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Mr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.yr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return uo("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){uo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){uo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"wr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(uo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.yr)return void so("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(te(J().mark((function e(){var r,i,a,o,u,s,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Ir.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.$r(r,null));case 6:if(!(i=t.Fr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.$r(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Tr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Br(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Lr(a));case 16:e.next=41;break;case 18:if(!t.Er.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.qr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Ur(o));case 23:e.next=41;break;case 25:if(n.key!==t.Ar){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.br(u));case 30:e.next=41;break;case 32:if(n.key!==t.pr){e.next=37;break}s=function(e){var t=cu.ct;if(null!=e)try{var n=JSON.parse(e);ho("number"==typeof n),t=n}catch(e){so("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==cu.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Kr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Gr(e)})));case 41:e.next=44;break;case 43:t.gr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Cr",get:function(){return this.mr.get(this.dr)}},{key:"vr",value:function(){this.setItem(this.yr,this.Cr.ar())}},{key:"Sr",value:function(e,t,n){var r=new jd(this.currentUser,e,t,n),i=Ud(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ar())}},{key:"Dr",value:function(e){var t=Ud(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"kr",value:function(e){var t={clientId:this.dr,onlineState:e};this.storage.setItem(this.Ar,JSON.stringify(t))}},{key:"Nr",value:function(e,t,n){var r=Bd(this.persistenceKey,e),i=new zd(e,t,n);this.setItem(r,i.ar())}},{key:"Mr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Ir.exec(e);return t?t[1]:null}},{key:"Fr",value:function(e,t){var n=this.Or(e);return qd.cr(n,t)}},{key:"Br",value:function(e,t){var n=this.Tr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return jd.cr(new ro(i),r,t)}},{key:"qr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]);return zd.cr(r,t)}},{key:"Pr",value:function(e){return Kd.cr(e)}},{key:"Kr",value:function(e){return JSON.parse(e)}},{key:"Lr",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Qr(t.batchId,t.state,t.error));case 2:uo("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ur",value:function(e){return this.syncEngine.jr(e.targetId,e.state,e.error)}},{key:"$r",value:function(e,t){var n=this,r=t?this.mr.insert(e,t):this.mr.remove(e),i=this.Vr(this.mr),a=this.Vr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.zr(o,u).then((function(){n.mr=r}))}},{key:"br",value:function(e){this.mr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Vr",value:function(e){var t=zc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Wd=function(){function e(){p(this,e),this.Wr=new Gd,this.Hr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Wr.hr(e),this.Hr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Hr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Wr.lr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Wr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Hr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Wr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Wr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Wr=new Gd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Qd=function(){function e(){p(this,e)}return y(e,[{key:"Jr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Xd=function(){function e(){var t=this;p(this,e),this.Yr=function(){return t.Xr()},this.Zr=function(){return t.eo()},this.no=[],this.so()}return y(e,[{key:"Jr",value:function(e){this.no.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Yr),window.removeEventListener("offline",this.Zr)}},{key:"so",value:function(){window.addEventListener("online",this.Yr),window.addEventListener("offline",this.Zr)}},{key:"Xr",value:function(){uo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=g(this.no);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"eo",value:function(){uo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=g(this.no);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Yd=null;function $d(){return null===Yd?Yd=268435456+Math.round(2147483648*Math.random()):Yd++,"0x"+Yd.toString(16)}var Jd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Zd=function(){function e(t){p(this,e),this.io=t.io,this.ro=t.ro}return y(e,[{key:"oo",value:function(e){this.uo=e}},{key:"co",value:function(e){this.ao=e}},{key:"onMessage",value:function(e){this.ho=e}},{key:"close",value:function(){this.ro()}},{key:"send",value:function(e){this.io(e)}},{key:"lo",value:function(){this.uo()}},{key:"fo",value:function(e){this.ao(e)}},{key:"_o",value:function(e){this.ho(e)}}]),e}(),ev="WebChannelConnection",tv=function(e){w(n,e);var t=S(n);function n(e){var r;return p(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return y(n,[{key:"Eo",value:function(e,t,n,r){var i=$d();return new Promise((function(a,o){var u=new Za;u.setWithCredentials(!0),u.listenOnce(Qa.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Wa.NO_ERROR:var t=u.getResponseJson();uo(ev,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Wa.TIMEOUT:uo(ev,"RPC '".concat(e,"' ").concat(i," timed out")),o(new mo(po.DEADLINE_EXCEEDED,"Request time out"));break;case Wa.HTTP_ERROR:var n=u.getStatus();if(uo(ev,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(po).indexOf(t)>=0?t:po.UNKNOWN}(s.status);o(new mo(c,s.message))}else o(new mo(po.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new mo(po.UNAVAILABLE,"Connection failed."));break;default:fo()}}finally{uo(ev,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);uo(ev,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=$d(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Ga(),o=Ha(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new $a({})),this.To(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");uo(ev,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new Zd({io:function(t){f?uo(ev,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(uo(ev,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),uo(ev,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ro:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Ja.EventType.OPEN,(function(){f||uo(ev,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Ja.EventType.CLOSE,(function(){f||(f=!0,uo(ev,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.fo())})),d(c,Ja.EventType.ERROR,(function(t){f||(f=!0,co(ev,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.fo(new mo(po.UNAVAILABLE,"The operation could not be completed")))})),d(c,Ja.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];ho(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){uo(ev,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=kl[e];if(void 0!==t)return Cl(t)}(u),l=o.message;void 0===s&&(s=po.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.fo(new mo(s,l)),c.close()}else uo(ev,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h._o(i)}})),d(o,Xa.STAT_EVENT,(function(t){t.stat===Ya.PROXY?uo(ev,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ya.NOPROXY&&uo(ev,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.lo()}),0),h}}]),n}(function(){function e(t){p(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.wo=n+"://"+t.host,this.mo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return y(e,[{key:"yo",get:function(){return!1}},{key:"po",value:function(e,t,n,r,i){var a=$d(),o=this.Io(e,t);uo("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.To(u,r,i),this.Eo(e,o,u,n).then((function(t){return uo("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw co("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Ao",value:function(e,t,n,r,i,a){return this.po(e,t,n,r,i)}},{key:"To",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+io,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Io",value:function(e,t){var n=Jd[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}}]),e}());function nv(){return"undefined"!=typeof window?window:null}function rv(){return"undefined"!=typeof document?document:null}function iv(e){return new Xl(e,!0)}var av=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;p(this,e),this.si=t,this.timerId=n,this.vo=r,this.Po=i,this.bo=a,this.Vo=0,this.So=null,this.Do=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.Vo=0}},{key:"Co",value:function(){this.Vo=this.bo}},{key:"xo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Vo+this.No()),r=Math.max(0,Date.now()-this.Do),i=Math.max(0,n-r);i>0&&uo("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Vo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.So=this.si.enqueueAfterDelay(this.timerId,i,(function(){return t.Do=Date.now(),e()})),this.Vo*=this.Po,this.Vo<this.vo&&(this.Vo=this.vo),this.Vo>this.bo&&(this.Vo=this.bo)}},{key:"ko",value:function(){null!==this.So&&(this.So.skipDelay(),this.So=null)}},{key:"cancel",value:function(){null!==this.So&&(this.So.cancel(),this.So=null)}},{key:"No",value:function(){return(Math.random()-.5)*this.Vo}}]),e}(),ov=function(){function e(t,n,r,i,a,o,u,s){p(this,e),this.si=t,this.Mo=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.$o=0,this.Fo=null,this.Bo=null,this.stream=null,this.Lo=new av(t,n)}return y(e,[{key:"qo",value:function(){return 1===this.state||5===this.state||this.Uo()}},{key:"Uo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Ko()}},{key:"stop",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.qo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Go",value:function(){this.state=0,this.Lo.reset()}},{key:"Qo",value:function(){var e=this;this.Uo()&&null===this.Fo&&(this.Fo=this.si.enqueueAfterDelay(this.Mo,6e4,(function(){return e.jo()})))}},{key:"zo",value:function(e){this.Wo(),this.stream.send(e)}},{key:"jo",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Uo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wo",value:function(){this.Fo&&(this.Fo.cancel(),this.Fo=null)}},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"close",value:function(){var e=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Wo(),this.Ho(),this.Lo.cancel(),this.$o++,4!==t?this.Lo.reset():n&&n.code===po.RESOURCE_EXHAUSTED?(so(n.toString()),so("Using maximum backoff delay to prevent overloading the backend."),this.Lo.Co()):n&&n.code===po.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Jo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.co(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Jo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Yo(this.$o),n=this.$o;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=o(t,2),i=r[0],a=r[1];e.$o===n&&e.Xo(i,a)}),(function(n){t((function(){var t=new mo(po.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Zo(t)}))}))}},{key:"Xo",value:function(e,t){var n=this,r=this.Yo(this.$o);this.stream=this.tu(e,t),this.stream.oo((function(){r((function(){return n.state=2,n.Bo=n.si.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Uo()&&(n.state=3),Promise.resolve()})),n.listener.oo()}))})),this.stream.co((function(e){r((function(){return n.Zo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Ko",value:function(){var e=this;this.state=5,this.Lo.xo(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Zo",value:function(e){return uo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Yo",value:function(e){var t=this;return function(n){t.si.enqueueAndForget((function(){return t.$o===e?n():(uo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),uv=function(e){w(n,e);var t=S(n);function n(e,r,i,a,o,u){var s;return p(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return y(n,[{key:"tu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.Lo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:fo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(ho(void 0===t||"string"==typeof t),Zu.fromBase64String(t||"")):(ho(void 0===t||t instanceof Uint8Array),Zu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?po.UNKNOWN:Cl(e.code);return new mo(t,e.message||"")}(o);n=new jl(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=af(e,s.document.name),l=ef(s.document.updateTime),f=s.document.createTime?ef(s.document.createTime):Po.min(),h=new Ds({mapValue:{fields:s.document.fields}}),d=Ps.newFoundDocument(c,l,f,h),v=s.targetIds||[],p=s.removedTargetIds||[];n=new Ul(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=af(e,m.document),g=m.readTime?ef(m.readTime):Po.min(),k=Ps.newNoDocument(y,g),b=m.removedTargetIds||[];n=new Ul([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=af(e,w.document),_=w.removedTargetIds||[];n=new Ul([],_,x,null)}else{if(!("filter"in t))return fo();t.filter;var S=t.filter;S.targetId;var E=S.count,T=void 0===E?0:E,I=S.unchangedNames,C=new Tl(T,I),A=S.targetId;n=new Bl(A,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Po.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Po.min():t.readTime?ef(t.readTime):Po.min()}(e);return this.listener.eu(t,n)}},{key:"nu",value:function(e){var t={};t.database=sf(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=uc(r)?{documents:pf(e,r)}:{query:mf(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Jl(e,t.resumeToken);var i=Yl(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Po.min())>0){n.readTime=$l(e,t.snapshotVersion.toTimestamp());var a=Yl(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fo()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.zo(t)}},{key:"su",value:function(e){var t={};t.database=sf(this.serializer),t.removeTarget=e,this.zo(t)}}]),n}(ov),sv=function(e){w(n,e);var t=S(n);function n(e,r,i,a,o,u){var s;return p(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.iu=!1,s}return y(n,[{key:"ru",get:function(){return this.iu}},{key:"start",value:function(){this.iu=!1,this.lastStreamToken=void 0,At(x(n.prototype),"start",this).call(this)}},{key:"Jo",value:function(){this.iu&&this.ou([])}},{key:"tu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(ho(!!e.streamToken),this.lastStreamToken=e.streamToken,this.iu){this.Lo.reset();var t=function(e,t){return e&&e.length>0?(ho(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ef(e.updateTime):ef(t);return n.isEqual(Po.min())&&(n=ef(t)),new al(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ef(e.commitTime);return this.listener.uu(n,t)}return ho(!e.writeResults||0===e.writeResults.length),this.iu=!0,this.listener.cu()}},{key:"au",value:function(){var e={};e.database=sf(this.serializer),this.zo(e)}},{key:"ou",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return df(t.serializer,e)}))};this.zo(n)}}]),n}(ov),cv=function(e){w(n,e);var t=S(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.hu=!1,o}return y(n,[{key:"lu",value:function(){if(this.hu)throw new mo(po.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"po",value:function(e,t,n){var r=this;return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=o(i,2),u=a[0],s=a[1];return r.connection.po(e,t,n,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===po.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new mo(po.UNKNOWN,e.toString())}))}},{key:"Ao",value:function(e,t,n,r){var i=this;return this.lu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var u=o(a,2),s=u[0],c=u[1];return i.connection.Ao(e,t,n,s,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===po.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new mo(po.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.hu=!0}}]),n}(function(){return y((function e(){p(this,e)}))}());var lv=function(){function e(t,n){p(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.du=0,this._u=null,this.wu=!0}return y(e,[{key:"mu",value:function(){var e=this;0===this.du&&(this.gu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.yu("Backend didn't respond within 10 seconds."),e.gu("Offline"),Promise.resolve()})))}},{key:"pu",value:function(e){"Online"===this.state?this.gu("Unknown"):(this.du++,this.du>=1&&(this.Iu(),this.yu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.gu("Offline")))}},{key:"set",value:function(e){this.Iu(),this.du=0,"Online"===e&&(this.wu=!1),this.gu(e)}},{key:"gu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"yu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.wu?(so(t),this.wu=!1):uo("OnlineStateTracker",t)}},{key:"Iu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),fv=y((function e(t,n,r,i,a){var o=this;p(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Tu=[],this.Eu=new Map,this.Au=new Set,this.Ru=[],this.vu=a,this.vu.Jr((function(e){r.enqueueAndForget(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=xv(o),!e.t0){e.next=5;break}return uo("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=vo(t)).Au.add(4),e.next=4,vv(n);case 4:return n.Pu.set("Unknown"),n.Au.delete(4),e.next=8,hv(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Pu=new lv(r,i)}));function hv(e){return dv.apply(this,arguments)}function dv(){return(dv=te(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xv(t)){e.next=18;break}n=g(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function vv(e){return pv.apply(this,arguments)}function pv(){return(pv=te(J().mark((function e(t){var n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function mv(e,t){var n=vo(e);n.Eu.has(t.targetId)||(n.Eu.set(t.targetId,t),wv(n)?bv(n):$v(n).Uo()&&gv(n,t))}function yv(e,t){var n=vo(e),r=$v(n);n.Eu.delete(t),r.Uo()&&kv(n,t),0===n.Eu.size&&(r.Uo()?r.Qo():xv(n)&&n.Pu.set("Unknown"))}function gv(e,t){if(e.bu.Lt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Po.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}$v(e).nu(t)}function kv(e,t){e.bu.Lt(t),$v(e).su(t)}function bv(e){e.bu=new ql({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},he:function(t){return e.Eu.get(t)||null},oe:function(){return e.datastore.serializer.databaseId}}),$v(e).start(),e.Pu.mu()}function wv(e){return xv(e)&&!$v(e).qo()&&e.Eu.size>0}function xv(e){return 0===vo(e).Au.size}function _v(e){e.bu=void 0}function Sv(e){return Ev.apply(this,arguments)}function Ev(){return(Ev=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Eu.forEach((function(e,n){gv(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tv(e,t){return Iv.apply(this,arguments)}function Iv(){return(Iv=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_v(t),wv(t)?(t.Pu.pu(n),bv(t)):t.Pu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cv(e,t,n){return Av.apply(this,arguments)}function Av(){return Av=te(J().mark((function e(t,n,r){var i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Pu.set("Online"),!(n instanceof jl&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=te(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=g(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Eu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Eu.delete(o),t.bu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),uo("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Dv(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Ul?t.bu.Wt(n):n instanceof Bl?t.bu.ee(n):t.bu.Yt(n),r.isEqual(Po.min())){e.next=29;break}return e.prev=14,e.next=17,_d(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.bu.ue(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Eu.get(r);i&&e.Eu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Eu.get(t);if(r){e.Eu.set(t,r.withResumeToken(Zu.EMPTY_BYTE_STRING,r.snapshotVersion)),kv(e,t);var i=new If(r.target,t,n,r.sequenceNumber);gv(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),uo("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Dv(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Av.apply(this,arguments)}function Dv(e,t,n){return Nv.apply(this,arguments)}function Nv(){return(Nv=te(J().mark((function e(t,n,r){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nu(n)){e.next=2;break}throw n;case 2:return t.Au.add(1),e.next=5,vv(t);case 5:t.Pu.set("Offline"),r||(r=function(){return _d(t.localStore)}),t.asyncQueue.enqueueRetryable(te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uo("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Au.delete(1),e.next=6,hv(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pv(e,t){return t().catch((function(n){return Dv(e,n,t)}))}function Rv(e){return Ov.apply(this,arguments)}function Ov(){return(Ov=te(J().mark((function e(t){var n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=vo(t),r=Jv(n),i=n.Tu.length>0?n.Tu[n.Tu.length-1].batchId:-1;case 2:if(!Lv(n)){e.next=19;break}return e.prev=3,e.next=6,Td(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Tu.length&&r.Qo(),e.abrupt("break",19);case 10:i=a.batchId,Mv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Dv(n,e.t0);case 17:e.next=2;break;case 19:Fv(n)&&Vv(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Lv(e){return xv(e)&&e.Tu.length<10}function Mv(e,t){e.Tu.push(t);var n=Jv(e);n.Uo()&&n.ru&&n.ou(t.mutations)}function Fv(e){return xv(e)&&!Jv(e).qo()&&e.Tu.length>0}function Vv(e){Jv(e).start()}function Uv(e){return Bv.apply(this,arguments)}function Bv(){return(Bv=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jv(t).au();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jv(e){return zv.apply(this,arguments)}function zv(){return(zv=te(J().mark((function e(t){var n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Jv(t),r=g(t.Tu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.ou(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qv(e,t,n){return Kv.apply(this,arguments)}function Kv(){return(Kv=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Tu.shift(),a=Sl.from(i,n,r),e.next=3,Pv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Rv(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gv(e,t){return Hv.apply(this,arguments)}function Hv(){return Hv=te(J().mark((function e(t,n){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Jv(t).ru,!e.t0){e.next=4;break}return e.next=4,function(){var e=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Il(i=n.code)||i===po.ABORTED){e.next=7;break}return r=t.Tu.shift(),Jv(t).Go(),e.next=5,Pv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Rv(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Fv(t)&&Vv(t);case 5:case"end":return e.stop()}}),e)}))),Hv.apply(this,arguments)}function Wv(e,t){return Qv.apply(this,arguments)}function Qv(){return(Qv=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=vo(t)).asyncQueue.verifyOperationInProgress(),uo("RemoteStore","RemoteStore received new credentials"),i=xv(r),r.Au.add(3),e.next=6,vv(r);case 6:return i&&r.Pu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Au.delete(3),e.next=12,hv(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xv(e,t){return Yv.apply(this,arguments)}function Yv(){return(Yv=te(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vo(t),!n){e.next=7;break}return r.Au.delete(2),e.next=5,hv(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Au.add(2),e.next=12,vv(r);case 12:r.Pu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $v(e){return e.Vu||(e.Vu=function(e,t,n){var r=vo(e);return r.lu(),new uv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{oo:Sv.bind(null,e),co:Tv.bind(null,e),eu:Cv.bind(null,e)}),e.Ru.push(function(){var t=te(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Vu.Go(),wv(e)?bv(e):e.Pu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Vu.stop();case 6:_v(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Vu}function Jv(e){return e.Su||(e.Su=function(e,t,n){var r=vo(e);return r.lu(),new sv(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{oo:Uv.bind(null,e),co:Gv.bind(null,e),cu:jv.bind(null,e),uu:qv.bind(null,e)}),e.Ru.push(function(){var t=te(J().mark((function t(n){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Su.Go(),t.next=4,Rv(e);case 4:t.next=9;break;case 6:return t.next=8,e.Su.stop();case 8:e.Tu.length>0&&(uo("RemoteStore","Stopping write stream with ".concat(e.Tu.length," pending writes")),e.Tu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}var Zv=function(){function e(t,n,r,i,a){p(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new mo(po.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ep(e,t){if(so("AsyncQueue","".concat(t,": ").concat(e)),nu(e))return new mo(po.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var tp=function(){function e(t){p(this,e),this.comparator=t?function(e,n){return t(e,n)||Fo.comparator(e.key,n.key)}:function(e,t){return Fo.comparator(e.key,t.key)},this.keyedMap=Rc(),this.sortedSet=new Gu(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),np=function(){function e(){p(this,e),this.Du=new Gu(Fo.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Du.get(t);n?0!==e.type&&3===n.type?this.Du=this.Du.insert(t,e):3===e.type&&1!==n.type?this.Du=this.Du.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Du=this.Du.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Du=this.Du.remove(t):1===e.type&&2===n.type?this.Du=this.Du.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Du=this.Du.insert(t,{type:2,doc:e.doc}):fo():this.Du=this.Du.insert(t,e)}},{key:"Cu",value:function(){var e=[];return this.Du.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),rp=function(){function e(t,n,r,i,a,o,u,s,c){p(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,tp.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),ip=y((function e(){p(this,e),this.xu=void 0,this.listeners=[]})),ap=y((function e(){p(this,e),this.queries=new Ac((function(e){return _c(e)}),xc),this.onlineState="Unknown",this.Nu=new Set}));function op(e,t){return up.apply(this,arguments)}function up(){return up=te(J().mark((function e(t,n){var r,i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vo(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new ip),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.xu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=ep(e.t0,"Initialization of query '".concat(Sc(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.ku(r.onlineState),o.xu&&n.Mu(o.xu)&&hp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),up.apply(this,arguments)}function sp(e,t){return cp.apply(this,arguments)}function cp(){return cp=te(J().mark((function e(t,n){var r,i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vo(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),cp.apply(this,arguments)}function lp(e,t){var n,r=vo(e),i=!1,a=g(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=g(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Mu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.xu=o}}}catch(f){a.e(f)}finally{a.f()}i&&hp(r)}function fp(e,t,n){var r=vo(e),i=r.queries.get(t);if(i){var a,o=g(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function hp(e){e.Nu.forEach((function(e){e.next()}))}var dp=function(){function e(t,n,r){p(this,e),this.query=t,this.Ou=n,this.$u=!1,this.Fu=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"Mu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=g(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new rp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.$u?this.Bu(e)&&(this.Ou.next(e),a=!0):this.Lu(e,this.onlineState)&&(this.qu(e),a=!0),this.Fu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"ku",value:function(e){this.onlineState=e;var t=!1;return this.Fu&&!this.$u&&this.Lu(this.Fu,e)&&(this.qu(this.Fu),t=!0),t}},{key:"Lu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Uu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Bu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Fu&&this.Fu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"qu",value:function(e){e=rp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.$u=!0,this.Ou.next(e)}}]),e}(),vp=function(){function e(t,n){p(this,e),this.Ku=t,this.byteLength=n}return y(e,[{key:"Gu",value:function(){return"metadata"in this.Ku}}]),e}(),pp=function(){function e(t){p(this,e),this.serializer=t}return y(e,[{key:"ir",value:function(e){return af(this.serializer,e)}},{key:"rr",value:function(e){return e.metadata.exists?ff(this.serializer,e.document,!1):Ps.newNoDocument(this.ir(e.metadata.name),this.ur(e.metadata.readTime))}},{key:"ur",value:function(e){return ef(e)}}]),e}(),mp=function(){function e(t,n,r){p(this,e),this.Qu=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yp(t)}return y(e,[{key:"ju",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Ku.namedQuery)this.queries.push(e.Ku.namedQuery);else if(e.Ku.documentMetadata){this.documents.push({metadata:e.Ku.documentMetadata}),e.Ku.documentMetadata.exists||++t;var n=Oo.fromString(e.Ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Ku.document&&(this.documents[this.documents.length-1].document=e.Ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"zu",value:function(e){var t,n=new Map,r=new pp(this.serializer),i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.ir(a.metadata.name),s=g(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Bc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=te(J().mark((function e(){var t,n,r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Od(this.localStore,new pp(this.serializer),this.documents,this.Qu.id);case 2:t=e.sent,n=this.zu(this.documents),r=g(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Md(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Wu:this.collectionGroups,Hu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function yp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var gp=y((function e(t){p(this,e),this.key=t})),kp=y((function e(t){p(this,e),this.key=t})),bp=function(){function e(t,n){p(this,e),this.query=t,this.Ju=n,this.Yu=null,this.hasCachedResults=!1,this.current=!1,this.Xu=Bc(),this.mutatedKeys=Bc(),this.Zu=Ic(t),this.tc=new tp(this.Zu)}return y(e,[{key:"ec",get:function(){return this.Ju}},{key:"nc",value:function(e,t){var n=this,r=t?t.sc:new np,i=t?t.tc:this.tc,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ec(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.ic(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.Zu(f,s)>0||c&&n.Zu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{tc:o,sc:r,ji:u,mutatedKeys:a}}},{key:"ic",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.tc;this.tc=e.tc,this.mutatedKeys=e.mutatedKeys;var a=e.sc.Cu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fo()}};return n(e)-n(t)}(e.type,t.type)||r.Zu(e.doc,t.doc)})),this.rc(n);var o=t?this.oc():[],u=0===this.Xu.size&&this.current?1:0,s=u!==this.Yu;return this.Yu=u,0!==a.length||s?{snapshot:new rp(this.query,e.tc,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),uc:o}:{uc:o}}},{key:"ku",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tc:this.tc,sc:new np,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{uc:[]}}},{key:"cc",value:function(e){return!this.Ju.has(e)&&!!this.tc.has(e)&&!this.tc.get(e).hasLocalMutations}},{key:"rc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Ju=t.Ju.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Ju=t.Ju.delete(e)})),this.current=e.current)}},{key:"oc",value:function(){var e=this;if(!this.current)return[];var t=this.Xu;this.Xu=Bc(),this.tc.forEach((function(t){e.cc(t.key)&&(e.Xu=e.Xu.add(t.key))}));var n=[];return t.forEach((function(t){e.Xu.has(t)||n.push(new kp(t))})),this.Xu.forEach((function(e){t.has(e)||n.push(new gp(e))})),n}},{key:"ac",value:function(e){this.Ju=e.sr,this.Xu=Bc();var t=this.nc(e.documents);return this.applyChanges(t,!0)}},{key:"hc",value:function(){return rp.fromInitialDocuments(this.query,this.tc,this.mutatedKeys,0===this.Yu,this.hasCachedResults)}}]),e}(),wp=y((function e(t,n,r){p(this,e),this.query=t,this.targetId=n,this.view=r})),xp=y((function e(t){p(this,e),this.key=t,this.lc=!1})),_p=function(){function e(t,n,r,i,a,o){p(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.fc={},this.dc=new Ac((function(e){return _c(e)}),xc),this._c=new Map,this.wc=new Set,this.mc=new Gu(Fo.comparator),this.gc=new Map,this.yc=new ed,this.Ic={},this.Tc=new Map,this.Ec=Ah.kn(),this.onlineState="Unknown",this.Ac=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.Ac}}]),e}();function Sp(e,t){return Ep.apply(this,arguments)}function Ep(){return Ep=te(J().mark((function e(t,n){var r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ym(t),!(o=r.dc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.hc(),e.next=15;break;case 6:return e.next=8,Id(r.localStore,kc(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,Tp(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&mv(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Ep.apply(this,arguments)}function Tp(e,t,n,r,i){return Ip.apply(this,arguments)}function Ip(){return Ip=te(J().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=te(J().mark((function e(t,n,r,i){var a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.nc(r),e.t0=a.ji,!e.t0){e.next=6;break}return e.next=5,Dd(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.nc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Wp(t,n.targetId,u.uc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Dd(t.localStore,n,!0);case 3:return o=e.sent,u=new bp(n,o.sr),s=u.nc(o.documents),c=Vl.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),Wp(t,r,l.uc),f=new wp(n,r,u),e.abrupt("return",(t.dc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Ip.apply(this,arguments)}function Cp(e,t){return Ap.apply(this,arguments)}function Ap(){return(Ap=te(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vo(t),i=r.dc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!xc(e,n)}))),void r.dc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Cd(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),yv(r.remoteStore,i.targetId),Gp(r,i.targetId)})).catch(Xo);case 9:e.next=14;break;case 11:return Gp(r,i.targetId),e.next=14,Cd(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dp(e,t,n){return Np.apply(this,arguments)}function Np(){return Np=te(J().mark((function e(t,n,r){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gm(t),e.prev=1,e.next=4,function(e,t){var n,r,i=vo(e),a=No.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Bc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Nc(),s=Bc();return i.Xi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=g(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=hl(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new pl(c.key,l,Ns(l.value.mapValue),ol.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Oc(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Ic[e.currentUser.toKey()];r||(r=new Gu(Co)),r=r.insert(t,n),e.Ic[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Yp(i,a.changes);case 9:return e.next=11,Rv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ep(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Np.apply(this,arguments)}function Pp(e,t){return Rp.apply(this,arguments)}function Rp(){return(Rp=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),e.prev=1,e.next=4,Sd(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.gc.get(t);n&&(ho(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.lc=!0:e.modifiedDocuments.size>0?ho(n.lc):e.removedDocuments.size>0&&(ho(n.lc),n.lc=!1))})),e.next=8,Yp(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Xo(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Op(e,t,n){var r=vo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.dc.forEach((function(e,n){var r=n.view.ku(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=vo(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=g(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.ku(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&hp(n)}(r.eventManager,t),i.length&&r.fc.eu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Lp(e,t,n){return Mp.apply(this,arguments)}function Mp(){return Mp=te(J().mark((function e(t,n,r){var i,a,o,u,s,c;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=vo(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.gc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Gu(Fo.comparator)).insert(o,Ps.newNoDocument(o,Po.min())),s=Bc().add(o),c=new Fl(Po.min(),new Map,new Gu(Co),u,s),e.next=9,Pp(i,c);case 9:i.mc=i.mc.remove(o),i.gc.delete(n),Xp(i),e.next=16;break;case 14:return e.next=16,Cd(i.localStore,n,!1).then((function(){return Gp(i,n,r)})).catch(Xo);case 16:case"end":return e.stop()}}),e)}))),Mp.apply(this,arguments)}function Fp(e,t){return Vp.apply(this,arguments)}function Vp(){return(Vp=te(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),i=n.batch.batchId,e.prev=1,e.next=4,xd(r.localStore,n);case 4:return a=e.sent,Kp(r,i,null),qp(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Yp(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Xo(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Up(e,t,n){return Bp.apply(this,arguments)}function Bp(){return(Bp=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vo(t),e.prev=1,e.next=4,function(e,t){var n=vo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return ho(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Kp(i,n,r),qp(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Yp(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Xo(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function jp(e,t){return zp.apply(this,arguments)}function zp(){return(zp=te(J().mark((function e(t,n){var r,i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xv((r=vo(t)).remoteStore)||uo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=vo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Tc.get(i)||[]).push(n),r.Tc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ep(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function qp(e,t){(e.Tc.get(t)||[]).forEach((function(e){e.resolve()})),e.Tc.delete(t)}function Kp(e,t,n){var r=vo(e),i=r.Ic[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Ic[r.currentUser.toKey()]=i}}function Gp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=g(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.dc.delete(a),n&&e.fc.vc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.yc.ps(t).forEach((function(t){e.yc.containsKey(t)||Hp(e,t)}))}function Hp(e,t){e.wc.delete(t.path.canonicalString());var n=e.mc.get(t);null!==n&&(yv(e.remoteStore,n),e.mc=e.mc.remove(t),e.gc.delete(n),Xp(e))}function Wp(e,t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof gp?(e.yc.addReference(a.key,t),Qp(e,a)):a instanceof kp?(uo("SyncEngine","Document no longer in limbo: "+a.key),e.yc.removeReference(a.key,t),e.yc.containsKey(a.key)||Hp(e,a.key)):fo()}}catch(o){i.e(o)}finally{i.f()}}function Qp(e,t){var n=t.key,r=n.path.canonicalString();e.mc.get(n)||e.wc.has(r)||(uo("SyncEngine","New document in limbo: "+n),e.wc.add(r),Xp(e))}function Xp(e){for(;e.wc.size>0&&e.mc.size<e.maxConcurrentLimboResolutions;){var t=e.wc.values().next().value;e.wc.delete(t);var n=new Fo(Oo.fromString(t)),r=e.Ec.next();e.gc.set(r,new xp(n)),e.mc=e.mc.insert(n,r),mv(e.remoteStore,new If(kc(dc(n.path)),r,"TargetPurposeLimboResolution",cu.ct))}}function Yp(e,t,n){return $p.apply(this,arguments)}function $p(){return $p=te(J().mark((function e(t,n,r){var i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=vo(t),a=[],o=[],u=[],e.t0=i.dc.isEmpty(),e.t0){e.next=9;break}return i.dc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=md.Bi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.fc.eu(a),e.next=9,function(){var e=te(J().mark((function e(t,n){var r,i,a,o,u,s,c,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return $o.forEach(n,(function(t){return $o.forEach(t.$i,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return $o.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),nu(e.t0)){e.next=10;break}throw e.t0;case 10:uo("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=g(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Hi.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Hi=r.Hi.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),$p.apply(this,arguments)}function Jp(e,t){return Zp.apply(this,arguments)}function Zp(){return(Zp=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=vo(t)).currentUser.isEqual(n)){e.next=11;break}return uo("SyncEngine","User change. New user:",n.toKey()),e.next=5,bd(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Tc.forEach((function(e){e.forEach((function(e){e.reject(new mo(po.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Tc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Yp(r,i.tr);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function em(e,t){var n=vo(e),r=n.gc.get(t);if(r&&r.lc)return Bc().add(r.key);var i=Bc(),a=n._c.get(t);if(!a)return i;var o,u=g(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.dc.get(s);i=i.unionWith(c.view.ec)}}catch(l){u.e(l)}finally{u.f()}return i}function tm(e,t){return nm.apply(this,arguments)}function nm(){return(nm=te(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),e.next=3,Dd(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ac(i),e.abrupt("return",(r.isPrimaryClient&&Wp(r,n.targetId,a.uc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rm(e,t){return im.apply(this,arguments)}function im(){return(im=te(J().mark((function e(t,n){var r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),e.abrupt("return",Pd(r.localStore,n).then((function(e){return Yp(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function am(e,t,n,r){return om.apply(this,arguments)}function om(){return om=te(J().mark((function e(t,n,r,i){var a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vo(t),e.next=3,function(e,t){var n=vo(e),r=vo(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Vn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):$o.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Rv(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Kp(a,n,i||null),qp(a,n),function(e,t){vo(vo(e).mutationQueue).Dn(t)}(a.localStore,n)):fo();case 11:return e.next=13,Yp(a,o);case 13:e.next=16;break;case 15:uo("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),om.apply(this,arguments)}function um(e,t){return sm.apply(this,arguments)}function sm(){return(sm=te(J().mark((function e(t,n){var r,i,a,o,u,s,c,l;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ym(r=vo(t)),gm(r),!0!==n||!0===r.Ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,cm(r,i.toArray());case 5:return a=e.sent,r.Ac=!0,e.next=9,Xv(r.remoteStore,!0);case 9:o=g(a);try{for(o.s();!(u=o.n()).done;)s=u.value,mv(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Ac){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Gp(r,t),Cd(r.localStore,t,!0)})),yv(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,cm(r,c);case 21:return function(e){var t=vo(e);t.gc.forEach((function(e,n){yv(t.remoteStore,n)})),t.yc.Is(),t.gc=new Map,t.mc=new Gu(Fo.comparator)}(r),r.Ac=!1,e.next=25,Xv(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cm(e,t,n){return lm.apply(this,arguments)}function lm(){return lm=te(J().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,v,p,m,y;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=vo(t),a=[],o=[],u=g(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,Id(i.localStore,kc(f[0]));case 11:l=e.sent,h=g(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return v=d.value,p=i.dc.get(v),e.next=20,tm(i,p);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Nd(i.localStore,c);case 36:return y=e.sent,e.next=39,Id(i.localStore,y);case 39:return l=e.sent,e.next=42,Tp(i,fm(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.fc.eu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),lm.apply(this,arguments)}function fm(e){return hc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function hm(e){var t=vo(e);return vo(vo(t.localStore).persistence).Mi()}function dm(e,t,n,r){return vm.apply(this,arguments)}function vm(){return vm=te(J().mark((function e(t,n,r,i){var a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=vo(t)).Ac){e.next=3;break}return e.abrupt("return",void uo("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Pd(a.localStore,Tc(o[0]));case 10:return u=e.sent,s=Fl.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Zu.EMPTY_BYTE_STRING),e.next=14,Yp(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Cd(a.localStore,n,!0);case 17:return Gp(a,n,i),e.abrupt("break",20);case 19:fo();case 20:case"end":return e.stop()}}),e)}))),vm.apply(this,arguments)}function pm(e,t,n){return mm.apply(this,arguments)}function mm(){return(mm=te(J().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=ym(t)).Ac){e.next=45;break}a=g(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return uo("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Nd(i.localStore,u);case 12:return s=e.sent,e.next=15,Id(i.localStore,s);case 15:return c=e.sent,e.next=18,Tp(i,fm(s),c.targetId,!1,c.resumeToken);case 18:mv(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=g(r),e.prev=30,h=J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,Cd(i.localStore,t,!1).then((function(){yv(i.remoteStore,t),Gp(i,t)})).catch(Xo);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function ym(e){var t=vo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=em.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lp.bind(null,t),t.fc.eu=lp.bind(null,t.eventManager),t.fc.vc=fp.bind(null,t.eventManager),t}function gm(e){var t=vo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Up.bind(null,t),t}function km(e,t,n){var r=vo(e);(function(){var e=te(J().mark((function e(t,n,r){var i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=vo(e),r=ef(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ls.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(yp(i)),a=new mp(i,t.localStore,n.serializer),e.next=15,n.Pc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ju(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.Pc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Yp(t,s.Hu,void 0);case 31:return e.next=33,function(e,t){var n=vo(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ls.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Wu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(co("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var bm=function(){function e(){p(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=iv(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return kd(this.persistence,new yd,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new od(sd.js,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Wd}},{key:"terminate",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),wm=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).bc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=te(J().mark((function e(t){var r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(x(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.bc.initialize(this,t);case 4:return e.next=6,gm(this.bc.syncEngine);case 6:return e.next=8,Rv(this.bc.remoteStore);case 8:return e.next=10,this.persistence.pi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return kd(this.persistence,new yd,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Mh(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new su(t,this.persistence);return new uu(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=pd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?wh.withCacheSize(this.cacheSizeBytes):wh.DEFAULT;return new hd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,nv(),rv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Wd}}]),n}(bm),xm=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r,!1)).bc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=te(J().mark((function e(t){var r,i=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(x(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.bc.syncEngine,e.t0=this.sharedClientState instanceof Hd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Qr:am.bind(null,r),jr:dm.bind(null,r),zr:pm.bind(null,r),Mi:hm.bind(null,r),Gr:rm.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.pi(function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,um(i.bc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=nv();if(!Hd.D(t))throw new mo(po.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=pd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(wm),_m=function(){function e(){p(this,e)}return y(e,[{key:"initialize",value:function(){var e=te(J().mark((function e(t,n){var r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Op(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Jp.bind(null,this.syncEngine),e.next=12,Xv(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new ap}},{key:"createDatastore",value:function(e){var t,n=iv(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new tv(t));return function(e,t,n,r){return new cv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Op(o.syncEngine,e,0)},a=Xd.D()?new Xd:new Qd,new fv(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new _p(e,t,n,r,i,a);return o&&(u.Ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vo(t),uo("RemoteStore","RemoteStore shutting down."),n.Au.add(5),e.next=5,vv(n);case 5:n.vu.shutdown(),n.Pu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Sm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return te(J().mark((function r(){var i;return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var Em=function(){function e(t){p(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.Vc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Vc(this.observer.error,e):so("Uncaught Error in snapshot listener:",e.toString())}},{key:"Sc",value:function(){this.muted=!0}},{key:"Vc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Tm=function(){function e(t,n){var r=this;p(this,e),this.Dc=t,this.serializer=n,this.metadata=new yo,this.buffer=new Uint8Array,this.Cc=new TextDecoder("utf-8"),this.xc().then((function(e){e&&e.Gu()?r.metadata.resolve(e.Ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Ku))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.Dc.cancel()}},{key:"getMetadata",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pc",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.xc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){var e=te(J().mark((function e(){var t,n,r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Nc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Cc.decode(t),r=Number(n),isNaN(r)&&this.kc("length string (".concat(n,") is not valid number")),e.next=9,this.Mc(r);case 9:return i=e.sent,e.abrupt("return",new vp(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Nc",value:function(){var e=te(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.$c();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.kc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mc",value:function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.$c();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.kc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Cc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kc",value:function(e){throw this.Dc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"$c",value:function(){var e=te(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Dc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Im=function(){function e(t){p(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=te(J().mark((function e(t){var n,r=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new mo(po.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=te(J().mark((function e(t,n){var r,i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),i=sf(r.serializer)+"/documents",a={documents:n.map((function(e){return rf(r.serializer,e)}))},e.next=5,r.Ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=hf(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());ho(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new wl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=te(J().mark((function e(){var t,n=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Fo.fromPath(t);n.mutations.push(new xl(r,n.precondition(r)))})),e.next=7,function(){var e=te(J().mark((function e(t,n){var r,i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),i=sf(r.serializer)+"/documents",a={writes:n.map((function(e){return df(r.serializer,e)}))},e.next=3,r.po("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw fo();t=Po.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new mo(po.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Po.min())?ol.exists(!1):ol.updateTime(t):ol.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Po.min()))throw new mo(po.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ol.updateTime(t)}return ol.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Cm=function(){function e(t,n,r,i,a){p(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Fc=r.maxAttempts,this.Lo=new av(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.Fc-=1,this.Bc()}},{key:"Bc",value:function(){var e=this;this.Lo.xo(te(J().mark((function t(){var n,r;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Im(e.datastore),(r=e.Lc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.qc(t)}))}))})).catch((function(t){e.qc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Lc",value:function(e){try{var t=this.updateFunction(e);return!lu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"qc",value:function(e){var t=this;this.Fc>0&&this.Uc(e)?(this.Fc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Bc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Uc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Il(t)}return!1}}]),e}(),Am=function(){function e(t,n,r,i){var a=this;p(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ro.UNAUTHENTICATED,this.clientId=Io.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uo("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return uo("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=te(J().mark((function e(){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new mo(po.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(te(J().mark((function n(){var r;return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=ep(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Dm(e,t){return Nm.apply(this,arguments)}function Nm(){return Nm=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),uo("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,bd(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Nm.apply(this,arguments)}function Pm(e,t){return Rm.apply(this,arguments)}function Rm(){return(Rm=te(J().mark((function e(t,n){var r,i;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Lm(t);case 3:return r=e.sent,uo("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Wv(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Wv(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Om(e){return"FirebaseError"===e.name?e.code===po.FAILED_PRECONDITION||e.code===po.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Lm(e){return Mm.apply(this,arguments)}function Mm(){return(Mm=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return uo("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Dm(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Om(n=e.t0)){e.next=13;break}throw n;case 13:return co("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Dm(t,new bm);case 16:e.next=21;break;case 18:return uo("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Dm(t,new bm);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function Fm(e){return Vm.apply(this,arguments)}function Vm(){return(Vm=te(J().mark((function e(t){return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return uo("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Pm(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return uo("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Pm(t,new _m);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Um(e){return Lm(e).then((function(e){return e.persistence}))}function Bm(e){return Lm(e).then((function(e){return e.localStore}))}function jm(e){return Fm(e).then((function(e){return e.remoteStore}))}function zm(e){return Fm(e).then((function(e){return e.syncEngine}))}function qm(e){return Fm(e).then((function(e){return e.datastore}))}function Km(e){return Gm.apply(this,arguments)}function Gm(){return(Gm=te(J().mark((function e(t){var n,r;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Sp.bind(null,n.syncEngine),r.onUnlisten=Cp.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new yo;return e.asyncQueue.enqueueAndForget(te(J().mark((function i(){return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Em({next:function(a){t.enqueueAndForget((function(){return sp(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new mo(po.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new mo(po.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new dp(dc(n.path),a,{includeMetadataChanges:!0,Uu:!0});return op(e,o)},i.next=3,Km(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Wm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new yo;return e.asyncQueue.enqueueAndForget(te(J().mark((function i(){return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Em({next:function(n){t.enqueueAndForget((function(){return sp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new mo(po.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new dp(n,a,{includeMetadataChanges:!0,Uu:!0});return op(e,o)},i.next=3,Km(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Qm=new Map;function Xm(e,t,n){if(!n)throw new mo(po.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ym(e,t,n,r){if(!0===t&&!0===r)throw new mo(po.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function $m(e){if(!Fo.isDocumentKey(e))throw new mo(po.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Jm(e){if(Fo.isDocumentKey(e))throw new mo(po.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Zm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":fo()}function ey(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new mo(po.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Zm(e);throw new mo(po.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function ty(e,t){if(t<=0)throw new mo(po.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var ny=function(){function e(t){var n;if(p(this,e),void 0===t.host){if(void 0!==t.ssl)throw new mo(po.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new mo(po.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Ym("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling||void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!1:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),ry=function(){function e(t,n,r,i){p(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ny({}),this._settingsFrozen=!1}return y(e,[{key:"app",get:function(){if(!this._app)throw new mo(po.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new mo(po.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ny(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ko;switch(e.type){case"firstParty":return new _o(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new mo(po.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Qm.get(e);t&&(uo("ComponentProvider","Removing Datastore"),Qm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function iy(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=ey(e,ry))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&co("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=ro.MOCK_USER;else{o=V(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new mo(po.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ro(s)}e._authCredentials=new bo(new go(o,u))}}var ay=function(){function e(t,n,r){p(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new uy(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),oy=function(){function e(t,n,r){p(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),uy=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,dc(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ay(this.firestore,null,new Fo(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(oy);function sy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$(e),Xm("collection","path",t),e instanceof ry){var a=Oo.fromString.apply(Oo,[t].concat(r));return Jm(a),new uy(e,null,a)}if(!(e instanceof ay||e instanceof uy))throw new mo(po.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Oo.fromString.apply(Oo,[t].concat(r)));return Jm(o),new uy(e.firestore,null,o)}function cy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$(e),1===arguments.length&&(t=Io.A()),Xm("doc","path",t),e instanceof ry){var a=Oo.fromString.apply(Oo,[t].concat(r));return $m(a),new ay(e,null,new Fo(a))}if(!(e instanceof ay||e instanceof uy))throw new mo(po.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Oo.fromString.apply(Oo,[t].concat(r)));return $m(o),new ay(e.firestore,e instanceof uy?e.converter:null,new Fo(o))}function ly(e,t){return e=$(e),t=$(t),(e instanceof ay||e instanceof uy)&&(t instanceof ay||t instanceof uy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function fy(e,t){return e=$(e),t=$(t),e instanceof oy&&t instanceof oy&&e.firestore===t.firestore&&xc(e._query,t._query)&&e.converter===t.converter}var hy=function(){function e(){var t=this;p(this,e),this.Kc=Promise.resolve(),this.Gc=[],this.Qc=!1,this.jc=[],this.zc=null,this.Wc=!1,this.Hc=!1,this.Jc=[],this.Lo=new av(this,"async_queue_retry"),this.Yc=function(){var e=rv();e&&uo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Lo.ko()};var n=rv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Yc)}return y(e,[{key:"isShuttingDown",get:function(){return this.Qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Xc(),this.Zc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Qc){this.Qc=!0,this.Hc=e||!1;var t=rv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Yc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Xc(),this.Qc)return new Promise((function(){}));var n=new yo;return this.Zc((function(){return t.Qc&&t.Hc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Gc.push(e),t.ta()}))}},{key:"ta",value:function(){var e=te(J().mark((function e(){var t=this;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Gc.length){e.next=14;break}return e.prev=1,e.next=4,this.Gc[0]();case 4:this.Gc.shift(),this.Lo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),nu(e.t0)){e.next=12;break}throw e.t0;case 12:uo("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Gc.length>0&&this.Lo.xo((function(){return t.ta()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t=this,n=this.Kc.then((function(){return t.Wc=!0,e().catch((function(e){t.zc=e,t.Wc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw so("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Wc=!1,e}))}));return this.Kc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Xc(),this.Jc.indexOf(e)>-1&&(t=0);var i=Zv.createAndSchedule(this,e,t,n,(function(e){return r.ea(e)}));return this.jc.push(i),i}},{key:"Xc",value:function(){this.zc&&fo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"na",value:function(){var e=te(J().mark((function e(){var t;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Kc,e.next=3,t;case 3:if(t!==this.Kc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sa",value:function(e){var t,n=g(this.jc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ia",value:function(e){var t=this;return this.na().then((function(){t.jc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=g(t.jc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.na()}))}},{key:"ra",value:function(e){this.Jc.push(e)}},{key:"ea",value:function(e){var t=this.jc.indexOf(e);this.jc.splice(t,1)}}]),e}();function dy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=g(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var vy=function(){function e(){p(this,e),this._progressObserver={},this._taskCompletionResolver=new yo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),py=function(e){w(n,e);var t=S(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new hy,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||yy(this),this._firestoreClient.terminate()}}]),n}(ry);function my(e){return e._firestoreClient||yy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function yy(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new us(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Am(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function gy(e,t,n){var r=new yo;return e.asyncQueue.enqueue(te(J().mark((function i(){var a;return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Dm(e,n);case 3:return i.next=5,Pm(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),Om(a=i.t0)){i.next=13;break}throw a;case 13:co("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function ky(e){return function(e){return e.asyncQueue.enqueue(te(J().mark((function t(){var n,r;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Um(e);case 2:return n=t.sent,t.next=5,jm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=vo(e);return t.Au.delete(0),hv(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(my(e=ey(e,py)))}function by(e){return function(e){return e.asyncQueue.enqueue(te(J().mark((function t(){var n,r;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Um(e);case 2:return n=t.sent,t.next=5,jm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=vo(t)).Au.add(0),e.next=4,vv(n);case 4:n.Pu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(my(e=ey(e,py)))}function wy(e,t){var n=my(e=ey(e,py)),r=new vy;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Tm(e,t)}(function(e,t){if(e instanceof Uint8Array)return Sm(e,t);if(e instanceof ArrayBuffer)return Sm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Nl().encode(e):e),t)}(n,iv(t));e.asyncQueue.enqueueAndForget(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=km,t.next=3,zm(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function xy(e,t){return function(e,t){return e.asyncQueue.enqueue(te(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=vo(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ls.getNamedQuery(e,t)}))},n.next=3,Bm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(my(e=ey(e,py)),t).then((function(t){return t?new oy(e,null,t.query):null}))}function _y(e){if(e._initialized||e._terminated)throw new mo(po.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Sy=function(){function e(t){p(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Zu.fromBase64String(t))}catch(t){throw new mo(po.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Zu.fromUint8Array(t))}}]),e}(),Ey=function(){function e(){p(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new mo(po.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mo(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Ty=y((function e(t){p(this,e),this._methodName=t})),Iy=function(){function e(t,n){if(p(this,e),!isFinite(t)||t<-90||t>90)throw new mo(po.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new mo(po.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Co(this._lat,e._lat)||Co(this._long,e._long)}}]),e}(),Cy=/^__.*__$/,Ay=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new pl(e,this.data,this.fieldMask,t,this.fieldTransforms):new vl(e,this.data,t,this.fieldTransforms)}}]),e}(),Dy=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new pl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Ny(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fo()}}var Py=function(){function e(t,n,r,i,a,o){p(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.oa(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"ua",get:function(){return this.settings.ua}},{key:"ca",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"aa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ca({path:n,ha:!1});return r.la(e),r}},{key:"fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ca({path:n,ha:!1});return r.oa(),r}},{key:"da",value:function(e){return this.ca({path:void 0,ha:!0})}},{key:"_a",value:function(e){return Jy(e,this.settings.methodName,this.settings.wa||!1,this.path,this.settings.ma)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"oa",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.la(this.path.get(e))}},{key:"la",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Ny(this.ua)&&Cy.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),Ry=function(){function e(t,n,r){p(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||iv(t)}return y(e,[{key:"ga",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Py({ua:e,methodName:t,ma:n,path:Mo.emptyPath(),ha:!1,wa:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Oy(e){var t=e._freezeSettings(),n=iv(e._databaseId);return new Ry(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ly(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ga(a.merge||a.mergeFields?2:0,t,n,i);Qy("Data must be an object, but it was:",o,r);var u,s,c=Hy(r,o);if(a.merge)u=new $u(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=g(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Xy(t,l.value,n);if(!o.contains(d))throw new mo(po.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));Zy(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}u=new $u(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Ay(new Ds(c),u,s)}var My=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ua)throw 1===e.ua?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ty);function Fy(e,t,n){return new Py({ua:3,ma:t.settings.ma,methodName:e._methodName,ha:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Vy=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new il(e.path,new Yc)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Ty),Uy=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).ya=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=Fy(this,e,!0),n=this.ya.map((function(e){return Gy(e,t)})),r=new $c(n);return new il(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ty),By=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).ya=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=Fy(this,e,!0),n=this.ya.map((function(e){return Gy(e,t)})),r=new Zc(n);return new il(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ty),jy=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).pa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new tl(e.serializer,Gc(e.serializer,this.pa));return new il(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Ty);function zy(e,t,n,r){var i=e.ga(1,t,n);Qy("Data must be an object, but it was:",i,r);var a=[],o=Ds.empty();qu(r,(function(e,r){var u=$y(t,e,n);r=$(r);var s=i.fa(u);if(r instanceof My)a.push(u);else{var c=Gy(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new $u(a);return new Dy(o,u,i.fieldTransforms)}function qy(e,t,n,r,i,a){var o=e.ga(1,t,n),u=[Xy(t,r,n)],s=[i];if(a.length%2!=0)throw new mo(po.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Xy(t,a[c])),s.push(a[c+1]);for(var l=[],f=Ds.empty(),h=u.length-1;h>=0;--h)if(!Zy(l,u[h])){var d=u[h],v=s[h];v=$(v);var p=o.fa(d);if(v instanceof My)l.push(d);else{var m=Gy(v,p);null!=m&&(l.push(d),f.set(d,m))}}var y=new $u(l);return new Dy(f,y,o.fieldTransforms)}function Ky(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Gy(n,e.ga(r?4:3,t))}function Gy(e,t){if(Wy(e=$(e)))return Qy("Unsupported field value:",t,e),Hy(e,t);if(e instanceof Ty)return function(e,t){if(!Ny(t.ua))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ha&&4!==t.ua)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=g(e);try{for(a.s();!(n=a.n()).done;){var o=Gy(n.value,t.da(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=$(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Gc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=No.fromDate(e);return{timestampValue:$l(t.serializer,n)}}if(e instanceof No){var r=new No(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:$l(t.serializer,r)}}if(e instanceof Iy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Sy)return{bytesValue:Jl(t.serializer,e._byteString)};if(e instanceof ay){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:tf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(Zm(e)))}(e,t)}function Hy(e,t){var n={};return Ku(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qu(e,(function(e,r){var i=Gy(r,t.aa(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Wy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof No||e instanceof Iy||e instanceof Sy||e instanceof ay||e instanceof Ty)}function Qy(e,t,n){if(!Wy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Zm(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Xy(e,t,n){if((t=$(t))instanceof Ey)return t._internalPath;if("string"==typeof t)return $y(e,t);throw Jy("Field path arguments must be of type string or ",e,!1,void 0,n)}var Yy=new RegExp("[~\\*/\\[\\]]");function $y(e,t,n){if(t.search(Yy)>=0)throw Jy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return E(Ey,Z(t.split(".")))._internalPath}catch(r){throw Jy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Jy(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new mo(po.INVALID_ARGUMENT,u+e+s)}function Zy(e,t){return e.some((function(e){return e.isEqual(t)}))}var eg=function(){function e(t,n,r,i,a){p(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ay(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new tg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(ng("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),tg=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return At(x(n.prototype),"data",this).call(this)}}]),n}(eg);function ng(e,t){return"string"==typeof t?$y(e,t):t instanceof Ey?t._internalPath:t._delegate._internalPath}function rg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new mo(po.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ig=y((function e(){p(this,e)})),ag=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n)}(ig);function og(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof ig&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof sg})).length,n=e.filter((function(e){return e instanceof ug})).length;if(t>1||t>0&&n>0)throw new mo(po.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=g(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var ug=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=this._parse(e);return bg(e._query,t),new oy(e.firestore,e.converter,bc(e._query,t))}},{key:"_parse",value:function(e){var t=Oy(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new mo(po.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){kg(o,a);var s,c=[],l=g(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(gg(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=gg(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||kg(o,a),u=Ky(n,"where",o,"in"===a||"not-in"===a);return Us.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ag);var sg=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return y(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Bs.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=g(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;bg(r,a),r=bc(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new oy(e.firestore,e.converter,bc(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ig);var cg=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new mo(po.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new mo(po.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ms(t,n);return function(e,t){if(null===pc(e)){var n=mc(e);null!==n&&wg(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new oy(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new fc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ag);var lg=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return y(n,[{key:"_apply",value:function(e){return new oy(e.firestore,e.converter,wc(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ag);var fg=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=yg(e,this.type,this._docOrFields,this._inclusive);return new oy(e.firestore,e.converter,function(e,t){return new fc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ag);function hg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fg._create("startAt",t,!0)}function dg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fg._create("startAfter",t,!1)}var vg=function(e){w(n,e);var t=S(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=yg(e,this.type,this._docOrFields,this._inclusive);return new oy(e.firestore,e.converter,function(e,t){return new fc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ag);function pg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vg._create("endBefore",t,!1)}function mg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vg._create("endAt",t,!0)}function yg(e,t,n,r){if(n[0]=$(n[0]),n[0]instanceof eg)return function(e,t,n,r,i){if(!r)throw new mo(po.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=g(gc(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(gs(t,r.key));else{var c=r.data.field(s.field);if(is(c))throw new mo(po.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new mo(po.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Rs(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Oy(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new mo(po.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new mo(po.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!yc(e)&&-1!==c.indexOf("/"))throw new mo(po.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Oo.fromString(c));if(!Fo.isDocumentKey(l))throw new mo(po.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Fo(l);u.push(gs(t,f))}else{var h=Ky(n,r,c);u.push(h)}}return new Rs(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function gg(e,t,n){if("string"==typeof(n=$(n))){if(""===n)throw new mo(po.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yc(t)&&-1!==n.indexOf("/"))throw new mo(po.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Oo.fromString(n));if(!Fo.isDocumentKey(r))throw new mo(po.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return gs(e,new Fo(r))}if(n instanceof ay)return gs(e,n._key);throw new mo(po.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Zm(n),"."))}function kg(e,t){if(!Array.isArray(e)||0===e.length)throw new mo(po.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function bg(e,t){if(t.isInequality()){var n=mc(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new mo(po.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=pc(e);null!==i&&wg(e,r,i)}var a=function(e,t){var n,r=g(e);try{for(r.s();!(n=r.n()).done;){var i,a=g(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new mo(po.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new mo(po.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function wg(e,t,n){if(!n.isEqual(t))throw new mo(po.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var xg=function(){function e(){p(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ns(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw fo()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return qu(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new Iy(ns(e.latitude),ns(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=as(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(os(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=ts(e);return new No(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Oo.fromString(e);ho(Tf(n));var r=new ss(n.get(1),n.get(3)),i=new Fo(n.popFirst(5));return r.isEqual(t)||so("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function _g(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Sg=function(e){w(n,e);var t=S(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new Sy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ay(this.firestore,null,t)}}]),n}(xg);var Eg=function(){function e(t,n){p(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Tg=function(e){w(n,e);var t=S(n);function n(e,r,i,a,o,u){var s;return p(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return y(n,[{key:"exists",value:function(){return At(x(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Ig(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ng("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(eg),Ig=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return At(x(n.prototype),"data",this).call(this,e)}}]),n}(Tg),Cg=function(){function e(t,n,r,i){p(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Eg(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Ig(n._firestore,n._userDataWriter,r.key,r,new Eg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new mo(po.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Ig(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Eg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Ig(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Eg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Ag(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Ag(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fo()}}function Dg(e,t){return e instanceof Tg&&t instanceof Tg?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Cg&&t instanceof Cg&&e._firestore===t._firestore&&fy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Ng=function(e){w(n,e);var t=S(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new Sy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ay(this.firestore,null,t)}}]),n}(xg);function Pg(e){e=ey(e,ay);var t=ey(e.firestore,py),n=my(t),r=new Ng(t);return function(e,t){var n=new yo;return e.asyncQueue.enqueueAndForget(te(J().mark((function r(){return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=te(J().mark((function e(t,n,r){var i,a;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=vo(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new mo(po.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ep(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Bm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Tg(t,r,e._key,n,new Eg(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Rg(e){e=ey(e,oy);var t=ey(e.firestore,py),n=my(t),r=new Ng(t);return function(e,t){var n=new yo;return e.asyncQueue.enqueueAndForget(te(J().mark((function r(){return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=te(J().mark((function e(t,n,r){var i,a,o,u,s;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dd(t,n,!0);case 3:i=e.sent,a=new bp(n,i.sr),o=a.nc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=ep(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Bm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Cg(t,r,e,n)}))}function Og(e,t,n){e=ey(e,ay);var r=ey(e.firestore,py),i=_g(e.converter,t,n);return Vg(r,[Ly(Oy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ol.none())])}function Lg(e,t,n){e=ey(e,ay);for(var r=ey(e.firestore,py),i=Oy(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Vg(r,[("string"==typeof(t=$(t))||t instanceof Ey?qy(i,"updateDoc",e._key,t,n,o):zy(i,"updateDoc",e._key,t)).toMutation(e._key,ol.exists(!0))])}function Mg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=$(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||dy(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(dy(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof ay)l=ey(e.firestore,py),f=dc(e._key.path),c={next:function(t){n[s]&&n[s](Ug(l,e,t))},error:n[s+1],complete:n[s+2]};else{var v=ey(e,oy);l=ey(v.firestore,py),f=v._query;var p=new Ng(l);c={next:function(e){n[s]&&n[s](new Cg(l,p,v,e))},error:n[s+1],complete:n[s+2]},rg(e._query)}return function(e,t,n,r){var i=new Em(r),a=new dp(t,i,n);return e.asyncQueue.enqueueAndForget(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=op,t.next=3,Km(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Sc(),e.asyncQueue.enqueueAndForget(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=sp,t.next=3,Km(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(my(l),f,h,c)}function Fg(e,t){return function(e,t){var n=new Em(t);return e.asyncQueue.enqueueAndForget(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){vo(e).Nu.add(t),t.next()},t.next=3,Km(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Sc(),e.asyncQueue.enqueueAndForget(te(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){vo(e).Nu.delete(t)},t.next=3,Km(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(my(e=ey(e,py)),dy(t)?t:{next:t})}function Vg(e,t){return function(e,t){var n=new yo;return e.asyncQueue.enqueueAndForget(te(J().mark((function r(){return J().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Dp,r.next=3,zm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(my(e),t)}function Ug(e,t,n){var r=n.docs.get(t._key),i=new Ng(e);return new Tg(e,i,t._key,r,new Eg(n.hasPendingWrites,n.fromCache),t.converter)}var Bg={maxAttempts:5},jg=function(){function e(t,n){p(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Oy(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=zg(e,this._firestore),i=_g(r.converter,t,n),a=Ly(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,ol.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=zg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=$(t))||t instanceof Ey?qy(this._dataReader,"WriteBatch.update",i._key,t,n,o):zy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,ol.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=zg(e,this._firestore);return this._mutations=this._mutations.concat(new wl(t._key,ol.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new mo(po.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function zg(e,t){if((e=$(e)).firestore!==t)throw new mo(po.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var qg=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=zg(e,this._firestore),i=new Ng(this._firestore);return At(x(n.prototype),"get",this).call(this,e).then((function(e){return new Tg(t._firestore,i,r._key,e._document,new Eg(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){p(this,e),this._firestore=t,this._transaction=n,this._dataReader=Oy(t)}return y(e,[{key:"get",value:function(e){var t=this,n=zg(e,this._firestore),r=new Sg(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return fo();var i=e[0];if(i.isFoundDocument())return new eg(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new eg(t._firestore,r,n._key,null,n.converter);throw fo()}))}},{key:"set",value:function(e,t,n){var r=zg(e,this._firestore),i=_g(r.converter,t,n),a=Ly(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=zg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=$(t))||t instanceof Ey?qy(this._dataReader,"Transaction.update",i._key,t,n,o):zy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=zg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Kg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Uy("arrayUnion",t)}function Gg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new By("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){io=e}(Ye),qe(new ne("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new py(new wo(e.getProvider("auth-internal")),new Eo(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new mo(po.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ss(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),nt(no,"3.11.0",e),nt(no,"3.11.0","esm2017")}();function Hg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new mo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Wg(){if("undefined"===typeof Uint8Array)throw new mo("unimplemented","Uint8Arrays are not available in this environment.")}function Qg(){if("undefined"==typeof atob)throw new mo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Xg=function(){function e(t){p(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return Qg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Wg(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Qg(),new e(Sy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Wg(),new e(Sy.fromUint8Array(t))}}]),e}();function Yg(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=g(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var $g=function(){function e(){p(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){_y(e=ey(e,py));var n=my(e);if(n._uninitializedComponentsProvider)throw new mo(po.FAILED_PRECONDITION,"SDK cache is already specified.");co("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new _m;return gy(n,i,new wm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){_y(e=ey(e,py));var t=my(e);if(t._uninitializedComponentsProvider)throw new mo(po.FAILED_PRECONDITION,"SDK cache is already specified.");co("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new _m;return gy(t,r,new xm(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new mo(po.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new yo;return e._queue.enqueueAndForgetEvenWhileRestricted(te(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=te(J().mark((function e(t){var n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zo.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Zo.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(pd(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Jg=function(){function e(t,n,r){var i=this;p(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof ss||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||co("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};iy(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return ky(this._delegate)}},{key:"disableNetwork",value:function(){return by(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Ym("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new yo;return e.asyncQueue.enqueueAndForget(te(J().mark((function n(){return J().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=jp,n.next=3,zm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(my(ey(this._delegate,py)))}},{key:"onSnapshotsInSync",value:function(e){return Fg(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new mo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new hk(this,sy(this._delegate,e))}catch(t){throw ik(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new rk(this,cy(this._delegate,e))}catch(t){throw ik(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new ck(this,function(e,t){if(e=ey(e,ry),Xm("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new mo(po.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new oy(e,null,function(e){return new fc(Oo.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw ik(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=ey(e,py);var r=Object.assign(Object.assign({},Bg),n);return function(e){if(e.maxAttempts<1)throw new mo(po.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new yo;return e.asyncQueue.enqueueAndForget(te(J().mark((function i(){var a;return J().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,qm(e);case 2:a=i.sent,new Cm(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(my(e),(function(n){return t(new qg(e,n))}),r)}(this._delegate,(function(n){return e(new ek(t,n))}))}},{key:"batch",value:function(){var e=this;return my(this._delegate),new tk(new jg(this._delegate,(function(t){return Vg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return wy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return xy(this._delegate,e).then((function(e){return e?new ck(t,e):null}))}}]),e}(),Zg=function(e){w(n,e);var t=S(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new Xg(new Sy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return rk.forKey(t,this.firestore,null)}}]),n}(xg);var ek=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Zg(t)}return y(e,[{key:"get",value:function(e){var t=this,n=dk(e);return this._delegate.get(n).then((function(e){return new uk(t._firestore,new Tg(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=dk(e);return n?(Hg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dk(e);return this._delegate.delete(t),this}}]),e}(),tk=function(){function e(t){p(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=dk(e);return n?(Hg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dk(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),nk=function(){function e(t,n,r){p(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new Ig(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sk(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Zg(t),n),i.set(n,a)),a}}]),e}();nk.INSTANCES=new WeakMap;var rk=function(){function e(t,n){p(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Zg(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new hk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new hk(this.firestore,sy(this._delegate,e))}catch(t){throw ik(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=$(e))instanceof ay&&ly(this._delegate,e)}},{key:"set",value:function(e,t){t=Hg("DocumentReference.set",t);try{return t?Og(this._delegate,e,t):Og(this._delegate,e)}catch(n){throw ik(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Lg(this._delegate,e):Lg.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw ik(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Vg(ey((e=this._delegate).firestore,py),[new wl(e._key,ol.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ak(n),a=ok(n,(function(t){return new uk(e.firestore,new Tg(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Mg(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Pg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ey(e,ay);var t=ey(e.firestore,py);return Hm(my(t),e._key,{source:"server"}).then((function(n){return Ug(t,e,n)}))}(this._delegate):function(e){e=ey(e,ay);var t=ey(e.firestore,py);return Hm(my(t),e._key).then((function(n){return Ug(t,e,n)}))}(this._delegate)).then((function(e){return new uk(t.firestore,new Tg(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new mo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new ay(n._delegate,r,new Fo(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new ay(n._delegate,r,t))}}]),e}();function ik(e,t,n){return e.message=e.message.replace(t,n),e}function ak(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Yg(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function ok(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Yg(e[0])?e[0]:Yg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var uk=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new rk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Dg(this._delegate,e._delegate)}}]),e}(),sk=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||fo(),t}}]),n}(uk),ck=function(){function e(t,n){p(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Zg(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,og(this._delegate,function(e,t,n){var r=t,i=ng("where",e);return ug._create(i,r,n)}(t,n,r)))}catch(i){throw ik(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,og(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ng("orderBy",e);return cg._create(n,t)}(t,n)))}catch(r){throw ik(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,og(this._delegate,(ty("limit",n=t),lg._create("limit",n,"F"))))}catch(r){throw ik(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,og(this._delegate,(ty("limitToLast",n=t),lg._create("limitToLast",n,"L"))))}catch(r){throw ik(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,og(this._delegate,hg.apply(void 0,arguments)))}catch(t){throw ik(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,og(this._delegate,dg.apply(void 0,arguments)))}catch(t){throw ik(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,og(this._delegate,pg.apply(void 0,arguments)))}catch(t){throw ik(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,og(this._delegate,mg.apply(void 0,arguments)))}catch(t){throw ik(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return fy(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Rg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=ey(e,oy);var t=ey(e.firestore,py),n=my(t),r=new Ng(t);return Wm(n,e._query,{source:"server"}).then((function(n){return new Cg(t,r,e,n)}))}(this._delegate):function(e){e=ey(e,oy);var t=ey(e.firestore,py),n=my(t),r=new Ng(t);return rg(e._query),Wm(n,e._query).then((function(n){return new Cg(t,r,e,n)}))}(this._delegate)).then((function(e){return new fk(t.firestore,new Cg(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ak(n),a=ok(n,(function(t){return new fk(e.firestore,new Cg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Mg(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(nk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),lk=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new sk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),fk=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new ck(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new sk(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new lk(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new sk(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Dg(this._delegate,e._delegate)}}]),e}(),hk=function(e){w(n,e);var t=S(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new rk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new rk(this.firestore,void 0===e?cy(this._delegate):cy(this._delegate,e))}catch(t){throw ik(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=ey(e.firestore,py),r=cy(e),i=_g(e.converter,t);return Vg(n,[Ly(Oy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ol.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new rk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return ly(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(nk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(ck);function dk(e){return ey(e,ay)}var vk,pk=function(){function e(){p(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=E(Ey,n)}return y(e,[{key:"isEqual",value:function(e){return(e=$(e))instanceof Ey&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Mo.keyField().canonicalString())}}]),e}(),mk=function(){function e(t){p(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Vy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new My("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Kg.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Gg.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new jy("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),yk={Firestore:Jg,GeoPoint:Iy,Timestamp:No,Blob:Xg,Transaction:ek,WriteBatch:tk,DocumentReference:rk,DocumentSnapshot:uk,Query:ck,QueryDocumentSnapshot:sk,QuerySnapshot:fk,CollectionReference:hk,FieldPath:pk,FieldValue:mk,setLogLevel:function(e){var t;t=e,ao.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ne("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},yk)))})(vk=Ct,(function(e,t){return new Jg(e,t,new $g)})),vk.registerVersion("@firebase/firestore-compat","0.3.8");var gk,kk="firebasestorage.googleapis.com",bk="storageBucket",wk=function(e){w(n,e);var t=S(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return p(this,n),(i=t.call(this,xk(e),"Firebase Storage: ".concat(r," (").concat(xk(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(k(i),n.prototype),i}return y(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return xk(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(z);function xk(e){return"storage/"+e}function _k(){return new wk(gk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Sk(){return new wk(gk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ek(){return new wk(gk.CANCELED,"User canceled the upload/download.")}function Tk(){return new wk(gk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ik(e){return new wk(gk.INVALID_ARGUMENT,e)}function Ck(){return new wk(gk.APP_DELETED,"The Firebase app was deleted.")}function Ak(e){return new wk(gk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dk(e,t){return new wk(gk.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Nk(e){throw new wk(gk.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(gk||(gk={}));var Pk,Rk=function(){function e(t,n){p(this,e),this.bucket=t,this.path_=n}return y(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new wk(gk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===kk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new wk(gk.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Ok=function(){function e(t){p(this,e),this.promise_=Promise.reject(t)}return y(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Lk(e){return"string"===typeof e||e instanceof String}function Mk(e){return Fk()&&e instanceof Blob}function Fk(){return"undefined"!==typeof Blob&&!B()}function Vk(e,t,n,r){if(r<t)throw Ik("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Ik("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Uk(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Bk(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function jk(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Pk||(Pk={}));var zk=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];p(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return y(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=_k();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?Ck():Ek());else i(Sk())}};this.canceled_?t(0,new qk(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var v=!1;function p(e){v||(v=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,p(!0)}),n),p}((function(t,n){if(n)t(!1,new qk(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Pk.NO_ERROR,a=r.getStatus();if(!n||jk(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===Pk.ABORT;t(!1,new qk(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new qk(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),qk=y((function e(t,n,r){p(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Kk(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Gk(){for(var e=Kk(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Fk())return new Blob(n);throw new wk(gk.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Hk(e){if("undefined"===typeof atob)throw t="base-64",new wk(gk.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var Wk={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Qk=y((function e(t,n){p(this,e),this.data=t,this.contentType=n||null}));function Xk(e,t){switch(e){case Wk.RAW:return new Qk(Yk(t));case Wk.BASE64:case Wk.BASE64URL:return new Qk($k(e,t));case Wk.DATA_URL:return new Qk(function(e){var t=new Jk(e);return t.base64?$k(Wk.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Dk(Wk.DATA_URL,"Malformed data URL.")}return Yk(t)}(t.rest)}(t),new Jk(t).contentType)}throw _k()}function Yk(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function $k(e,t){switch(e){case Wk.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Dk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Wk.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Dk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=Hk(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw Dk(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var Jk=y((function e(t){p(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Dk(Wk.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var Zk=function(){function e(t,n){p(this,e);var r=0,i="";Mk(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return y(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Mk(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Fk()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Gk.apply(null,i))}var a=n.map((function(e){return Lk(e)?Xk(Wk.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function eb(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function tb(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function nb(e,t){return t}var rb=y((function e(t,n,r,i){p(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||nb})),ib=null;function ab(){if(ib)return ib;var e=[];e.push(new rb("bucket")),e.push(new rb("generation")),e.push(new rb("metageneration")),e.push(new rb("name","fullPath",!0));var t=new rb("name");t.xform=function(e,t){return function(e){return!Lk(e)||e.length<2?e:tb(e)}(t)},e.push(t);var n=new rb("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new rb("timeCreated")),e.push(new rb("updated")),e.push(new rb("md5Hash",null,!0)),e.push(new rb("cacheControl",null,!0)),e.push(new rb("contentDisposition",null,!0)),e.push(new rb("contentEncoding",null,!0)),e.push(new rb("contentLanguage",null,!0)),e.push(new rb("contentType",null,!0)),e.push(new rb("metadata","customMetadata",!0)),ib=e}function ob(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Rk(n,r);return t._makeStorageReference(i)}})}(r,e),r}function ub(e,t,n){var r=eb(t);return null===r?null:ob(e,r,n)}function sb(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var cb="prefixes",lb="items";function fb(e,t,n){var r=eb(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[cb]){var i,a=g(n[cb]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new Rk(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[lb]){var s,c=g(n[lb]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new Rk(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var hb=y((function e(t,n,r,i){p(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function db(e){if(!e)throw _k()}function vb(e,t){return function(n,r){var i=ub(e,r,t);return db(null!==i),i}}function pb(e,t){return function(n,r){var i=ub(e,r,t);return db(null!==i),function(e,t,n,r){var i=eb(t);if(null===i)return null;if(!Lk(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Uk("/b/"+o(i)+"/o/"+o(a),n,r)+Bk({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function mb(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new wk(gk.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new wk(gk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new wk(gk.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new wk(gk.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function yb(e){var t=mb(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new wk(gk.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function gb(e,t,n){var r=Uk(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new hb(r,"GET",vb(e,n),i);return a.errorHandler=yb(t),a}function kb(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Uk(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new hb(o,"GET",function(e,t){return function(n,r){var i=fb(e,t,r);return db(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=mb(t),s}function bb(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function wb(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=bb(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+sb(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=Zk.getBlob(c,r,l);if(null===f)throw Tk();var h={name:s.fullPath},d=Uk(a,e.host,e._protocol),v=e.maxUploadRetryTime,p=new hb(d,"POST",vb(e,n),v);return p.urlParams=h,p.headers=o,p.body=f.uploadData(),p.errorHandler=mb(t),p}var xb=y((function e(t,n,r,i){p(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function _b(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){db(!1)}return db(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Sb=262144;function Eb(e,t,n,r,i,a,o,u){var s=new xb(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new wk(gk.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},v=r.slice(f,h);if(null===v)throw Tk();var p=t.maxUploadRetryTime,m=new hb(n,"POST",(function(e,n){var i,o=_b(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?vb(t,a)(e,n):null,new xb(u,c,"final"===o,i)}),p);return m.headers=d,m.body=v.uploadData(),m.progressCallback=u||null,m.errorHandler=mb(e),m}var Tb={STATE_CHANGED:"state_changed"},Ib={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Cb(e){switch(e){case"running":case"pausing":case"canceling":return Ib.RUNNING;case"paused":return Ib.PAUSED;case"success":return Ib.SUCCESS;case"canceled":return Ib.CANCELED;default:return Ib.ERROR}}var Ab=y((function e(t,n,r){p(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function Db(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Nb=null,Pb=function(){function e(){var t=this;p(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Pk.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Pk.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Pk.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return y(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Nk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Nk("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Nk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Nk("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Nk("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Rb=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Pb);function Ob(){return Nb?Nb():new Rb}var Lb=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;p(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=ab(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(gk.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(jk(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=Sk()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(gk.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return y(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=o(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=bb(t,r,i),u={name:o.fullPath},s=Uk(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=sb(o,n),f=e.maxUploadRetryTime,h=new hb(s,"POST",(function(e){var t;_b(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){db(!1)}return db(Lk(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=mb(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Ob,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new hb(n,"POST",(function(e){var t=_b(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){db(!1)}n||db(!1);var i=Number(n);return db(!isNaN(i)),new xb(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=mb(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Ob,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=Sb*this._chunkMultiplier,n=new xb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=Eb(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,Ob,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(Sb*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=gb(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Ob,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=wb(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Ob,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ek(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=Cb(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Ab(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(Cb(this._state)){case Ib.SUCCESS:Db(this._resolve.bind(null,this.snapshot))();break;case Ib.CANCELED:case Ib.ERROR:Db(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(Cb(this._state)){case Ib.RUNNING:case Ib.PAUSED:e.next&&Db(e.next.bind(e,this.snapshot))();break;case Ib.SUCCESS:e.complete&&Db(e.complete.bind(e))();break;case Ib.CANCELED:case Ib.ERROR:default:e.error&&Db(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Mb=function(){function e(t,n){p(this,e),this._service=t,this._location=n instanceof Rk?n:Rk.makeFromUrl(n,t.host)}return y(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Rk(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return tb(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Rk(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Ak(e)}}]),e}();function Fb(e,t,n){return Vb.apply(this,arguments)}function Vb(){return(Vb=te(J().mark((function e(t,n,r){var i,a,o,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,Ub(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,Z(u.prefixes)),(a=n.items).push.apply(a,Z(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,Fb(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ub(e,t){null!=t&&"number"===typeof t.maxResults&&Vk("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=kb(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Ob)}function Bb(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Uk(t.fullServerUrl(),e.host,e._protocol),a=sb(n,r),o=e.maxOperationRetryTime,u=new hb(i,"PATCH",vb(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=yb(t),u}(e.storage,e._location,t,ab());return e.storage.makeRequestWithTokens(n,Ob)}function jb(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Uk(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new hb(r,"GET",pb(e,n),i);return a.errorHandler=yb(t),a}(e.storage,e._location,ab());return e.storage.makeRequestWithTokens(t,Ob).then((function(e){if(null===e)throw new wk(gk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function zb(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Uk(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new hb(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=yb(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Ob)}function qb(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Rk(e._location.bucket,n);return new Mb(e.storage,r)}function Kb(e,t){if(e instanceof Wb){var n=e;if(null==n._bucket)throw new wk(gk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bk+"' property when initializing the app?");var r=new Mb(n,n._bucket);return null!=t?Kb(r,t):r}return void 0!==t?qb(e,t):e}function Gb(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Wb)return new Mb(e,t);throw Ik("To use ref(service, url), the first argument must be a Storage instance.")}return Kb(e,t)}function Hb(e,t){var n=null===t||void 0===t?void 0:t[bk];return null==n?null:Rk.makeFromBucketSpec(n,e)}var Wb=function(){function e(t,n,r,i,a){p(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=kk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Rk.makeFromBucketSpec(i,this._host):Hb(this._host,this.app.options)}return y(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Rk.makeFromBucketSpec(this._url,e):this._bucket=Hb(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Vk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Vk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=te(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=te(J().mark((function e(){var t,n;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Mb(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Ok(Ck());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=Bk(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new zk(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=te(J().mark((function e(t,n){var r,i,a,u;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=o(r,2),a=i[0],u=i[1],e.abrupt("return",this._makeRequest(t,n,a,u).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Qb="@firebase/storage",Xb="0.11.2",Yb="storage";function $b(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Lb(e,new Zk(t),n)}(e=$(e),t,n)}function Jb(e){return function(e){e._throwIfRoot("getMetadata");var t=gb(e.storage,e._location,ab());return e.storage.makeRequestWithTokens(t,Ob)}(e=$(e))}function Zb(e){return function(e){var t={prefixes:[],items:[]};return Fb(e,t).then((function(){return t}))}(e=$(e))}function ew(e,t){return Gb(e=$(e),t)}function tw(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:V(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function nw(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Wb(r,i,a,n,Ye)}qe(new ne(Yb,nw,"PUBLIC").setMultipleInstances(!0)),nt(Qb,Xb,""),nt(Qb,Xb,"esm2017");var rw=function(){function e(t,n,r){p(this,e),this._delegate=t,this.task=n,this.ref=r}return y(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),iw=function(){function e(t,n){p(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return y(e,[{key:"snapshot",get:function(){return new rw(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new rw(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new rw(e,i,i._ref))}:{next:t.next?function(e){return t.next(new rw(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),aw=function(){function e(t,n){p(this,e),this._delegate=t,this._service=n}return y(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new ow(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new ow(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),ow=function(){function e(t,n){p(this,e),this._delegate=t,this.storage=n}return y(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return qb(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new iw($b(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wk.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Xk(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new iw(new Lb(this._delegate,new Zk(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return Zb(this._delegate).then((function(t){return new aw(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return Ub(e=$(e),t)}(this._delegate,e||void 0).then((function(e){return new aw(e,t.storage)}))}},{key:"getMetadata",value:function(){return Jb(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return Bb(e=$(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return jb($(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),zb($(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Ak(e)}}]),e}(),uw=function(){function e(t,n){p(this,e),this.app=t,this._delegate=n}return y(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(sw(e))throw Ik("ref() expected a child path but got a URL, use refFromURL instead.");return new ow(ew(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!sw(e))throw Ik("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rk.makeFromUrl(e,this._delegate.host)}catch(t){throw Ik("refFromUrl() expected a valid full URL but got an invalid one.")}return new ow(ew(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};tw(this._delegate,e,t,n)}}]),e}();function sw(e){return/^[A-Za-z]+:\/\//.test(e)}function cw(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new uw(r,i)}!function(e){var t={TaskState:Ib,TaskEvent:Tb,StringFormat:Wk,Storage:uw,Reference:ow};e.INTERNAL.registerComponent(new ne("storage-compat",cw,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(Ct);Ct.initializeApp({apiKey:"AIzaSyATHU6cLjEG6Ttse12kNNUtJyEmop2-ICo",authDomain:"flamma19-imagemanager.firebaseapp.com",projectId:"flamma19-imagemanager",storageBucket:"flamma19-imagemanager.appspot.com",messagingSenderId:"102063113863",appId:"1:102063113863:web:e037ffca258b4220ac9a22"});var lw=Ct.storage(),fw=Ct.firestore(),hw=Ct.firestore.FieldValue.serverTimestamp(),dw=function(e){var n=o((0,t.useState)([]),2),r=n[0],i=n[1];return(0,t.useEffect)((function(){var t=fw.collection(e).orderBy("createdAt").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(v(v({},e.data()),{},{id:e.id}))})),i(t)}));return function(){return t()}}),[e]),{docs:r}},vw=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),pw=(0,t.createContext)({}),mw=(0,t.createContext)(null),yw="undefined"!==typeof document,gw=yw?t.useLayoutEffect:t.useEffect,kw=(0,t.createContext)({strict:!1});function bw(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function ww(e){return"string"===typeof e||Array.isArray(e)}function xw(e){return"object"===typeof e&&"function"===typeof e.start}var _w=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sw=["initial"].concat(_w);function Ew(e){return xw(e.animate)||Sw.some((function(t){return ww(e[t])}))}function Tw(e){return Boolean(Ew(e)||e.variants)}function Iw(e){var n=function(e,t){if(Ew(e)){var n=e.initial,r=e.animate;return{initial:!1===n||ww(n)?n:void 0,animate:ww(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(pw)),r=n.initial,i=n.animate;return(0,t.useMemo)((function(){return{initial:r,animate:i}}),[Cw(r),Cw(i)])}function Cw(e){return Array.isArray(e)?e.join(" "):e}var Aw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Dw={},Nw=function(e){Dw[e]={isEnabled:function(t){return Aw[e].some((function(e){return!!t[e]}))}}};for(var Pw in Aw)Nw(Pw);var Rw=(0,t.createContext)({}),Ow=(0,t.createContext)({}),Lw=Symbol.for("motionComponentSymbol");function Mw(e){var n=e.preloadedFeatures,r=e.createVisualElement,i=e.useRender,a=e.useVisualState,o=e.Component;n&&function(e){for(var t in e)Dw[t]=v(v({},Dw[t]),e[t])}(n);var u=(0,t.forwardRef)((function(e,u){var s,c=v(v(v({},(0,t.useContext)(vw)),e),{},{layoutId:Fw(e)}),l=c.isStatic,f=Iw(e),h=a(e,l);if(!l&&yw){f.visualElement=function(e,n,r,i){var a=(0,t.useContext)(pw).visualElement,o=(0,t.useContext)(kw),u=(0,t.useContext)(mw),s=(0,t.useContext)(vw).reducedMotion,c=(0,t.useRef)();i=i||o.renderer,!c.current&&i&&(c.current=i(e,{visualState:n,parent:a,props:r,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:s}));var l=c.current;return(0,t.useInsertionEffect)((function(){l&&l.update(r,u)})),gw((function(){l&&l.render()})),(0,t.useEffect)((function(){l&&l.updateFeatures()})),(window.HandoffAppearAnimations?gw:t.useEffect)((function(){l&&l.animationState&&l.animationState.animateChanges()})),l}(o,h,c,r);var d=(0,t.useContext)(Ow),p=(0,t.useContext)(kw).strict;f.visualElement&&(s=f.visualElement.loadFeatures(c,p,n,d))}return t.createElement(pw.Provider,{value:f},s&&f.visualElement?t.createElement(s,v({visualElement:f.visualElement},c)):null,i(o,e,function(e,n,r){return(0,t.useCallback)((function(t){t&&e.mount&&e.mount(t),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):bw(r)&&(r.current=t))}),[n])}(h,f.visualElement,u),h,l,f.visualElement))}));return u[Lw]=o,u}function Fw(e){var n=e.layoutId,r=(0,t.useContext)(Rw).id;return r&&void 0!==n?r+"-"+n:n}function Vw(e){function t(t){return Mw(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var Uw=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bw(e){return"string"===typeof e&&!e.includes("-")&&!!(Uw.indexOf(e)>-1||/[A-Z]/.test(e))}var jw={};var zw=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],qw=new Set(zw);function Kw(e,t){var n=t.layout,r=t.layoutId;return qw.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!jw[e]||"opacity"===e)}var Gw=function(e){return Boolean(e&&e.getVelocity)},Hw={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ww=zw.length;var Qw=function(e){return function(t){return"string"===typeof t&&t.startsWith(e)}},Xw=Qw("--"),Yw=Qw("var(--"),$w=function(e,t){return t&&"number"===typeof e?t.transform(e):e},Jw=function(e,t,n){return Math.min(Math.max(n,e),t)},Zw={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},ex=v(v({},Zw),{},{transform:function(e){return Jw(0,1,e)}}),tx=v(v({},Zw),{},{default:1}),nx=function(e){return Math.round(1e5*e)/1e5},rx=/(-)?([\d]*\.?[\d])+/g,ix=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,ax=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ox(e){return"string"===typeof e}var ux=function(e){return{test:function(t){return ox(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return"".concat(t).concat(e)}}},sx=ux("deg"),cx=ux("%"),lx=ux("px"),fx=ux("vh"),hx=ux("vw"),dx=v(v({},cx),{},{parse:function(e){return cx.parse(e)/100},transform:function(e){return cx.transform(100*e)}}),vx=v(v({},Zw),{},{transform:Math.round}),px={borderWidth:lx,borderTopWidth:lx,borderRightWidth:lx,borderBottomWidth:lx,borderLeftWidth:lx,borderRadius:lx,radius:lx,borderTopLeftRadius:lx,borderTopRightRadius:lx,borderBottomRightRadius:lx,borderBottomLeftRadius:lx,width:lx,maxWidth:lx,height:lx,maxHeight:lx,size:lx,top:lx,right:lx,bottom:lx,left:lx,padding:lx,paddingTop:lx,paddingRight:lx,paddingBottom:lx,paddingLeft:lx,margin:lx,marginTop:lx,marginRight:lx,marginBottom:lx,marginLeft:lx,rotate:sx,rotateX:sx,rotateY:sx,rotateZ:sx,scale:tx,scaleX:tx,scaleY:tx,scaleZ:tx,skew:sx,skewX:sx,skewY:sx,distance:lx,translateX:lx,translateY:lx,translateZ:lx,x:lx,y:lx,z:lx,perspective:lx,transformPerspective:lx,opacity:ex,originX:dx,originY:dx,originZ:lx,zIndex:vx,fillOpacity:ex,strokeOpacity:ex,numOctaves:vx};function mx(e,t,n,r){var i=e.style,a=e.vars,o=e.transform,u=e.transformOrigin,s=!1,c=!1,l=!0;for(var f in t){var h=t[f];if(Xw(f))a[f]=h;else{var d=px[f],v=$w(h,d);if(qw.has(f)){if(s=!0,o[f]=v,!l)continue;h!==(d.default||0)&&(l=!1)}else f.startsWith("origin")?(c=!0,u[f]=v):i[f]=v}}if(t.transform||(s||r?i.transform=function(e,t,n,r){for(var i=t.enableHardwareAcceleration,a=void 0===i||i,o=t.allowTransformNone,u=void 0===o||o,s="",c=0;c<Ww;c++){var l=zw[c];if(void 0!==e[l]){var f=Hw[l]||l;s+="".concat(f,"(").concat(e[l],") ")}}return a&&!e.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(e,n?"":s):u&&n&&(s="none"),s}(e.transform,n,l,r):i.transform&&(i.transform="none")),c){var p=u.originX,m=void 0===p?"50%":p,y=u.originY,g=void 0===y?"50%":y,k=u.originZ,b=void 0===k?0:k;i.transformOrigin="".concat(m," ").concat(g," ").concat(b)}}var yx=function(){return{style:{},transform:{},transformOrigin:{},vars:{}}};function gx(e,t,n){for(var r in t)Gw(t[r])||Kw(r,n)||(e[r]=t[r])}function kx(e,n,r){var i={};return gx(i,e.style||{},e),Object.assign(i,function(e,n,r){var i=e.transformTemplate;return(0,t.useMemo)((function(){var e=yx();return mx(e,n,{enableHardwareAcceleration:!r},i),Object.assign({},e.vars,e.style)}),[n])}(e,n,r)),e.transformValues?e.transformValues(i):i}function bx(e,t,n){var r={},i=kx(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}var wx=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function xx(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||wx.has(e)}var _x,Sx=function(e){return!xx(e)};try{(_x=require("@emotion/is-prop-valid").default)&&(Sx=function(e){return e.startsWith("on")?!xx(e):_x(e)})}catch(cm){}function Ex(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Tx(e,t,n){return"string"===typeof e?e:lx.transform(t+n*e)}var Ix={offset:"stroke-dashoffset",array:"stroke-dasharray"},Cx={offset:"strokeDashoffset",array:"strokeDasharray"};var Ax=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function Dx(e,t,n,r,i){var a=t.attrX,o=t.attrY,u=t.attrScale,s=t.originX,c=t.originY,l=t.pathLength,f=t.pathSpacing,h=void 0===f?1:f,d=t.pathOffset,v=void 0===d?0:d;if(mx(e,Ex(t,Ax),n,i),r)e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);else{e.attrs=e.style,e.style={};var p=e.attrs,m=e.style,y=e.dimensions;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(void 0!==s||void 0!==c||m.transform)&&(m.transformOrigin=function(e,t,n){var r=Tx(t,e.x,e.width),i=Tx(n,e.y,e.height);return"".concat(r," ").concat(i)}(y,void 0!==s?s:.5,void 0!==c?c:.5)),void 0!==a&&(p.x=a),void 0!==o&&(p.y=o),void 0!==u&&(p.scale=u),void 0!==l&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;var a=i?Ix:Cx;e[a.offset]=lx.transform(-r);var o=lx.transform(t),u=lx.transform(n);e[a.array]="".concat(o," ").concat(u)}(p,l,h,v,!1)}}var Nx=function(){return v(v({},yx()),{},{attrs:{}})},Px=function(e){return"string"===typeof e&&"svg"===e.toLowerCase()};function Rx(e,n,r,i){var a=(0,t.useMemo)((function(){var t=Nx();return Dx(t,n,{enableHardwareAcceleration:!1},Px(i),e.transformTemplate),v(v({},t.attrs),{},{style:v({},t.style)})}),[n]);if(e.style){var o={};gx(o,e.style,e),a.style=v(v({},o),a.style)}return a}function Ox(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(n,r,i,a,o){var u=a.latestValues,s=(Bw(n)?Rx:bx)(r,u,o,n),c=function(e,t,n){var r={};for(var i in e)"values"===i&&"object"===typeof e.values||(Sx(i)||!0===n&&xx(i)||!t&&!xx(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(r,"string"===typeof n,e),l=v(v(v({},c),s),{},{ref:i}),f=r.children,h=(0,t.useMemo)((function(){return Gw(f)?f.get():f}),[f]);return(0,t.createElement)(n,v(v({},l),{},{children:h}))}}var Lx=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()};function Mx(e,t,n,r){var i=t.style,a=t.vars;for(var o in Object.assign(e.style,i,r&&r.getProjectionStyles(n)),a)e.style.setProperty(o,a[o])}var Fx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Vx(e,t,n,r){for(var i in Mx(e,t,void 0,r),t.attrs)e.setAttribute(Fx.has(i)?i:Lx(i),t.attrs[i])}function Ux(e,t){var n=e.style,r={};for(var i in n)(Gw(n[i])||t.style&&Gw(t.style[i])||Kw(i,e))&&(r[i]=n[i]);return r}function Bx(e,t){var n=Ux(e,t);for(var r in e){if(Gw(e[r])||Gw(t[r]))n[-1!==zw.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function jx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}var zx=function(e){return Array.isArray(e)},qx=function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)},Kx=function(e){return zx(e)?e[e.length-1]||0:e};function Gx(e){var t=Gw(e)?e.get():e;return qx(t)?t.toValue():t}var Hx=["transitionEnd","transition"];var Wx=function(e){return function(n,r){var i=(0,t.useContext)(pw),a=(0,t.useContext)(mw),o=function(){return function(e,t,n,r){var i=e.scrapeMotionValuesFromProps,a=e.createRenderState,o=e.onMount,u={latestValues:Qx(t,n,r,i),renderState:a()};return o&&(u.mount=function(e){return o(t,e,u)}),u}(e,n,i,a)};return r?o():function(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}(o)}};function Qx(e,t,n,r){var i={},a=r(e,{});for(var o in a)i[o]=Gx(a[o]);var u=e.initial,s=e.animate,c=Ew(e),l=Tw(e);t&&l&&!c&&!1!==e.inherit&&(void 0===u&&(u=t.initial),void 0===s&&(s=t.animate));var f=!!n&&!1===n.initial,h=(f=f||!1===u)?s:u;h&&"boolean"!==typeof h&&!xw(h)&&(Array.isArray(h)?h:[h]).forEach((function(t){var n=jx(e,t);if(n){var r=n.transitionEnd,a=(n.transition,Ex(n,Hx));for(var o in a){var u=a[o];if(Array.isArray(u))u=u[f?u.length-1:0];null!==u&&(i[o]=u)}for(var s in r)i[s]=r[s]}}));return i}var Xx={useVisualState:Wx({scrapeMotionValuesFromProps:Bx,createRenderState:Nx,onMount:function(e,t,n){var r=n.renderState,i=n.latestValues;try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(a){r.dimensions={x:0,y:0,width:0,height:0}}Dx(r,i,{enableHardwareAcceleration:!1},Px(t.tagName),e.transformTemplate),Vx(t,r)}})},Yx={useVisualState:Wx({scrapeMotionValuesFromProps:Ux,createRenderState:yx})};function $x(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n)}}var Jx=function(e){return"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary};function Zx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}var e_=function(e){return function(t){return Jx(t)&&e(t,Zx(t))}};function t_(e,t,n,r){return $x(e,t,e_(n),r)}var n_=function(e,t){return function(n){return t(e(n))}},r_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(n_)};function i_(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var a_=i_("dragHorizontal"),o_=i_("dragVertical");function u_(e){var t=!1;if("y"===e)t=o_();else if("x"===e)t=a_();else{var n=a_(),r=o_();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function s_(){var e=u_(!0);return!e||(e(),!1)}var c_=function(){function e(t){p(this,e),this.isMounted=!1,this.node=t}return y(e,[{key:"update",value:function(){}}]),e}();var l_={delta:0,timestamp:0,isProcessing:!1},f_=!0,h_=!1,d_=["read","update","preRender","render","postRender"],v_=d_.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,i=!1,a=!1,o=new WeakSet,u={schedule:function(e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,u=a?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),-1===u.indexOf(e)&&(u.push(e),a&&i&&(r=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:function(s){if(i)a=!0;else{i=!0;var c=[n,t];if(t=c[0],(n=c[1]).length=0,r=t.length)for(var l=0;l<r;l++){var f=t[l];f(s),o.has(f)&&(u.schedule(f),e())}i=!1,a&&(a=!1,u.process(s))}}};return u}((function(){return h_=!0})),e}),{}),p_=function(e){return v_[e].process(l_)},m_=function e(t){h_=!1,l_.delta=f_?1e3/60:Math.max(Math.min(t-l_.timestamp,40),1),l_.timestamp=t,l_.isProcessing=!0,d_.forEach(p_),l_.isProcessing=!1,h_&&(f_=!1,requestAnimationFrame(e))},y_=d_.reduce((function(e,t){var n=v_[t];return e[t]=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return h_||(h_=!0,f_=!0,l_.isProcessing||requestAnimationFrame(m_)),n.schedule(e,t,r)},e}),{});function g_(e){d_.forEach((function(t){return v_[t].cancel(e)}))}function k_(e,t){var n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return t_(e.current,n,(function(n,i){if("touch"!==n.type&&!s_()){var a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&y_.update((function(){return a[r](n,i)}))}}),{passive:!e.getProps()[r]})}var b_=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"mount",value:function(){this.unmount=r_(k_(this.node,!0),k_(this.node,!1))}},{key:"unmount",value:function(){}}]),n}(c_),w_=function(e){w(n,e);var t=S(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).isActive=!1,e}return y(n,[{key:"onFocus",value:function(){var e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}},{key:"onBlur",value:function(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}},{key:"mount",value:function(){var e=this;this.unmount=r_($x(this.node.current,"focus",(function(){return e.onFocus()})),$x(this.node.current,"blur",(function(){return e.onBlur()})))}},{key:"unmount",value:function(){}}]),n}(c_),x_=function e(t,n){return!!n&&(t===n||e(t,n.parentElement))},__=function(e){return e};function S_(e,t){if(t){var n=new PointerEvent("pointer"+e);t(n,Zx(n))}}var E_=function(e){w(n,e);var t=S(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).removeStartListeners=__,e.removeEndListeners=__,e.removeAccessibleListeners=__,e.startPointerPress=function(t,n){if(e.removeEndListeners(),!e.isPressing){var r=e.node.getProps(),i=t_(window,"pointerup",(function(t,n){if(e.checkPressEnd()){var r=e.node.getProps(),i=r.onTap,a=r.onTapCancel;y_.update((function(){x_(e.node.current,t.target)?i&&i(t,n):a&&a(t,n)}))}}),{passive:!(r.onTap||r.onPointerUp)}),a=t_(window,"pointercancel",(function(t,n){return e.cancelPress(t,n)}),{passive:!(r.onTapCancel||r.onPointerCancel)});e.removeEndListeners=r_(i,a),e.startPress(t,n)}},e.startAccessiblePress=function(){var t=$x(e.node.current,"keydown",(function(t){if("Enter"===t.key&&!e.isPressing){e.removeEndListeners(),e.removeEndListeners=$x(e.node.current,"keyup",(function(t){"Enter"===t.key&&e.checkPressEnd()&&S_("up",(function(t,n){var r=e.node.getProps().onTap;r&&y_.update((function(){return r(t,n)}))}))})),S_("down",(function(t,n){e.startPress(t,n)}))}})),n=$x(e.node.current,"blur",(function(){e.isPressing&&S_("cancel",(function(t,n){return e.cancelPress(t,n)}))}));e.removeAccessibleListeners=r_(t,n)},e}return y(n,[{key:"startPress",value:function(e,t){this.isPressing=!0;var n=this.node.getProps(),r=n.onTapStart;n.whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&y_.update((function(){return r(e,t)}))}},{key:"checkPressEnd",value:function(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!s_()}},{key:"cancelPress",value:function(e,t){if(this.checkPressEnd()){var n=this.node.getProps().onTapCancel;n&&y_.update((function(){return n(e,t)}))}}},{key:"mount",value:function(){var e=this.node.getProps(),t=t_(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=$x(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=r_(t,n)}},{key:"unmount",value:function(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}]),n}(c_),T_=["root"],I_=new WeakMap,C_=new WeakMap,A_=function(e){var t=I_.get(e.target);t&&t(e)},D_=function(e){e.forEach(A_)};function N_(e,t,n){var r=function(e){var t=e.root,n=Ex(e,T_),r=t||document;C_.has(r)||C_.set(r,{});var i=C_.get(r),a=JSON.stringify(n);return i[a]||(i[a]=new IntersectionObserver(D_,v({root:t},n))),i[a]}(t);return I_.set(e,n),r.observe(e),function(){I_.delete(e),r.unobserve(e)}}var P_={some:0,all:1},R_=function(e){w(n,e);var t=S(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).hasEnteredView=!1,e.isInView=!1,e}return y(n,[{key:"startObserver",value:function(){var e=this;this.unmount();var t=this.node.getProps().viewport,n=void 0===t?{}:t,r=n.root,i=n.margin,a=n.amount,o=void 0===a?"some":a,u=n.once,s={root:r?r.current:void 0,rootMargin:i,threshold:"number"===typeof o?o:P_[o]};return N_(this.node.current,s,(function(t){var n=t.isIntersecting;if(e.isInView!==n&&(e.isInView=n,!u||n||!e.hasEnteredView)){n&&(e.hasEnteredView=!0),e.node.animationState&&e.node.animationState.setActive("whileInView",n);var r=e.node.getProps(),i=r.onViewportEnter,a=r.onViewportLeave,o=n?i:a;o&&o(t)}}))}},{key:"mount",value:function(){this.startObserver()}},{key:"update",value:function(){if("undefined"!==typeof IntersectionObserver){var e=this.node,t=e.props,n=e.prevProps,r=["amount","margin","root"].some(function(e){var t=e.viewport,n=void 0===t?{}:t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.viewport,a=void 0===i?{}:i;return function(e){return n[e]!==a[e]}}(t,n));r&&this.startObserver()}}},{key:"unmount",value:function(){}}]),n}(c_);var O_={inView:{Feature:R_},tap:{Feature:E_},focus:{Feature:w_},hover:{Feature:b_}};function L_(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function M_(e,t,n){var r=e.getProps();return jx(r,t,void 0!==n?n:r.custom,function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.getVelocity()})),t}(e))}var F_="data-"+Lx("framerAppearId"),V_=__,U_=__;var B_=function(e){return 1e3*e},j_=function(e){return e/1e3},z_=!1,q_=function(e){return Array.isArray(e)&&"number"===typeof e[0]};function K_(e){return Boolean(!e||"string"===typeof e&&H_[e]||q_(e)||Array.isArray(e)&&e.every(K_))}var G_=function(e){var t=o(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return"cubic-bezier(".concat(n,", ").concat(r,", ").concat(i,", ").concat(a,")")},H_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:G_([0,.65,.55,1]),circOut:G_([.55,0,1,.45]),backIn:G_([.31,.01,.66,-.59]),backOut:G_([.33,1.53,.69,.99])};function W_(e){if(e)return q_(e)?G_(e):Array.isArray(e)?e.map(W_):H_[e]}var Q_={waapi:function(){return Object.hasOwnProperty.call(Element.prototype,"animate")}},X_={},Y_={},$_=function(e){Y_[e]=function(){return void 0===X_[e]&&(X_[e]=Q_[e]()),X_[e]}};for(var J_ in Q_)$_(J_);var Z_=function(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e},eS=1e-7,tS=12;function nS(e,t,n,r){if(e===t&&n===r)return __;var i=function(t){return function(e,t,n,r,i){var a,o,u=0;do{(a=Z_(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o}while(Math.abs(a)>eS&&++u<tS);return o}(t,0,1,e,n)};return function(e){return 0===e||1===e?e:Z_(i(e),t,r)}}var rS=nS(.42,0,1,1),iS=nS(0,0,.58,1),aS=nS(.42,0,.58,1),oS=function(e){return Array.isArray(e)&&"number"!==typeof e[0]},uS=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},sS=function(e){return function(t){return 1-e(1-t)}},cS=function(e){return 1-Math.sin(Math.acos(e))},lS=sS(cS),fS=uS(lS),hS=nS(.33,1.53,.69,.99),dS=sS(hS),vS=uS(dS),pS={linear:__,easeIn:rS,easeInOut:aS,easeOut:iS,circIn:cS,circInOut:fS,circOut:lS,backIn:dS,backInOut:vS,backOut:hS,anticipate:function(e){return(e*=2)<1?.5*dS(e):.5*(2-Math.pow(2,-10*(e-1)))}},mS=function(e){if(Array.isArray(e)){U_(4===e.length,"Cubic bezier arrays must contain four numerical values.");var t=o(e,4);return nS(t[0],t[1],t[2],t[3])}return"string"===typeof e?(U_(void 0!==pS[e],"Invalid easing type '".concat(e,"'")),pS[e]):e},yS=function(e,t){return function(n){return Boolean(ox(n)&&ax.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},gS=function(e,t,n){return function(r){var i;if(!ox(r))return r;var a=o(r.match(rx),4),u=a[0],s=a[1],c=a[2],l=a[3];return h(i={},e,parseFloat(u)),h(i,t,parseFloat(s)),h(i,n,parseFloat(c)),h(i,"alpha",void 0!==l?parseFloat(l):1),i}},kS=v(v({},Zw),{},{transform:function(e){return Math.round(function(e){return Jw(0,255,e)}(e))}}),bS={test:yS("rgb","red"),parse:gS("red","green","blue"),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha,a=void 0===i?1:i;return"rgba("+kS.transform(t)+", "+kS.transform(n)+", "+kS.transform(r)+", "+nx(ex.transform(a))+")"}};var wS={test:yS("#"),parse:function(e){var t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:bS.transform},xS={test:yS("hsl","hue"),parse:gS("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha,a=void 0===i?1:i;return"hsla("+Math.round(t)+", "+cx.transform(nx(n))+", "+cx.transform(nx(r))+", "+nx(ex.transform(a))+")"}},_S={test:function(e){return bS.test(e)||wS.test(e)||xS.test(e)},parse:function(e){return bS.test(e)?bS.parse(e):xS.test(e)?xS.parse(e):wS.parse(e)},transform:function(e){return ox(e)?e:e.hasOwnProperty("red")?bS.transform(e):xS.transform(e)}},SS=function(e,t,n){return-n*e+n*t+e};function ES(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var TS=function(e,t,n){var r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},IS=[wS,bS,xS];function CS(e){var t=function(e){return IS.find((function(t){return t.test(e)}))}(e);U_(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));var n=t.parse(e);return t===xS&&(n=function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha;t/=360,r/=100;var a=0,o=0,u=0;if(n/=100){var s=r<.5?r*(1+n):r+n-r*n,c=2*r-s;a=ES(c,s,t+1/3),o=ES(c,s,t),u=ES(c,s,t-1/3)}else a=o=u=r;return{red:Math.round(255*a),green:Math.round(255*o),blue:Math.round(255*u),alpha:i}}(n)),n}var AS=function(e,t){var n=CS(e),r=CS(t),i=v({},n);return function(e){return i.red=TS(n.red,r.red,e),i.green=TS(n.green,r.green,e),i.blue=TS(n.blue,r.blue,e),i.alpha=SS(n.alpha,r.alpha,e),bS.transform(i)}};var DS={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:__},NS={regex:ix,countKey:"Colors",token:"${c}",parse:_S.parse},PS={regex:rx,countKey:"Numbers",token:"${n}",parse:Zw.parse};function RS(e,t){var n,r=t.regex,i=t.countKey,a=t.token,o=t.parse,u=e.tokenised.match(r);u&&(e["num"+i]=u.length,e.tokenised=e.tokenised.replace(r,a),(n=e.values).push.apply(n,Z(u.map(o))))}function OS(e){var t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&RS(n,DS),RS(n,NS),RS(n,PS),n}function LS(e){return OS(e).values}function MS(e){var t=OS(e),n=t.values,r=t.numColors,i=t.numVars,a=t.tokenised,o=n.length;return function(e){for(var t=a,n=0;n<o;n++)t=n<i?t.replace(DS.token,e[n]):n<i+r?t.replace(NS.token,_S.transform(e[n])):t.replace(PS.token,nx(e[n]));return t}}var FS=function(e){return"number"===typeof e?0:e};var VS={test:function(e){var t,n;return isNaN(e)&&ox(e)&&((null===(t=e.match(rx))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(ix))||void 0===n?void 0:n.length)||0)>0},parse:LS,createTransformer:MS,getAnimatableNone:function(e){var t=LS(e);return MS(e)(t.map(FS))}},US=function(e,t){return function(n){return"".concat(n>0?t:e)}};function BS(e,t){return"number"===typeof e?function(n){return SS(e,t,n)}:_S.test(e)?AS(e,t):e.startsWith("var(")?US(e,t):qS(e,t)}var jS=function(e,t){var n=Z(e),r=n.length,i=e.map((function(e,n){return BS(e,t[n])}));return function(e){for(var t=0;t<r;t++)n[t]=i[t](e);return n}},zS=function(e,t){var n=v(v({},e),t),r={};for(var i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=BS(e[i],t[i]));return function(e){for(var t in r)n[t]=r[t](e);return n}},qS=function(e,t){var n=VS.createTransformer(t),r=OS(e),i=OS(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?r_(jS(r.values,i.values),n):(V_(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),US(e,t))},KS=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r},GS=function(e,t){return function(n){return SS(e,t,n)}};function HS(e,t,n){for(var r=[],i=n||function(e){return"number"===typeof e?GS:"string"===typeof e?_S.test(e)?AS:qS:Array.isArray(e)?jS:"object"===typeof e?zS:GS}(e[0]),a=e.length-1,o=0;o<a;o++){var u=i(e[o],e[o+1]);if(t){var s=Array.isArray(t)?t[o]||__:t;u=r_(s,u)}r.push(u)}return r}function WS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.clamp,i=void 0===r||r,a=n.ease,o=n.mixer,u=e.length;if(U_(u===t.length,"Both input and output ranges must be the same length"),1===u)return function(){return t[0]};e[0]>e[u-1]&&(e=Z(e).reverse(),t=Z(t).reverse());var s=HS(t,a,o),c=s.length,l=function(t){var n=0;if(c>1)for(;n<e.length-2&&!(t<e[n+1]);n++);var r=KS(e[n],e[n+1],t);return s[n](r)};return i?function(t){return l(Jw(e[0],e[u-1],t))}:l}function QS(e){var t=[0];return function(e,t){for(var n=e[e.length-1],r=1;r<=t;r++){var i=KS(0,t,r);e.push(SS(n,1,i))}}(t,e.length-1),t}function XS(e){var t,n,r=e.duration,i=void 0===r?300:r,a=e.keyframes,o=e.times,u=e.ease,s=void 0===u?"easeInOut":u,c=oS(s)?s.map(mS):mS(s),l={done:!1,value:a[0]},f=function(e,t){return e.map((function(e){return e*t}))}(o&&o.length===a.length?o:QS(a),i),h=WS(f,a,{ease:Array.isArray(c)?c:(t=a,n=c,t.map((function(){return n||aS})).splice(0,t.length-1))});return{calculatedDuration:i,next:function(e){return l.value=h(e),l.done=e>=i,l}}}function YS(e,t){return t?e*(1e3/t):0}var $S=5;function JS(e,t,n){var r=Math.max(t-$S,0);return YS(n-e(r),t-r)}var ZS=.001,eE=.01,tE=10,nE=.05,rE=1;function iE(e){var t,n,r=e.duration,i=void 0===r?800:r,a=e.bounce,o=void 0===a?.25:a,u=e.velocity,s=void 0===u?0:u,c=e.mass,l=void 0===c?1:c;V_(i<=B_(tE),"Spring duration must be 10 seconds or less");var f=1-o;f=Jw(nE,rE,f),i=Jw(eE,tE,j_(i)),f<1?(t=function(e){var t=e*f,n=t*i,r=t-s,a=oE(e,f),o=Math.exp(-n);return ZS-r/a*o},n=function(e){var n=e*f*i,r=n*s+s,a=Math.pow(f,2)*Math.pow(e,2)*i,o=Math.exp(-n),u=oE(Math.pow(e,2),f);return(-t(e)+ZS>0?-1:1)*((r-a)*o)/u}):(t=function(e){return Math.exp(-e*i)*((e-s)*i+1)-ZS},n=function(e){return Math.exp(-e*i)*(i*i*(s-e))});var h=function(e,t,n){for(var r=n,i=1;i<aE;i++)r-=e(r)/t(r);return r}(t,n,5/i);if(i=B_(i),isNaN(h))return{stiffness:100,damping:10,duration:i};var d=Math.pow(h,2)*l;return{stiffness:d,damping:2*f*Math.sqrt(l*d),duration:i}}var aE=12;function oE(e,t){return e*Math.sqrt(1-t*t)}var uE=["keyframes","restDelta","restSpeed"],sE=["duration","bounce"],cE=["stiffness","damping","mass"];function lE(e,t){return t.some((function(t){return void 0!==e[t]}))}function fE(e){var t,n=e.keyframes,r=e.restDelta,i=e.restSpeed,a=Ex(e,uE),o=n[0],u=n[n.length-1],s={done:!1,value:o},c=function(e){var t=v({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!lE(e,cE)&&lE(e,sE)){var n=iE(e);(t=v(v(v({},t),n),{},{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(a),l=c.stiffness,f=c.damping,h=c.mass,d=c.velocity,p=c.duration,m=c.isResolvedFromDuration,y=d?-j_(d):0,g=f/(2*Math.sqrt(l*h)),k=u-o,b=j_(Math.sqrt(l/h)),w=Math.abs(k)<5;if(i||(i=w?.01:2),r||(r=w?.005:.5),g<1){var x=oE(b,g);t=function(e){var t=Math.exp(-g*b*e);return u-t*((y+g*b*k)/x*Math.sin(x*e)+k*Math.cos(x*e))}}else if(1===g)t=function(e){return u-Math.exp(-b*e)*(k+(y+b*k)*e)};else{var _=b*Math.sqrt(g*g-1);t=function(e){var t=Math.exp(-g*b*e),n=Math.min(_*e,300);return u-t*((y+g*b*k)*Math.sinh(n)+_*k*Math.cosh(n))/_}}return{calculatedDuration:m&&p||null,next:function(e){var n=t(e);if(m)s.done=e>=p;else{var a=y;0!==e&&(a=g<1?JS(t,e,n):0);var o=Math.abs(a)<=i,c=Math.abs(u-n)<=r;s.done=o&&c}return s.value=s.done?u:n,s}}}function hE(e){var t=e.keyframes,n=e.velocity,r=void 0===n?0:n,i=e.power,a=void 0===i?.8:i,o=e.timeConstant,u=void 0===o?325:o,s=e.bounceDamping,c=void 0===s?10:s,l=e.bounceStiffness,f=void 0===l?500:l,h=e.modifyTarget,d=e.min,v=e.max,p=e.restDelta,m=void 0===p?.5:p,y=e.restSpeed,g=t[0],k={done:!1,value:g},b=function(e){return void 0===d?v:void 0===v||Math.abs(d-e)<Math.abs(v-e)?d:v},w=a*r,x=g+w,_=void 0===h?x:h(x);_!==x&&(w=_-g);var S,E,T=function(e){return-w*Math.exp(-e/u)},I=function(e){return _+T(e)},C=function(e){var t=T(e),n=I(e);k.done=Math.abs(t)<=m,k.value=k.done?_:n},A=function(e){(function(e){return void 0!==d&&e<d||void 0!==v&&e>v})(k.value)&&(S=e,E=fE({keyframes:[k.value,b(k.value)],velocity:JS(I,e,k.value),damping:c,stiffness:f,restDelta:m,restSpeed:y}))};return A(0),{calculatedDuration:null,next:function(e){var t=!1;return E||void 0!==S||(t=!0,C(e),A(e)),void 0!==S&&e>S?E.next(e-S):(!t&&C(e),k)}}}var dE=function(e){var t=function(t){var n=t.timestamp;return e(n)};return{start:function(){return y_.update(t,!0)},stop:function(){return g_(t)},now:function(){return l_.isProcessing?l_.timestamp:performance.now()}}},vE=2e4;function pE(e){for(var t=0,n=e.next(t);!n.done&&t<vE;)t+=50,n=e.next(t);return t>=vE?1/0:t}var mE=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],yE={decay:hE,inertia:hE,tween:XS,keyframes:XS,spring:fE};function gE(e){var t,n,r,i=e.autoplay,a=void 0===i||i,o=e.delay,u=void 0===o?0:o,s=e.driver,c=void 0===s?dE:s,l=e.keyframes,f=e.type,h=void 0===f?"keyframes":f,d=e.repeat,p=void 0===d?0:d,m=e.repeatDelay,y=void 0===m?0:m,g=e.repeatType,k=void 0===g?"loop":g,b=e.onPlay,w=e.onStop,x=e.onComplete,_=e.onUpdate,S=Ex(e,mE),E=1,T=!1,I=function(){t&&t(),n=new Promise((function(e){t=e}))};I();var C,A=yE[h]||XS;A!==XS&&"number"!==typeof l[0]&&(C=WS([0,100],l,{clamp:!1}),l=[0,100]);var D,N=A(v(v({},S),{},{keyframes:l}));"mirror"===k&&(D=A(v(v({},S),{},{keyframes:Z(l).reverse(),velocity:-(S.velocity||0)})));var P="idle",R=null,O=null,L=null;null===N.calculatedDuration&&p&&(N.calculatedDuration=pE(N));var M=N.calculatedDuration,F=1/0,V=1/0;null!==M&&(V=(F=M+y)*(p+1)-y);var U=0,B=function(e){if(null!==O){E>0&&(O=Math.min(O,e));var t=(U=null!==R?R:(e-O)*E)-u,n=t<0;U=Math.max(t,0),"finished"===P&&null===R&&(U=V);var r=U,i=N;if(p){var a=U/F,o=Math.floor(a),s=a%1;!s&&a>=1&&(s=1),1===s&&o--,o=Math.min(o,p+1);var c=Boolean(o%2);c&&("reverse"===k?(s=1-s,y&&(s-=y/F)):"mirror"===k&&(i=D));var f=Jw(0,1,s);U>V&&(f="reverse"===k&&c?1:0),r=f*F}var h=n?{done:!1,value:l[0]}:i.next(r);C&&(h.value=C(h.value));var d=h.done;n||null===M||(d=U>=V);var v=null===R&&("finished"===P||"running"===P&&d||E<0&&U<=0);return _&&_(h.value),v&&q(),h}},j=function(){r&&r.stop(),r=void 0},z=function(){P="idle",j(),I(),O=L=null},q=function(){P="finished",x&&x(),j(),I()},K=function(){if(!T){r||(r=c(B));var e=r.now();b&&b(),null!==R?O=e-R:O&&"finished"!==P||(O=e),L=O,R=null,P="running",r.start()}};a&&K();var G={then:function(e,t){return n.then(e,t)},get time(){return j_(U)},set time(e){e=B_(e),U=e,null===R&&r&&0!==E?O=r.now()-e/E:R=e},get duration(){var e=null===N.calculatedDuration?pE(N):N.calculatedDuration;return j_(e)},get speed(){return E},set speed(e){e!==E&&r&&(E=e,G.time=j_(U))},get state(){return P},play:K,pause:function(){P="paused",R=U},stop:function(){T=!0,"idle"!==P&&(P="idle",w&&w(),z())},cancel:function(){null!==L&&B(L),z()},complete:function(){P="finished"},sample:function(e){return O=0,B(e)}};return G}var kE=["onUpdate","onComplete"],bE=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function wE(e,t,n){n.onUpdate;var r=n.onComplete,i=Ex(n,kE);if(!(Y_.waapi()&&bE.has(t)&&!i.repeatDelay&&"mirror"!==i.repeatType&&0!==i.damping&&"inertia"!==i.type))return!1;var a,o,u=!1,s=function(){o=new Promise((function(e){a=e}))};s();var c=i.keyframes,l=i.duration,f=void 0===l?300:l,d=i.ease,p=i.times;if(function(e,t){return"spring"===t.type||"backgroundColor"===e||!K_(t.ease)}(t,i)){for(var m=gE(v(v({},i),{},{repeat:0,delay:0})),y={done:!1,value:c[0]},g=[],k=0;!y.done&&k<2e4;)y=m.sample(k),g.push(y.value),k+=10;p=void 0,c=g,f=k-10,d="linear"}var b=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.delay,a=void 0===i?0:i,o=r.duration,u=r.repeat,s=void 0===u?0:u,c=r.repeatType,l=void 0===c?"loop":c,f=r.ease,d=r.times,v=h({},t,n);d&&(v.offset=d);var p=W_(f);return Array.isArray(p)&&(v.easing=p),e.animate(v,{delay:a,duration:o,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:"reverse"===l?"alternate":"normal"})}(e.owner.current,t,c,v(v({},i),{},{duration:f,ease:d,times:p})),w=function(){return b.cancel()},x=function(){y_.update(w),a(),s()};return b.onfinish=function(){e.set(function(e,t){var n=t.repeat,r=t.repeatType;return e[n&&"loop"!==(void 0===r?"loop":r)&&n%2===1?0:e.length-1]}(c,i)),r&&r(),x()},{then:function(e,t){return o.then(e,t)},get time(){return j_(b.currentTime||0)},set time(e){b.currentTime=B_(e)},get speed(){return b.playbackRate},set speed(e){b.playbackRate=e},get duration(){return j_(f)},play:function(){u||(b.play(),g_(w))},pause:function(){return b.pause()},stop:function(){if(u=!0,"idle"!==b.playState){var t=b.currentTime;if(t){var n=gE(v(v({},i),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}x()}},complete:function(){return b.finish()},cancel:x}}var xE={type:"spring",stiffness:500,damping:25,restSpeed:10},_E={type:"keyframes",duration:.8},SE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},EE=function(e,t){var n=t.keyframes;return n.length>2?_E:qw.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:xE:SE},TE=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!VS.test(t)&&"0"!==t||t.startsWith("url(")))},IE=new Set(["brightness","contrast","saturate","opacity"]);function CE(e){var t=o(e.slice(0,-1).split("("),2),n=t[0],r=t[1];if("drop-shadow"===n)return e;var i=o(r.match(rx)||[],1)[0];if(!i)return e;var a=r.replace(i,""),u=IE.has(n)?1:0;return i!==r&&(u*=100),n+"("+u+a+")"}var AE=/([a-z-]*)\(.*?\)/g,DE=v(v({},VS),{},{getAnimatableNone:function(e){var t=e.match(AE);return t?t.map(CE).join(" "):e}}),NE=v(v({},px),{},{color:_S,backgroundColor:_S,outlineColor:_S,fill:_S,stroke:_S,borderColor:_S,borderTopColor:_S,borderRightColor:_S,borderBottomColor:_S,borderLeftColor:_S,filter:DE,WebkitFilter:DE}),PE=function(e){return NE[e]};function RE(e,t){var n=PE(e);return n!==DE&&(n=VS),n.getAnimatableNone?n.getAnimatableNone(t):void 0}var OE=function(e){return/^0[^.\s]+$/.test(e)};function LE(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||OE(e):void 0}var ME=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function FE(e,t){return e[t]||e.default||e}var VE=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(i){var a=FE(r,e)||{},o=a.delay||r.delay||0,u=r.elapsed,s=void 0===u?0:u;s-=B_(o);var c=function(e,t,n,r){var i,a=TE(t,n);i=Array.isArray(n)?Z(n):[null,n];for(var o=void 0!==r.from?r.from:e.get(),u=void 0,s=[],c=0;c<i.length;c++)null===i[c]&&(i[c]=0===c?o:i[c-1]),LE(i[c])?s.push(c):"string"===typeof i[c]&&(u=i[c]);if(a&&s.length&&u)for(var l=0;l<s.length;l++)i[s[l]]=RE(t,u);return i}(t,e,n,a),l=c[0],f=c[c.length-1],h=TE(e,l),d=TE(e,f);V_(h===d,"You are trying to animate ".concat(e,' from "').concat(l,'" to "').concat(f,'". ').concat(l," is not an animatable value - to enable this animation set ").concat(l," to a value animatable to ").concat(f," via the `style` property."));var p=v(v({keyframes:c,velocity:t.getVelocity(),ease:"easeOut"},a),{},{delay:-s,onUpdate:function(e){t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:function(){i(),a.onComplete&&a.onComplete()}});if(function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from,e.elapsed;var t=Ex(e,ME);return!!Object.keys(t).length}(a)||(p=v(v({},p),EE(e,p))),p.duration&&(p.duration=B_(p.duration)),p.repeatDelay&&(p.repeatDelay=B_(p.repeatDelay)),!h||!d||z_||!1===a.type)return function(e){var t=e.keyframes,n=e.delay,r=e.onUpdate,i=e.onComplete,a=function(){return r&&r(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:__,pause:__,stop:__,then:function(e){return e(),Promise.resolve()},cancel:__,complete:__}};return n?gE({keyframes:[0,1],duration:0,delay:n,onComplete:a}):a()}(p);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){var m=wE(t,e,p);if(m)return m}return gE(p)}};function UE(e){return Boolean(Gw(e)&&e.add)}var BE=function(e){return/^\-?\d*\.?\d+$/.test(e)};function jE(e,t){-1===e.indexOf(t)&&e.push(t)}function zE(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var qE=function(){function e(){p(this,e),this.subscriptions=[]}return y(e,[{key:"add",value:function(e){var t=this;return jE(this.subscriptions,e),function(){return zE(t.subscriptions,e)}}},{key:"notify",value:function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var a=this.subscriptions[i];a&&a(e,t,n)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}]),e}(),KE=function(){function e(t){var n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,e),this.version="10.12.8",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.prev=r.current,r.current=e;var n=l_.delta,i=l_.timestamp;r.lastUpdated!==i&&(r.timeDelta=n,r.lastUpdated=i,y_.postRender(r.scheduleVelocityCheck)),r.prev!==r.current&&r.events.change&&r.events.change.notify(r.current),r.events.velocityChange&&r.events.velocityChange.notify(r.getVelocity()),t&&r.events.renderRequest&&r.events.renderRequest.notify(r.current)},this.scheduleVelocityCheck=function(){return y_.postRender(r.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==r.lastUpdated&&(r.prev=r.current,r.events.velocityChange&&r.events.velocityChange.notify(r.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(n=this.current,!isNaN(parseFloat(n))),this.owner=i.owner}return y(e,[{key:"onChange",value:function(e){return this.on("change",e)}},{key:"on",value:function(e,t){var n=this;this.events[e]||(this.events[e]=new qE);var r=this.events[e].add(t);return"change"===e?function(){r(),y_.read((function(){n.events.change.getSize()||n.stop()}))}:r}},{key:"clearListeners",value:function(){for(var e in this.events)this.events[e].clear()}},{key:"attach",value:function(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}},{key:"setWithVelocity",value:function(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}},{key:"jump",value:function(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}},{key:"get",value:function(){return this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){return this.canTrackVelocity?YS(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}},{key:"start",value:function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.animation=e(n),t.events.animationStart&&t.events.animationStart.notify()})).then((function(){t.events.animationComplete&&t.events.animationComplete.notify(),t.clearAnimation()}))}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.animation}},{key:"clearAnimation",value:function(){delete this.animation}},{key:"destroy",value:function(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}]),e}();function GE(e,t){return new KE(e,t)}var HE=function(e){return function(t){return t.test(e)}},WE=[Zw,lx,cx,sx,hx,fx,{test:function(e){return"auto"===e},parse:function(e){return e}}],QE=function(e){return WE.find(HE(e))},XE=[].concat(Z(WE),[_S,VS]),YE=function(e){return XE.find(HE(e))},$E=["transitionEnd","transition"];function JE(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,GE(n))}function ZE(e,t){var n=M_(e,t),r=n?e.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,a=void 0===i?{}:i,o=(r.transition,Ex(r,$E));for(var u in o=v(v({},o),a)){JE(e,u,Kx(o[u]))}}function eT(e,t){if(t)return(t[e]||t.default||t).from}var tT=["transition","transitionEnd"];function nT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.delay,i=void 0===r?0:r,a=n.transitionOverride,o=n.type,u=e.makeTargetAnimatable(t),s=u.transition,c=void 0===s?e.getDefaultTransition():s,l=u.transitionEnd,f=Ex(u,tT),h=e.getValue("willChange");a&&(c=a);var d=[],p=o&&e.animationState&&e.animationState.getState()[o],m=function(t){var n=e.getValue(t),r=f[t];if(!n||void 0===r||p&&function(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}(p,t))return"continue";var a=v({delay:i,elapsed:0},c);if(window.HandoffAppearAnimations&&!n.hasAnimated){var o=e.getProps()[F_];o&&(a.elapsed=window.HandoffAppearAnimations(o,t,n,y_))}n.start(VE(t,n,r,e.shouldReduceMotion&&qw.has(t)?{type:!1}:a));var u=n.animation;UE(h)&&(h.add(t),u.then((function(){return h.remove(t)}))),d.push(u)};for(var y in f)m(y);return l&&Promise.all(d).then((function(){l&&ZE(e,l)})),d}function rT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=M_(e,t,n.custom),i=(r||{}).transition,a=void 0===i?e.getDefaultTransition()||{}:i;n.transitionOverride&&(a=n.transitionOverride);var u=r?function(){return Promise.all(nT(e,r,n))}:function(){return Promise.resolve()},s=e.variantChildren&&e.variantChildren.size?function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=a,o=i.delayChildren,u=void 0===o?0:o,s=i.staggerChildren,c=i.staggerDirection;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0,o=[],u=(e.variantChildren.size-1)*r,s=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return u-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(iT).forEach((function(e,r){e.notify("AnimationStart",t),o.push(rT(e,t,v(v({},a),{},{delay:n+s(r)})).then((function(){return e.notify("AnimationComplete",t)})))})),Promise.all(o)}(e,t,u+r,s,c,n)}:function(){return Promise.resolve()},c=a.when;if(c){var l=o("beforeChildren"===c?[u,s]:[s,u],2),f=l[0],h=l[1];return f().then((function(){return h()}))}return Promise.all([u(),s(n.delay)])}function iT(e,t){return e.sortNodePosition(t)}var aT=["transition","transitionEnd"],oT=Z(_w).reverse(),uT=_w.length;function sT(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){var i=t.map((function(t){return rT(e,t,r)}));n=Promise.all(i)}else if("string"===typeof t)n=rT(e,t,r);else{var a="function"===typeof t?M_(e,t,r.custom):t;n=Promise.all(nT(e,a,r))}return n.then((function(){return e.notify("AnimationComplete",t)}))}(e,n,r)})))}}function cT(e){var t=sT(e),n={animate:lT(!0),whileInView:lT(),whileHover:lT(),whileTap:lT(),whileDrag:lT(),whileFocus:lT(),exit:lT()},r=!0,i=function(t,n){var r=M_(e,n);if(r){r.transition;var i=r.transitionEnd,a=Ex(r,aT);t=v(v(v({},t),a),i)}return t};function a(a,o){for(var u=e.getProps(),s=e.getVariantContext(!0)||{},c=[],l=new Set,f={},h=1/0,d=function(){var t=oT[p],d=n[t],m=void 0!==u[t]?u[t]:s[t],y=ww(m),g=t===o?d.isActive:null;!1===g&&(h=p);var k=m===s[t]&&m!==u[t]&&y;if(k&&r&&e.manuallyAnimateOnMount&&(k=!1),d.protectedKeys=v({},f),!d.isActive&&null===g||!m&&!d.prevProp||xw(m)||"boolean"===typeof m)return"continue";var b=function(e,t){if("string"===typeof t)return t!==e;if(Array.isArray(t))return!L_(t,e);return!1}(d.prevProp,m),w=b||t===o&&d.isActive&&!k&&y||p>h&&y,x=Array.isArray(m)?m:[m],_=x.reduce(i,{});!1===g&&(_={});var S=d.prevResolvedValues,E=void 0===S?{}:S,T=v(v({},E),_),I=function(e){w=!0,l.delete(e),d.needsAnimating[e]=!0};for(var C in T){var A=_[C],D=E[C];f.hasOwnProperty(C)||(A!==D?zx(A)&&zx(D)?!L_(A,D)||b?I(C):d.protectedKeys[C]=!0:void 0!==A?I(C):l.add(C):void 0!==A&&l.has(C)?I(C):d.protectedKeys[C]=!0)}d.prevProp=m,d.prevResolvedValues=_,d.isActive&&(f=v(v({},f),_)),r&&e.blockInitialAnimation&&(w=!1),w&&!k&&c.push.apply(c,Z(x.map((function(e){return{animation:e,options:v({type:t},a)}}))))},p=0;p<uT;p++)d();if(l.size){var m={};l.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(m[t]=n)})),c.push({animation:m})}var y=Boolean(c.length);return r&&!1===u.initial&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(c):Promise.resolve()}return{animateChanges:a,setActive:function(t,r,i){var o;if(n[t].isActive===r)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;var u=a(i,t);for(var s in n)n[s].protectedKeys={};return u},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function lT(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var fT=function(e){w(n,e);var t=S(n);function n(e){var r;return p(this,n),r=t.call(this,e),e.animationState||(e.animationState=cT(e)),r}return y(n,[{key:"updateAnimationControlsSubscription",value:function(){var e=this.node.getProps().animate;this.unmount(),xw(e)&&(this.unmount=e.subscribe(this.node))}},{key:"mount",value:function(){this.updateAnimationControlsSubscription()}},{key:"update",value:function(){this.node.getProps().animate!==(this.node.prevProps||{}).animate&&this.updateAnimationControlsSubscription()}},{key:"unmount",value:function(){}}]),n}(c_),hT=0,dT=function(e){w(n,e);var t=S(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).id=hT++,e}return y(n,[{key:"update",value:function(){var e=this;if(this.node.presenceContext){var t=this.node.presenceContext,n=t.isPresent,r=t.onExitComplete,i=t.custom,a=(this.node.prevPresenceContext||{}).isPresent;if(this.node.animationState&&n!==a){var o=this.node.animationState.setActive("exit",!n,{custom:null!==i&&void 0!==i?i:this.node.getProps().custom});r&&!n&&o.then((function(){return r(e.id)}))}}}},{key:"mount",value:function(){var e=(this.node.presenceContext||{}).register;e&&(this.unmount=e(this.id))}},{key:"unmount",value:function(){}}]),n}(c_),vT={animation:{Feature:fT},exit:{Feature:dT}},pT=function(e,t){return Math.abs(e-t)};var mT=function(){function e(t,n){var r=this,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).transformPagePoint;if(p(this,e),this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=kT(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=function(e,t){var n=pT(e.x,t.x),r=pT(e.y,t.y);return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,a=l_.timestamp;r.history.push(v(v({},i),{},{timestamp:a}));var o=r.handlers,u=o.onStart,s=o.onMove;t||(u&&u(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),s&&s(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=yT(t,r.transformPagePoint),y_.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){if(r.end(),r.lastMoveEvent&&r.lastMoveEventInfo){var n=r.handlers,i=n.onEnd,a=n.onSessionEnd,o=kT("pointercancel"===e.type?r.lastMoveEventInfo:yT(t,r.transformPagePoint),r.history);r.startEvent&&i&&i(e,o),a&&a(e,o)}},Jx(t)){this.handlers=n,this.transformPagePoint=i;var a=yT(Zx(t),this.transformPagePoint),o=a.point,u=l_.timestamp;this.history=[v(v({},o),{},{timestamp:u})];var s=n.onSessionStart;s&&s(t,kT(a,this.history)),this.removeListeners=r_(t_(window,"pointermove",this.handlePointerMove),t_(window,"pointerup",this.handlePointerUp),t_(window,"pointercancel",this.handlePointerUp))}}return y(e,[{key:"updateHandlers",value:function(e){this.handlers=e}},{key:"end",value:function(){this.removeListeners&&this.removeListeners(),g_(this.updatePoint)}}]),e}();function yT(e,t){return t?{point:t(e.point)}:e}function gT(e,t){return{x:e.x-t.x,y:e.y-t.y}}function kT(e,t){var n=e.point;return{point:n,delta:gT(n,wT(t)),offset:gT(n,bT(t)),velocity:xT(t,.1)}}function bT(e){return e[0]}function wT(e){return e[e.length-1]}function xT(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=wT(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>B_(t)));)n--;if(!r)return{x:0,y:0};var a=j_(i.timestamp-r.timestamp);if(0===a)return{x:0,y:0};var o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function _T(e){return e.max-e.min}function ST(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function ET(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=SS(t.min,t.max,e.origin),e.scale=_T(n)/_T(t),(ST(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=SS(n.min,n.max,e.origin)-e.originPoint,(ST(e.translate)||isNaN(e.translate))&&(e.translate=0)}function TT(e,t,n,r){ET(e.x,t.x,n.x,r?r.originX:void 0),ET(e.y,t.y,n.y,r?r.originY:void 0)}function IT(e,t,n){e.min=n.min+t.min,e.max=e.min+_T(t)}function CT(e,t,n){e.min=t.min-n.min,e.max=e.min+_T(t)}function AT(e,t,n){CT(e.x,t.x,n.x),CT(e.y,t.y,n.y)}function DT(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function NT(e,t){var n=t.min-e.min,r=t.max-e.max;if(t.max-t.min<e.max-e.min){var i=[r,n];n=i[0],r=i[1]}return{min:n,max:r}}var PT=.35;function RT(e,t,n){return{min:OT(e,t),max:OT(e,n)}}function OT(e,t){return"number"===typeof e?e:e[t]||0}var LT=function(){return{x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}},MT=function(){return{x:{min:0,max:0},y:{min:0,max:0}}};function FT(e){return[e("x"),e("y")]}function VT(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function UT(e){return void 0===e||1===e}function BT(e){var t=e.scale,n=e.scaleX,r=e.scaleY;return!UT(t)||!UT(n)||!UT(r)}function jT(e){return BT(e)||zT(e)||e.z||e.rotate||e.rotateX||e.rotateY}function zT(e){return qT(e.x)||qT(e.y)}function qT(e){return e&&"0%"!==e}function KT(e,t,n){return n+t*(e-n)}function GT(e,t,n,r,i){return void 0!==i&&(e=KT(e,i,r)),KT(e,n,r)+t}function HT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=GT(e.min,t,n,r,i),e.max=GT(e.max,t,n,r,i)}function WT(e,t){var n=t.x,r=t.y;HT(e.x,n.translate,n.scale,n.originPoint),HT(e.y,r.translate,r.scale,r.originPoint)}function QT(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function XT(e,t){e.min=e.min+t,e.max=e.max+t}function YT(e,t,n){var r=o(n,3),i=r[0],a=r[1],u=r[2],s=void 0!==t[u]?t[u]:.5,c=SS(e.min,e.max,s);HT(e,t[i],t[a],c,t.scale)}var $T=["x","scaleX","originX"],JT=["y","scaleY","originY"];function ZT(e,t){YT(e.x,t,$T),YT(e.y,t,JT)}function eI(e,t){return VT(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var tI=new WeakMap,nI=function(){function e(t){p(this,e),this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=MT(),this.visualElement=t}return y(e,[{key:"start",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).snapToCursor,r=void 0!==n&&n,i=this.visualElement.presenceContext;if(!i||!1!==i.isPresent){this.panSession=new mT(e,{onSessionStart:function(e){t.stopAnimation(),r&&t.snapToCursor(Zx(e,"page").point)},onStart:function(e,n){var r=t.getProps(),i=r.drag,a=r.dragPropagation,o=r.onDragStart;if(!i||a||(t.openGlobalLock&&t.openGlobalLock(),t.openGlobalLock=u_(i),t.openGlobalLock)){t.isDragging=!0,t.currentDirection=null,t.resolveConstraints(),t.visualElement.projection&&(t.visualElement.projection.isAnimationBlocked=!0,t.visualElement.projection.target=void 0),FT((function(e){var n=t.getAxisMotionValue(e).get()||0;if(cx.test(n)){var r=t.visualElement.projection;if(r&&r.layout){var i=r.layout.layoutBox[e];if(i)n=_T(i)*(parseFloat(n)/100)}}t.originPoint[e]=n})),o&&y_.update((function(){return o(e,n)}),!1,!0);var u=t.visualElement.animationState;u&&u.setActive("whileDrag",!0)}},onMove:function(e,n){var r=t.getProps(),i=r.dragPropagation,a=r.dragDirectionLock,o=r.onDirectionLock,u=r.onDrag;if(i||t.openGlobalLock){var s=n.offset;if(a&&null===t.currentDirection)return t.currentDirection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==t.currentDirection&&o&&o(t.currentDirection));t.updateAxis("x",n.point,s),t.updateAxis("y",n.point,s),t.visualElement.render(),u&&u(e,n)}},onSessionEnd:function(e,n){return t.stop(e,n)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}}},{key:"stop",value:function(e,t){var n=this.isDragging;if(this.cancel(),n){var r=t.velocity;this.startAnimation(r);var i=this.getProps().onDragEnd;i&&y_.update((function(){return i(e,t)}))}}},{key:"cancel",value:function(){this.isDragging=!1;var e=this.visualElement,t=e.projection,n=e.animationState;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}},{key:"updateAxis",value:function(e,t,n){var r=this.getProps().drag;if(n&&rI(e,r,this.currentDirection)){var i=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?SS(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?SS(i,e,n.max):Math.min(e,i)),e}(a,this.constraints[e],this.elastic[e])),i.set(a)}}},{key:"resolveConstraints",value:function(){var e=this,t=this.getProps(),n=t.dragConstraints,r=t.dragElastic,i=(this.visualElement.projection||{}).layout,a=this.constraints;n&&bw(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!i)&&function(e,t){var n=t.top,r=t.left,i=t.bottom,a=t.right;return{x:DT(e.x,r,a),y:DT(e.y,n,i)}}(i.layoutBox,n),this.elastic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PT;return!1===e?e=0:!0===e&&(e=PT),{x:RT(e,"left","right"),y:RT(e,"top","bottom")}}(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&FT((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.layoutBox[t],e.constraints[t]))}))}},{key:"resolveRefConstraints",value:function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!bw(t))return!1;var r=t.current;U_(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var i=this.visualElement.projection;if(!i||!i.layout)return!1;var a=function(e,t,n){var r=eI(e,n),i=t.scroll;return i&&(XT(r.x,i.offset.x),XT(r.y,i.offset.y)),r}(r,i.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:NT(e.x,t.x),y:NT(e.y,t.y)}}(i.layout.layoutBox,a);if(n){var u=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!u,u&&(o=VT(u))}return o}},{key:"startAnimation",value:function(e){var t=this,n=this.getProps(),r=n.drag,i=n.dragMomentum,a=n.dragElastic,o=n.dragTransition,u=n.dragSnapToOrigin,s=n.onDragTransitionEnd,c=this.constraints||{},l=FT((function(n){if(rI(n,r,t.currentDirection)){var s=c&&c[n]||{};u&&(s={min:0,max:0});var l=a?200:1e6,f=a?40:1e7,h=v(v({type:"inertia",velocity:i?e[n]:0,bounceStiffness:l,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10},o),s);return t.startAxisValueAnimation(n,h)}}));return Promise.all(l).then(s)}},{key:"startAxisValueAnimation",value:function(e,t){var n=this.getAxisMotionValue(e);return n.start(VE(e,n,0,t))}},{key:"stopAnimation",value:function(){var e=this;FT((function(t){return e.getAxisMotionValue(t).stop()}))}},{key:"getAxisMotionValue",value:function(e){var t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}},{key:"snapToCursor",value:function(e){var t=this;FT((function(n){if(rI(n,t.getProps().drag,t.currentDirection)){var r=t.visualElement.projection,i=t.getAxisMotionValue(n);if(r&&r.layout){var a=r.layout.layoutBox[n],o=a.min,u=a.max;i.set(e[n]-SS(o,u,.5))}}}))}},{key:"scalePositionWithinConstraints",value:function(){var e=this;if(this.visualElement.current){var t=this.getProps(),n=t.drag,r=t.dragConstraints,i=this.visualElement.projection;if(bw(r)&&i&&this.constraints){this.stopAnimation();var a={x:0,y:0};FT((function(t){var n=e.getAxisMotionValue(t);if(n){var r=n.get();a[t]=function(e,t){var n=.5,r=_T(e),i=_T(t);return i>r?n=KS(t.min,t.max-r,e.min):r>i&&(n=KS(e.min,e.max-i,t.min)),Jw(0,1,n)}({min:r,max:r},e.constraints[t])}}));var o=this.visualElement.getProps().transformTemplate;this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),FT((function(t){if(rI(t,n,null)){var r=e.getAxisMotionValue(t),i=e.constraints[t],o=i.min,u=i.max;r.set(SS(o,u,a[t]))}}))}}}},{key:"addListeners",value:function(){var e=this;if(this.visualElement.current){tI.set(this.visualElement,this);var t=t_(this.visualElement.current,"pointerdown",(function(t){var n=e.getProps(),r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&e.start(t)})),n=function(){bw(e.getProps().dragConstraints)&&(e.constraints=e.resolveRefConstraints())},r=this.visualElement.projection,i=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),n();var a=$x(window,"resize",(function(){return e.scalePositionWithinConstraints()})),o=r.addEventListener("didUpdate",(function(t){var n=t.delta,r=t.hasLayoutChanged;e.isDragging&&r&&(FT((function(t){var r=e.getAxisMotionValue(t);r&&(e.originPoint[t]+=n[t].translate,r.set(r.get()+n[t].translate))})),e.visualElement.render())}));return function(){a(),t(),i(),o&&o()}}}},{key:"getProps",value:function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,a=e.dragPropagation,o=void 0!==a&&a,u=e.dragConstraints,s=void 0!==u&&u,c=e.dragElastic,l=void 0===c?PT:c,f=e.dragMomentum,h=void 0===f||f;return v(v({},e),{},{drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:s,dragElastic:l,dragMomentum:h})}}]),e}();function rI(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var iI=function(e){w(n,e);var t=S(n);function n(e){var r;return p(this,n),(r=t.call(this,e)).removeGroupControls=__,r.removeListeners=__,r.controls=new nI(e),r}return y(n,[{key:"mount",value:function(){var e=this.node.getProps().dragControls;e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||__}},{key:"unmount",value:function(){this.removeGroupControls(),this.removeListeners()}}]),n}(c_),aI=function(e){return function(t,n){e&&y_.update((function(){return e(t,n)}))}},oI=function(e){w(n,e);var t=S(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).removePointerDownListener=__,e}return y(n,[{key:"onPointerDown",value:function(e){this.session=new mT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}},{key:"createPanHandlers",value:function(){var e=this,t=this.node.getProps(),n=t.onPanSessionStart,r=t.onPanStart,i=t.onPan,a=t.onPanEnd;return{onSessionStart:aI(n),onStart:aI(r),onMove:i,onEnd:function(t,n){delete e.session,a&&y_.update((function(){return a(t,n)}))}}}},{key:"mount",value:function(){var e=this;this.removePointerDownListener=t_(this.node.current,"pointerdown",(function(t){return e.onPointerDown(t)}))}},{key:"update",value:function(){this.session&&this.session.updateHandlers(this.createPanHandlers())}},{key:"unmount",value:function(){this.removePointerDownListener(),this.session&&this.session.end()}}]),n}(c_);var uI={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sI(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var cI={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!lx.test(e))return e;e=parseFloat(e)}var n=sI(e,t.target.x),r=sI(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},lI={correct:function(e,t){var n=t.treeScale,r=t.projectionDelta,i=e,a=VS.parse(e);if(a.length>5)return i;var o=VS.createTransformer(e),u="number"!==typeof a[0]?1:0,s=r.x.scale*n.x,c=r.y.scale*n.y;a[0+u]/=s,a[1+u]/=c;var l=SS(s,c,.5);return"number"===typeof a[2+u]&&(a[2+u]/=l),"number"===typeof a[3+u]&&(a[3+u]/=l),o(a)}},fI=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props,r=n.visualElement,i=n.layoutGroup,a=n.switchLayoutGroup,o=n.layoutId,u=r.projection;e=dI,Object.assign(jw,e),u&&(i.group&&i.group.add(u),a&&a.register&&o&&a.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",(function(){t.safeToRemove()})),u.setOptions(v(v({},u.options),{},{onExitComplete:function(){return t.safeToRemove()}}))),uI.hasEverUpdated=!0}},{key:"getSnapshotBeforeUpdate",value:function(e){var t=this,n=this.props,r=n.layoutDependency,i=n.visualElement,a=n.drag,o=n.isPresent,u=i.projection;return u?(u.isPresent=o,a||e.layoutDependency!==r||void 0===r?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||y_.postRender((function(){var e=u.getStack();e&&e.members.length||t.safeToRemove()}))),null):null}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.visualElement.projection;t&&(t.root.didUpdate(),queueMicrotask((function(){!t.currentAnimation&&t.isLead()&&e.safeToRemove()})))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,r=e.switchLayoutGroup,i=t.projection;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}},{key:"safeToRemove",value:function(){var e=this.props.safeToRemove;e&&e()}},{key:"render",value:function(){return null}}]),n}(t.Component);function hI(e){var n=function(){var e=(0,t.useContext)(mw);if(null===e)return[!0,null];var n=e.isPresent,r=e.onExitComplete,i=e.register,a=(0,t.useId)();return(0,t.useEffect)((function(){return i(a)}),[]),!n&&r?[!1,function(){return r&&r(a)}]:[!0]}(),r=o(n,2),i=r[0],a=r[1],u=(0,t.useContext)(Rw);return t.createElement(fI,v(v({},e),{},{layoutGroup:u,switchLayoutGroup:(0,t.useContext)(Ow),isPresent:i,safeToRemove:a}))}var dI={borderRadius:v(v({},cI),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:cI,borderTopRightRadius:cI,borderBottomLeftRadius:cI,borderBottomRightRadius:cI,boxShadow:lI},vI=["TopLeft","TopRight","BottomLeft","BottomRight"],pI=vI.length,mI=function(e){return"string"===typeof e?parseFloat(e):e},yI=function(e){return"number"===typeof e||lx.test(e)};function gI(e,t){return void 0!==e[t]?e[t]:e.borderRadius}var kI=wI(0,.5,lS),bI=wI(.5,.95,__);function wI(e,t,n){return function(r){return r<e?0:r>t?1:n(KS(e,t,r))}}function xI(e,t){e.min=t.min,e.max=t.max}function _I(e,t){xI(e.x,t.x),xI(e.y,t.y)}function SI(e,t,n,r,i){return e=KT(e-=t,1/n,r),void 0!==i&&(e=KT(e,1/i,r)),e}function EI(e,t,n,r,i){var a=o(n,3),u=a[0],s=a[1],c=a[2];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;if(cx.test(t)&&(t=parseFloat(t),t=SS(o.min,o.max,t/100)-o.min),"number"===typeof t){var u=SS(a.min,a.max,r);e===a&&(u-=t),e.min=SI(e.min,t,n,u,i),e.max=SI(e.max,t,n,u,i)}}(e,t[u],t[s],t[c],t.scale,r,i)}var TI=["x","scaleX","originX"],II=["y","scaleY","originY"];function CI(e,t,n,r){EI(e.x,t,TI,n?n.x:void 0,r?r.x:void 0),EI(e.y,t,II,n?n.y:void 0,r?r.y:void 0)}function AI(e){return 0===e.translate&&1===e.scale}function DI(e){return AI(e.x)&&AI(e.y)}function NI(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function PI(e){return _T(e.x)/_T(e.y)}var RI=function(){function e(){p(this,e),this.members=[]}return y(e,[{key:"add",value:function(e){jE(this.members,e),e.scheduleRender()}},{key:"remove",value:function(e){if(zE(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}}},{key:"relegate",value:function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var r=n;r>=0;r--){var i=this.members[r];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)}},{key:"promote",value:function(e,t){var n=this.lead;e!==n&&(this.prevLead=n,this.lead=e,e.show(),n&&(n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&n.hide()))}},{key:"exitAnimationComplete",value:function(){this.members.forEach((function(e){var t=e.options,n=e.resumingFrom;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}},{key:"scheduleRender",value:function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))}},{key:"removeLeadSnapshot",value:function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}]),e}();function OI(e,t,n){var r="",i=e.x.translate/t.x,a=e.y.translate/t.y;if((i||a)&&(r="translate3d(".concat(i,"px, ").concat(a,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){var o=n.rotate,u=n.rotateX,s=n.rotateY;o&&(r+="rotate(".concat(o,"deg) ")),u&&(r+="rotateX(".concat(u,"deg) ")),s&&(r+="rotateY(".concat(s,"deg) "))}var c=e.x.scale*t.x,l=e.y.scale*t.y;return 1===c&&1===l||(r+="scale(".concat(c,", ").concat(l,")")),r||"none"}var LI=function(e,t){return e.depth-t.depth},MI=function(){function e(){p(this,e),this.children=[],this.isDirty=!1}return y(e,[{key:"add",value:function(e){jE(this.children,e),this.isDirty=!0}},{key:"remove",value:function(e){zE(this.children,e),this.isDirty=!0}},{key:"forEach",value:function(e){this.isDirty&&this.children.sort(LI),this.isDirty=!1,this.children.forEach(e)}}]),e}();var FI=["","X","Y","Z"],VI=0,UI={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function BI(e){var t=e.attachResizeListener,n=e.defaultParent,r=e.measureScroll,i=e.checkIsScrollRoot,a=e.resetTransform;return function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();p(this,e),this.id=VI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=function(){t.isUpdating&&(t.isUpdating=!1,t.clearAllSnapshots())},this.updateProjection=function(){var e;UI.totalNodes=UI.resolvedTargetDeltas=UI.recalculatedProjection=0,t.nodes.forEach(qI),t.nodes.forEach(XI),t.nodes.forEach(YI),t.nodes.forEach(KI),e=UI,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=i?i.root||i:this,this.path=i?[].concat(Z(i.path),[i]):[],this.parent=i,this.depth=i?i.depth+1:0;for(var a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new MI)}return y(e,[{key:"addEventListener",value:function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new qE),this.eventHandlers.get(e).add(t)}},{key:"notifyListeners",value:function(e){for(var t=this.eventHandlers.get(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify.apply(t,r)}},{key:"hasListeners",value:function(e){return this.eventHandlers.has(e)}},{key:"mount",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(!this.instance){var i;this.isSVG=(i=e)instanceof SVGElement&&"svg"!==i.tagName,this.instance=e;var a=this.options,o=a.layoutId,u=a.layout,s=a.visualElement;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(u||o)&&(this.isLayoutDirty=!0),t){var c,l=function(){return n.root.updateBlockedByResize=!1};t(e,(function(){n.root.updateBlockedByResize=!0,c&&c(),c=function(e,t){var n=performance.now(),r=function r(i){var a=i.timestamp-n;a>=t&&(g_(r),e(a-t))};return y_.read(r,!0),function(){return g_(r)}}(l,250),uI.hasAnimatedSinceResize&&(uI.hasAnimatedSinceResize=!1,n.nodes.forEach(QI))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&s&&(o||u)&&this.addEventListener("didUpdate",(function(e){var t=e.delta,r=e.hasLayoutChanged,i=e.hasRelativeTargetChanged,a=e.layout;if(n.isTreeAnimationBlocked())return n.target=void 0,void(n.relativeTarget=void 0);var o=n.options.transition||s.getDefaultTransition()||nC,u=s.getProps(),c=u.onLayoutAnimationStart,l=u.onLayoutAnimationComplete,f=!n.targetLayout||!NI(n.targetLayout,a)||i,h=!r&&i;if(n.options.layoutRoot||n.resumeFrom&&n.resumeFrom.instance||h||r&&(f||!n.currentAnimation)){n.resumeFrom&&(n.resumingFrom=n.resumeFrom,n.resumingFrom.resumingFrom=void 0),n.setAnimationOrigin(t,h);var d=v(v({},FE(o,"layout")),{},{onPlay:c,onComplete:l});(s.shouldReduceMotion||n.options.layoutRoot)&&(d.delay=0,d.type=!1),n.startAnimation(d)}else r||0!==n.animationProgress||QI(n),n.isLead()&&n.options.onExitComplete&&n.options.onExitComplete();n.targetLayout=a}))}}},{key:"unmount",value:function(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);var e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,g_(this.updateProjection)}},{key:"blockUpdate",value:function(){this.updateManuallyBlocked=!0}},{key:"unblockUpdate",value:function(){this.updateManuallyBlocked=!1}},{key:"isUpdateBlocked",value:function(){return this.updateManuallyBlocked||this.updateBlockedByResize}},{key:"isTreeAnimationBlocked",value:function(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}},{key:"startUpdate",value:function(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($I),this.animationId++)}},{key:"getTransformTemplate",value:function(){var e=this.options.visualElement;return e&&e.getProps().transformTemplate}},{key:"willUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())this.options.onExitComplete&&this.options.onExitComplete();else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var t=0;t<this.path.length;t++){var n=this.path[t];n.shouldResetTransform=!0,n.updateScroll("snapshot"),n.options.layoutRoot&&n.willUpdate(!1)}var r=this.options,i=r.layoutId,a=r.layout;if(void 0!==i||a){var o=this.getTransformTemplate();this.prevTransformTemplateValue=o?o(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}}},{key:"update",value:function(){if(this.updateScheduled=!1,this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(HI);this.isUpdating&&(this.isUpdating=!1,this.nodes.forEach(WI),this.nodes.forEach(jI),this.nodes.forEach(zI),this.clearAllSnapshots(),v_.update.process(l_),v_.preRender.process(l_),v_.render.process(l_))}},{key:"didUpdate",value:function(){var e=this;this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((function(){return e.update()})))}},{key:"clearAllSnapshots",value:function(){this.nodes.forEach(GI),this.sharedNodes.forEach(JI)}},{key:"scheduleUpdateProjection",value:function(){y_.preRender(this.updateProjection,!1,!0)}},{key:"scheduleCheckAfterUnmount",value:function(){var e=this;y_.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))}},{key:"updateSnapshot",value:function(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}},{key:"updateLayout",value:function(){if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var e=0;e<this.path.length;e++){this.path[e].updateScroll()}var t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=MT(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);var n=this.options.visualElement;n&&n.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}}},{key:"updateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:i(this.instance),offset:r(this.instance)})}},{key:"resetTransform",value:function(){if(a){var e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!DI(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&(t||jT(this.latestValues)||i)&&(a(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}}},{key:"measure",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.measurePageBox(),r=this.removeElementScroll(n);return t&&(r=this.removeTransform(r)),rC((e=r).x),rC(e.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:r,latestValues:{},source:this.id}}},{key:"measurePageBox",value:function(){var e=this.options.visualElement;if(!e)return MT();var t=e.measureViewportBox(),n=this.root.scroll;return n&&(XT(t.x,n.offset.x),XT(t.y,n.offset.y)),t}},{key:"removeElementScroll",value:function(e){var t=MT();_I(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n],i=r.scroll,a=r.options;if(r!==this.root&&i&&a.layoutScroll){if(i.isRoot){_I(t,e);var o=this.root.scroll;o&&(XT(t.x,-o.offset.x),XT(t.y,-o.offset.y))}XT(t.x,i.offset.x),XT(t.y,i.offset.y)}}return t}},{key:"applyTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=MT();_I(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ZT(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),jT(i.latestValues)&&ZT(n,i.latestValues)}return jT(this.latestValues)&&ZT(n,this.latestValues),n}},{key:"removeTransform",value:function(e){var t=MT();_I(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n];if(r.instance&&jT(r.latestValues)){BT(r.latestValues)&&r.updateSnapshot();var i=MT();_I(i,r.measurePageBox()),CI(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,i)}}return jT(this.latestValues)&&CI(t,this.latestValues),t}},{key:"setTargetDelta",value:function(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}},{key:"setOptions",value:function(e){this.options=v(v(v({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}},{key:"clearMeasurements",value:function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}},{key:"forceRelativeParentToResolveTarget",value:function(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==l_.timestamp&&this.relativeParent.resolveTargetDelta(!0)}},{key:"resolveTargetDelta",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);var r=Boolean(this.resumingFrom)||this!==n;if(!!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget)){var i=this.options,a=i.layout,o=i.layoutId;if(this.layout&&(a||o)){if(this.resolvedRelativeTargetAt=l_.timestamp,!this.targetDelta&&!this.relativeTarget){var u=this.getClosestProjectingParent();u&&u.layout&&1!==this.animationProgress?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=MT(),this.relativeTargetOrigin=MT(),AT(this.relativeTargetOrigin,this.layout.layoutBox,u.layout.layoutBox),_I(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,c,l;if(this.target||(this.target=MT(),this.targetWithTransforms=MT()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,c=this.relativeTarget,l=this.relativeParent.target,IT(s.x,c.x,l.x),IT(s.y,c.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):_I(this.target,this.layout.layoutBox),WT(this.target,this.targetDelta)):_I(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;var f=this.getClosestProjectingParent();f&&Boolean(f.resumingFrom)===Boolean(this.resumingFrom)&&!f.options.layoutScroll&&f.target&&1!==this.animationProgress?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=MT(),this.relativeTargetOrigin=MT(),AT(this.relativeTargetOrigin,this.target,f.target),_I(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}UI.resolvedTargetDeltas++}}}}},{key:"getClosestProjectingParent",value:function(){if(this.parent&&!BT(this.parent.latestValues)&&!zT(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}},{key:"isProjecting",value:function(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}},{key:"calcProjection",value:function(){var e,t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t,r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===l_.timestamp&&(r=!1),!r){var i=this.options,a=i.layout,o=i.layoutId;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(a||o)){_I(this.layoutCorrected,this.layout.layoutBox),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=n.length;if(i){var a,o;t.x=t.y=1;for(var u=0;u<i;u++){o=(a=n[u]).projectionDelta;var s=a.instance;s&&s.style&&"contents"===s.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ZT(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,WT(e,o)),r&&jT(a.latestValues)&&ZT(e,a.latestValues))}t.x=QT(t.x),t.y=QT(t.y)}}(this.layoutCorrected,this.treeScale,this.path,n);var u=t.target;if(u){this.projectionDelta||(this.projectionDelta=LT(),this.projectionDeltaWithTransform=LT());var s=this.treeScale.x,c=this.treeScale.y,l=this.projectionTransform;TT(this.projectionDelta,this.layoutCorrected,u,this.latestValues),this.projectionTransform=OI(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===s&&this.treeScale.y===c||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u)),UI.recalculatedProjection++}}}}},{key:"hide",value:function(){this.isVisible=!1}},{key:"show",value:function(){this.isVisible=!0}},{key:"scheduleRender",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){var t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}},{key:"setAnimationOrigin",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.snapshot,i=r?r.latestValues:{},a=v({},this.latestValues),o=LT();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!n;var u,s=MT(),c=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),f=!l||l.members.length<=1,h=Boolean(c&&!f&&!0===this.options.crossfade&&!this.path.some(tC));this.animationProgress=0,this.mixTargetDelta=function(n){var r=n/1e3;ZI(o.x,e.x,r),ZI(o.y,e.y,r),t.setTargetDelta(o),t.relativeTarget&&t.relativeTargetOrigin&&t.layout&&t.relativeParent&&t.relativeParent.layout&&(AT(s,t.layout.layoutBox,t.relativeParent.layout.layoutBox),function(e,t,n,r){eC(e.x,t.x,n.x,r),eC(e.y,t.y,n.y,r)}(t.relativeTarget,t.relativeTargetOrigin,s,r),u&&NI(t.relativeTarget,u)&&(t.isProjectionDirty=!1),u||(u=MT()),_I(u,t.relativeTarget)),c&&(t.animationValues=a,function(e,t,n,r,i,a){i?(e.opacity=SS(0,void 0!==n.opacity?n.opacity:1,kI(r)),e.opacityExit=SS(void 0!==t.opacity?t.opacity:1,0,bI(r))):a&&(e.opacity=SS(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(var o=0;o<pI;o++){var u="border".concat(vI[o],"Radius"),s=gI(t,u),c=gI(n,u);void 0===s&&void 0===c||(s||(s=0),c||(c=0),0===s||0===c||yI(s)===yI(c)?(e[u]=Math.max(SS(mI(s),mI(c),r),0),(cx.test(c)||cx.test(s))&&(e[u]+="%")):e[u]=c)}(t.rotate||n.rotate)&&(e.rotate=SS(t.rotate||0,n.rotate||0,r))}(a,i,t.latestValues,r,h,f)),t.root.scheduleUpdateProjection(),t.scheduleRender(),t.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}},{key:"startAnimation",value:function(e){var t=this;this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(g_(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=y_.update((function(){uI.hasAnimatedSinceResize=!0,t.currentAnimation=function(e,t,n){var r=Gw(e)?e:GE(e);return r.start(VE("",r,t,n)),r.animation}(0,1e3,v(v({},e),{},{onUpdate:function(n){t.mixTargetDelta(n),e.onUpdate&&e.onUpdate(n)},onComplete:function(){e.onComplete&&e.onComplete(),t.completeAnimation()}})),t.resumingFrom&&(t.resumingFrom.currentAnimation=t.currentAnimation),t.pendingAnimation=void 0}))}},{key:"completeAnimation",value:function(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);var e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}},{key:"finishAnimation",value:function(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}},{key:"applyTransformsToTarget",value:function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,r=e.layout,i=e.latestValues;if(t&&n&&r){if(this!==e&&this.layout&&r&&iC(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||MT();var a=_T(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+a;var o=_T(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+o}_I(t,n),ZT(t,i),TT(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}},{key:"registerSharedNode",value:function(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new RI),this.sharedNodes.get(e).add(t);var n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}},{key:"isLead",value:function(){var e=this.getStack();return!e||e.lead===this}},{key:"getLead",value:function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}},{key:"getPrevLead",value:function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}},{key:"getStack",value:function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)}},{key:"promote",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needsReset,n=e.transition,r=e.preserveFollowOpacity,i=this.getStack();i&&i.promote(this,r),t&&(this.projectionDelta=void 0,this.needsReset=!0),n&&this.setOptions({transition:n})}},{key:"relegate",value:function(){var e=this.getStack();return!!e&&e.relegate(this)}},{key:"resetRotation",value:function(){var e=this.options.visualElement;if(e){var t=!1,n=e.latestValues;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),t){for(var r={},i=0;i<FI.length;i++){var a="rotate"+FI[i];n[a]&&(r[a]=n[a],e.setStaticValue(a,0))}for(var o in e.render(),r)e.setStaticValue(o,r[o]);e.scheduleRender()}}}},{key:"getProjectionStyles",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};if(!this.instance||this.isSVG)return r;if(!this.isVisible)return{visibility:"hidden"};r.visibility="";var i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=Gx(n.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;var a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){var o={};return this.options.layoutId&&(o.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,o.pointerEvents=Gx(n.pointerEvents)||""),this.hasProjected&&!jT(this.latestValues)&&(o.transform=i?i({},""):"none",this.hasProjected=!1),o}var u=a.animationValues||a.latestValues;this.applyTransformsToTarget(),r.transform=OI(this.projectionDeltaWithTransform,this.treeScale,u),i&&(r.transform=i(u,r.transform));var s=this.projectionDelta,c=s.x,l=s.y;for(var f in r.transformOrigin="".concat(100*c.origin,"% ").concat(100*l.origin,"% 0"),a.animationValues?r.opacity=a===this?null!==(t=null!==(e=u.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==t?t:1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:r.opacity=a===this?void 0!==u.opacity?u.opacity:"":void 0!==u.opacityExit?u.opacityExit:0,jw)if(void 0!==u[f]){var h=jw[f],d=h.correct,v=h.applyTo,p="none"===r.transform?u[f]:d(u[f],a);if(v)for(var m=v.length,y=0;y<m;y++)r[v[y]]=p;else r[f]=p}return this.options.layoutId&&(r.pointerEvents=a===this?Gx(n.pointerEvents)||"":"none"),r}},{key:"clearSnapshot",value:function(){this.resumeFrom=this.snapshot=void 0}},{key:"resetTree",value:function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(HI),this.root.sharedNodes.clear()}}]),e}()}function jI(e){e.updateLayout()}function zI(e){var t,n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){var r=e.layout,i=r.layoutBox,a=r.measuredBox,o=e.options.animationType,u=n.source!==e.layout.source;"size"===o?FT((function(e){var t=u?n.measuredBox[e]:n.layoutBox[e],r=_T(t);t.min=i[e].min,t.max=t.min+r})):iC(o,n.layoutBox,i)&&FT((function(t){var r=u?n.measuredBox[t]:n.layoutBox[t],a=_T(i[t]);r.max=r.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[t].max=e.relativeTarget[t].min+a)}));var s=LT();TT(s,i,n.layoutBox);var c=LT();u?TT(c,e.applyTransform(a,!0),n.measuredBox):TT(c,i,n.layoutBox);var l=!DI(s),f=!1;if(!e.resumeFrom){var h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){var d=h.snapshot,v=h.layout;if(d&&v){var p=MT();AT(p,n.layoutBox,d.layoutBox);var m=MT();AT(m,i,v.layoutBox),NI(p,m)||(f=!0),h.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=p,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:c,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:f})}else if(e.isLead()){var y=e.options.onExitComplete;y&&y()}e.options.transition=void 0}function qI(e){UI.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function KI(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function GI(e){e.clearSnapshot()}function HI(e){e.clearMeasurements()}function WI(e){var t=e.options.visualElement;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function QI(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function XI(e){e.resolveTargetDelta()}function YI(e){e.calcProjection()}function $I(e){e.resetRotation()}function JI(e){e.removeLeadSnapshot()}function ZI(e,t,n){e.translate=SS(t.translate,0,n),e.scale=SS(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function eC(e,t,n,r){e.min=SS(t.min,n.min,r),e.max=SS(t.max,n.max,r)}function tC(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var nC={duration:.45,ease:[.4,0,.1,1]};function rC(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function iC(e,t,n){return"position"===e||"preserve-aspect"===e&&!ST(PI(t),PI(n),.2)}var aC=BI({attachResizeListener:function(e,t){return $x(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),oC={current:void 0},uC=BI({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!oC.current){var e=new aC({});e.mount(window),e.setOptions({layoutScroll:!0}),oC.current=e}return oC.current},resetTransform:function(e,t){e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:function(e){return Boolean("fixed"===window.getComputedStyle(e).position)}}),sC={pan:{Feature:oI},drag:{Feature:iI,ProjectionNode:uC,MeasureLayout:hI}};var cC=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;var lC=4;function fC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;U_(n<=lC,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));var r=function(e){var t=cC.exec(e);if(!t)return[,];var n=o(t,3);return[n[1],n[2]]}(e),i=o(r,2),a=i[0],u=i[1];if(a){var s=window.getComputedStyle(t).getPropertyValue(a);return s?s.trim():Yw(u)?fC(u,t,n+1):u}}function hC(e,t,n){var r=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t)),i=e.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};for(var a in n&&(n=v({},n)),e.values.forEach((function(e){var t=e.get();if(Yw(t)){var n=fC(t,i);n&&e.set(n)}})),r){var o=r[a];if(Yw(o)){var u=fC(o,i);u&&(r[a]=u,n||(n={}),void 0===n[a]&&(n[a]=o))}}return{target:r,transitionEnd:n}}var dC=new Set(["width","height","top","left","right","bottom","x","y"]),vC=function(e){return dC.has(e)},pC=function(e){return e===Zw||e===lx},mC=function(e,t){return parseFloat(e.split(", ")[t])},yC=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return mC(a[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?mC(o[1],e):0}},gC=new Set(["x","y","z"]),kC=zw.filter((function(e){return!gC.has(e)}));var bC={width:function(e,t){var n=e.x,r=t.paddingLeft,i=void 0===r?"0":r,a=t.paddingRight,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},height:function(e,t){var n=e.y,r=t.paddingTop,i=void 0===r?"0":r,a=t.paddingBottom,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:yC(4,13),y:yC(5,14)},wC=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=v({},t),r=v({},r);var i=Object.keys(t).filter(vC),a=[],u=!1,s=[];if(i.forEach((function(i){var o=e.getValue(i);if(e.hasValue(i)){var c,l=n[i],f=QE(l),h=t[i];if(zx(h)){var d=h.length,v=null===h[0]?1:0;l=h[v],f=QE(l);for(var p=v;p<d&&null!==h[p];p++)c?U_(QE(h[p])===c,"All keyframes must be of the same type"):(c=QE(h[p]),U_(c===f||pC(f)&&pC(c),"Keyframes must be of the same dimension as the current value"))}else c=QE(h);if(f!==c)if(pC(f)&&pC(c)){var m=o.get();"string"===typeof m&&o.set(parseFloat(m)),"string"===typeof h?t[i]=parseFloat(h):Array.isArray(h)&&c===lx&&(t[i]=h.map(parseFloat))}else(null===f||void 0===f?void 0:f.transform)&&(null===c||void 0===c?void 0:c.transform)&&(0===l||0===h)?0===l?o.set(c.transform(l)):t[i]=f.transform(h):(u||(a=function(e){var t=[];return kC.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),u=!0),s.push(i),r[i]=void 0!==r[i]?r[i]:t[i],o.jump(h))}})),s.length){var c=s.indexOf("height")>=0?window.pageYOffset:null,l=function(e,t,n){var r=t.measureViewportBox(),i=t.current,a=getComputedStyle(i),o=a.display,u={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){u[e]=bC[e](r,a)})),t.render();var s=t.measureViewportBox();return n.forEach((function(n){var r=t.getValue(n);r&&r.jump(u[n]),e[n]=bC[n](s,a)})),e}(t,e,s);return a.length&&a.forEach((function(t){var n=o(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),e.render(),yw&&null!==c&&window.scrollTo({top:c}),{target:l,transitionEnd:r}}return{target:t,transitionEnd:r}};function xC(e,t,n,r){return function(e){return Object.keys(e).some(vC)}(t)?wC(e,t,n,r):{target:t,transitionEnd:r}}var _C={current:null},SC={current:!1};var EC=new WeakMap,TC=["willChange"],IC=["children"],CC=Object.keys(Dw),AC=CC.length,DC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],NC=Sw.length,PC=function(){function e(t){var n=this,r=t.parent,i=t.props,a=t.presenceContext,o=t.reducedMotionConfig,u=t.visualState,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,e),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=function(){return n.notify("Update",n.latestValues)},this.render=function(){n.current&&(n.triggerBuild(),n.renderInstance(n.current,n.renderState,n.props.style,n.projection))},this.scheduleRender=function(){return y_.render(n.render,!1,!0)};var c=u.latestValues,l=u.renderState;this.latestValues=c,this.baseTarget=v({},c),this.initialValues=i.initial?v({},c):{},this.renderState=l,this.parent=r,this.props=i,this.presenceContext=a,this.depth=r?r.depth+1:0,this.reducedMotionConfig=o,this.options=s,this.isControllingVariants=Ew(i),this.isVariantNode=Tw(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(r&&r.current);var f=this.scrapeMotionValuesFromProps(i,{}),h=f.willChange,d=Ex(f,TC);for(var m in d){var y=d[m];void 0!==c[m]&&Gw(y)&&(y.set(c[m],!1),UE(h)&&h.add(m))}}return y(e,[{key:"scrapeMotionValuesFromProps",value:function(e,t){return{}}},{key:"mount",value:function(e){var t=this;this.current=e,EC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((function(e,n){return t.bindToMotionValue(n,e)})),SC.current||function(){if(SC.current=!0,yw)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return _C.current=e.matches};e.addListener(t),t()}else _C.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||_C.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}},{key:"unmount",value:function(){for(var e in EC.delete(this.current),this.projection&&this.projection.unmount(),g_(this.notifyUpdate),g_(this.render),this.valueSubscriptions.forEach((function(e){return e()})),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(var t in this.features)this.features[t].unmount();this.current=null}},{key:"bindToMotionValue",value:function(e,t){var n=this,r=qw.has(e),i=t.on("change",(function(t){n.latestValues[e]=t,n.props.onUpdate&&y_.update(n.notifyUpdate,!1,!0),r&&n.projection&&(n.projection.isTransformDirty=!0)})),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(function(){i(),a()}))}},{key:"sortNodePosition",value:function(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}},{key:"loadFeatures",value:function(e,t,n,r){for(var i,a,o=this,u=(e.children,Ex(e,IC)),s=0;s<AC;s++){var c=CC[s],l=Dw[c],f=l.isEnabled,h=l.Feature,d=l.ProjectionNode,v=l.MeasureLayout;d&&(i=d),f(u)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),v&&(a=v))}if(!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);var p=u.layoutId,m=u.layout,y=u.drag,g=u.dragConstraints,k=u.layoutScroll,b=u.layoutRoot;this.projection.setOptions({layoutId:p,layout:m,alwaysMeasureLayout:Boolean(y)||g&&bw(g),visualElement:this,scheduleRender:function(){return o.scheduleRender()},animationType:"string"===typeof m?m:"both",initialPromotionConfig:r,layoutScroll:k,layoutRoot:b})}return a}},{key:"updateFeatures",value:function(){for(var e in this.features){var t=this.features[e];t.isMounted?t.update(this.props,this.prevProps):(t.mount(),t.isMounted=!0)}}},{key:"triggerBuild",value:function(){this.build(this.renderState,this.latestValues,this.options,this.props)}},{key:"measureViewportBox",value:function(){return this.current?this.measureInstanceViewportBox(this.current,this.props):MT()}},{key:"getStaticValue",value:function(e){return this.latestValues[e]}},{key:"setStaticValue",value:function(e,t){this.latestValues[e]=t}},{key:"makeTargetAnimatable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}},{key:"update",value:function(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(var n=0;n<DC.length;n++){var r=DC[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);var i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=function(e,t,n){var r=t.willChange;for(var i in t){var a=t[i],o=n[i];if(Gw(a))e.addValue(i,a),UE(r)&&r.add(i);else if(Gw(o))e.addValue(i,GE(a,{owner:e})),UE(r)&&r.remove(i);else if(o!==a)if(e.hasValue(i)){var u=e.getValue(i);!u.hasAnimated&&u.set(a)}else{var s=e.getStaticValue(i);e.addValue(i,GE(void 0!==s?s:a,{owner:e}))}}for(var c in n)void 0===t[c]&&e.removeValue(c);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}},{key:"getProps",value:function(){return this.props}},{key:"getVariant",value:function(e){return this.props.variants?this.props.variants[e]:void 0}},{key:"getDefaultTransition",value:function(){return this.props.transition}},{key:"getTransformPagePoint",value:function(){return this.props.transformPagePoint}},{key:"getClosestVariantNode",value:function(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}},{key:"getVariantContext",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){var e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}for(var t={},n=0;n<NC;n++){var r=Sw[n],i=this.props[r];(ww(i)||!1===i)&&(t[r]=i)}return t}},{key:"addVariantChild",value:function(e){var t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),function(){return t.variantChildren.delete(e)}}},{key:"addValue",value:function(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}},{key:"removeValue",value:function(e){this.values.delete(e);var t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}},{key:"hasValue",value:function(e){return this.values.has(e)}},{key:"getValue",value:function(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];var n=this.values.get(e);return void 0===n&&void 0!==t&&(n=GE(t,{owner:this}),this.addValue(e,n)),n}},{key:"readValue",value:function(e){return void 0===this.latestValues[e]&&this.current?this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}},{key:"setBaseTarget",value:function(e,t){this.baseTarget[e]=t}},{key:"getBaseTarget",value:function(e){var t,n=this.props.initial,r="string"===typeof n||"object"===typeof n?null===(t=jx(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;var i=this.getBaseTargetFromProps(this.props,e);return void 0===i||Gw(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=new qE),this.events[e].add(t)}},{key:"notify",value:function(e){if(this.events[e]){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.events[e]).notify.apply(t,r)}}}]),e}(),RC=["transition","transitionEnd"],OC=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"sortInstanceNodePosition",value:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1}},{key:"getBaseTargetFromProps",value:function(e,t){return e.style?e.style[t]:void 0}},{key:"removeValueFromRenderState",value:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]}},{key:"makeTargetAnimatableFromInstance",value:function(e,t,n){var r=e.transition,i=e.transitionEnd,a=Ex(e,RC),o=t.transformValues,u=function(e,t,n){var r={};for(var i in e){var a=eT(i,t);if(void 0!==a)r[i]=a;else{var o=n.getValue(i);o&&(r[i]=o.get())}}return r}(a,r||{},this);if(o&&(i&&(i=o(i)),a&&(a=o(a)),u&&(u=o(u))),n){!function(e,t,n){var r,i,a=Object.keys(t).filter((function(t){return!e.hasValue(t)})),o=a.length;if(o)for(var u=0;u<o;u++){var s=a[u],c=t[s],l=null;Array.isArray(c)&&(l=c[0]),null===l&&(l=null!==(i=null!==(r=n[s])&&void 0!==r?r:e.readValue(s))&&void 0!==i?i:t[s]),void 0!==l&&null!==l&&("string"===typeof l&&(BE(l)||OE(l))?l=parseFloat(l):!YE(l)&&VS.test(c)&&(l=RE(s,c)),e.addValue(s,GE(l,{owner:e})),void 0===n[s]&&(n[s]=l),null!==l&&e.setBaseTarget(s,l))}}(this,a,u);var s=function(e,t,n,r){var i=hC(e,t,r);return xC(e,t=i.target,n,r=i.transitionEnd)}(this,a,u,i);i=s.transitionEnd,a=s.target}return v({transition:r,transitionEnd:i},a)}}]),n}(PC);var LC=function(e){w(n,e);var t=S(n);function n(){return p(this,n),t.apply(this,arguments)}return y(n,[{key:"readValueFromInstance",value:function(e,t){if(qw.has(t)){var n=PE(t);return n&&n.default||0}var r,i=(r=e,window.getComputedStyle(r)),a=(Xw(t)?i.getPropertyValue(t):i[t])||0;return"string"===typeof a?a.trim():a}},{key:"measureInstanceViewportBox",value:function(e,t){return eI(e,t.transformPagePoint)}},{key:"build",value:function(e,t,n,r){mx(e,t,n,r.transformTemplate)}},{key:"scrapeMotionValuesFromProps",value:function(e,t){return Ux(e,t)}},{key:"handleChildMotionValue",value:function(){var e=this;this.childSubscription&&(this.childSubscription(),delete this.childSubscription);var t=this.props.children;Gw(t)&&(this.childSubscription=t.on("change",(function(t){e.current&&(e.current.textContent="".concat(t))})))}},{key:"renderInstance",value:function(e,t,n,r){Mx(e,t,n,r)}}]),n}(OC),MC=function(e){w(n,e);var t=S(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).isSVGTag=!1,e}return y(n,[{key:"getBaseTargetFromProps",value:function(e,t){return e[t]}},{key:"readValueFromInstance",value:function(e,t){if(qw.has(t)){var n=PE(t);return n&&n.default||0}return t=Fx.has(t)?t:Lx(t),e.getAttribute(t)}},{key:"measureInstanceViewportBox",value:function(){return MT()}},{key:"scrapeMotionValuesFromProps",value:function(e,t){return Bx(e,t)}},{key:"build",value:function(e,t,n,r){Dx(e,t,n,this.isSVGTag,r.transformTemplate)}},{key:"renderInstance",value:function(e,t,n,r){Vx(e,t,0,r)}},{key:"mount",value:function(e){this.isSVGTag=Px(e.tagName),At(x(n.prototype),"mount",this).call(this,e)}}]),n}(OC),FC=function(e,t){return Bw(e)?new MC(t,{enableHardwareAcceleration:!1}):new LC(t,{enableHardwareAcceleration:!0})},VC={layout:{ProjectionNode:uC,MeasureLayout:hI}},UC=v(v(v(v({},vT),O_),sC),VC),BC=Vw((function(e,t){return function(e,t,n,r){var i=t.forwardMotionProps,a=void 0!==i&&i;return v(v({},Bw(e)?Xx:Yx),{},{preloadedFeatures:n,useRender:Ox(a),createVisualElement:r,Component:e})}(e,t,UC,FC)}));var jC=function(e){var t=e.setSelectedImg,n=e.setSelectedDesc,r=dw("images").docs;return(0,s.jsx)("div",{className:"img-grid",children:r&&r.map((function(e){return(0,s.jsx)(BC.div,{className:"img-wrap",layout:!0,whileHover:{opacity:1},s:!0,onClick:function(){t(e.url),n(e.desc)},children:(0,s.jsx)(BC.img,{src:e.url,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}})},e.id)}))})},zC=function(e){var t=e.selectedImg,n=e.setSelectedImg,r=e.desc,i=e.setSelectedDesc;return(0,s.jsxs)(BC.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&(n(null),i(""))},initial:{opacity:0},animate:{opacity:1},children:[(0,s.jsx)(BC.img,{src:t,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}}),(0,s.jsx)("h1",{className:"desc-modal",children:r})]})},qC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},KC=t.createContext&&t.createContext(qC),GC=function(){return GC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},GC.apply(this,arguments)},HC=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function WC(e){return e&&e.map((function(e,n){return t.createElement(e.tag,GC({key:n},e.attr),WC(e.child))}))}function QC(e){return function(n){return t.createElement(XC,GC({attr:GC({},e.attr)},n),WC(e.child))}}function XC(e){var n=function(n){var r,i=e.attr,a=e.size,o=e.title,u=HC(e,["attr","size","title"]),s=a||n.size||"1em";return n.className&&(r=n.className),e.className&&(r=(r?r+" ":"")+e.className),t.createElement("svg",GC({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,u,{className:r,style:GC(GC({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),o&&t.createElement("title",null,o),e.children)};return void 0!==KC?t.createElement(KC.Consumer,null,(function(e){return n(e)})):n(qC)}function YC(e){return QC({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19.35 10.04A7.49 7.49 0 0012 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 000 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}}]})(e)}function $C(e){return QC({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}}]})(e)}function JC(e){return QC({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19.35 10.04A7.49 7.49 0 0012 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 000 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}}]})(e)}var ZC=function(e,n){var r=o((0,t.useState)(0),2),i=r[0],a=r[1],u=o((0,t.useState)(null),2),s=u[0],c=u[1],l=o((0,t.useState)(null),2),f=l[0],h=l[1];return(0,t.useEffect)((function(){var t=lw.ref(e.name),r=fw.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;a(t)}),(function(e){c(e)}),te(J().mark((function e(){var i,a,o;return J().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:return i=e.sent,a=hw,o=n,e.next=7,r.add({url:i,createdAt:a,desc:o});case 7:h(i);case 8:case"end":return e.stop()}}),e)}))))}),[e,n]),{progress:i,url:f,error:s}},eA=function(e){var n=e.file,r=e.setFile,i=e.description,a=void 0===i?"":i,o=e.setDescription,u=ZC(n,a),c=u.progress,l=u.url;return(0,t.useEffect)((function(){l&&(r(null),o(""))}),[l,r,o]),(0,s.jsx)(BC.div,{className:"progress-bar",initial:{width:0},animate:{width:c+"%"}})};var tA=function(){var e=o((0,t.useState)("No selected file"),2),n=e[0],r=e[1],i=o((0,t.useState)(""),2),a=i[0],u=i[1],c=o((0,t.useState)(!1),2),l=c[0],f=c[1],h=o((0,t.useState)(null),2),d=h[0],v=h[1];return(0,t.useEffect)((function(){l&&(d||f(!1))}),[l,d]),(0,s.jsxs)("main",{className:"uploader",children:[(0,s.jsxs)("form",{action:"",onClick:function(){return document.querySelector(".input-field").click()},children:[(0,s.jsx)("input",{type:"file",accept:"image/*",name:"",id:"",className:"input-field",hidden:!0,onChange:function(e){var t=e.target.files[0];t&&r(t.name),t&&v(t)}}),d?(0,s.jsx)("img",{src:URL.createObjectURL(d),width:500,height:300,alt:n}):(0,s.jsxs)("div",{children:[(0,s.jsx)(JC,{color:"#1475cf",size:60}),(0,s.jsx)("p",{children:"Browse Files to Upload"})]})]}),(0,s.jsx)("input",{type:"text",className:"desc-input",value:a,onChange:function(e){u(e.target.value)}}),(0,s.jsxs)("section",{className:"uploaded-row",children:[(0,s.jsx)(YC,{color:"1475cf",size:30,onClick:function(){f(!0)}}),(0,s.jsxs)("span",{children:[d&&d.name,(0,s.jsx)($C,{onClick:function(){r("No selected file"),u(""),v(null)}})]})]}),l&&d&&(0,s.jsx)(eA,{file:d,setFile:v,description:a,setDescription:u})]})};var nA=function(){var e=o((0,t.useState)(null),2),n=e[0],r=e[1],i=o((0,t.useState)(""),2),a=i[0],u=i[1];return(0,s.jsxs)("div",{className:"App",children:[(0,s.jsx)(c,{}),(0,s.jsx)(tA,{}),(0,s.jsx)(jC,{setSelectedImg:r,setSelectedDesc:u}),n&&(0,s.jsx)("div",{children:(0,s.jsx)(zC,{selectedImg:n,setSelectedImg:r,desc:a,setSelectedDesc:u})})]})};r.render((0,s.jsx)(t.StrictMode,{children:(0,s.jsx)(nA,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.6ed10292.js.map